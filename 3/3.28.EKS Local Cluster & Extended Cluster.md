# EKS本地集群（Local Cluster）vs 扩展集群（Extended Cluster）：核心差异+考点精讲
EKS本地集群和扩展集群是**AWS Outposts上部署Amazon EKS的两种核心模式**，SAP考试的核心考点是「控制平面部署位置」+「场景匹配」（尤其是第445题直接考这个区别）。两者的核心差异是**EKS控制平面的部署位置**，这直接决定了场景适配性、网络依赖、数据驻留能力，下面逐一拆解：

## 一、先明确核心概念
EKS集群由两部分组成：
- **控制平面**：核心组件（apiserver、scheduler、controller manager），负责集群调度、管理；
- **数据平面**：工作节点（EC2实例/裸金属），运行实际业务容器。

Outposts上的EKS两种模式，本质是「控制平面部署位置」的不同——这是SAP考试的**唯一核心考点**。

## 二、EKS本地集群（Local Cluster）：完全本地的托管集群
### 1. 核心架构
- 控制平面（apiserver/scheduler/controller manager）：**部署在用户本地的Outposts服务器/机架**；
- 数据平面（工作节点）：**同样部署在本地Outposts**；
- 与AWS Region的关系：仅需低带宽连接（用于日志、监控、AWS托管运维），核心业务不依赖云端。

### 2. 核心特点（SAP高频考点）
| 特性                | 具体说明                          |
|---------------------|-----------------------------------|
| 断网可用性          | ✅ 断网后集群仍能完全运行（控制平面+数据平面都在本地） |
| 数据驻留            | ✅ 所有集群数据（调度日志、业务数据）均本地存储，满足合规/数据主权要求 |
| 延迟                | ✅ 单-digit毫秒级延迟（控制平面和数据平面同机房） |
| 运维成本            | ✅ AWS完全托管（硬件/软件升级、故障修复均由AWS负责），运维开销极低 |
| 网络依赖            | ❌ 不依赖与AWS Region的稳定网络连接 |

### 3. 适用场景
- 生产环境（核心业务）；
- 要求“控制平面+数据平面均本地部署”（如第445题需求）；
- 数据必须驻留本地、低延迟、断网仍需工作（如制造业、金融核心系统）。

### 4. 真题关联（第445题）
题目要求“EKS控制平面和数据平面必须驻留本地+AWS托管+最低运维”，本地集群是唯一解：
- 排除扩展集群：控制平面在云端，不满足“控制平面本地”；
- 排除EKS Anywhere：自管理（非AWS托管），运维开销高。

## 三、EKS扩展集群（Extended Cluster）：云端控制+本地节点
### 1. 核心架构
- 控制平面（apiserver/scheduler/controller manager）：**部署在AWS云端Region**；
- 数据平面（工作节点）：**部署在本地Outposts**；
- 与AWS Region的关系：强依赖稳定网络连接（断网则控制平面无法访问，集群调度/管理功能失效）。

### 2. 核心特点（SAP高频考点）
| 特性                | 具体说明                          |
|---------------------|-----------------------------------|
| 断网可用性          | ❌ 断网后控制平面不可用，仅数据平面已运行的容器能继续工作（无法调度新任务） |
| 数据驻留            | ❌ 控制平面数据（调度日志等）存储在AWS Region，仅数据平面数据本地 |
| 延迟                | ⚠️ 控制平面访问需跨Region-Outposts网络，延迟高于本地集群 |
| 运维成本            | ✅ AWS托管（但需维护Region-Outposts网络） |
| 网络依赖            | ✅ 必须依赖与AWS Region的稳定高带宽连接 |

### 3. 适用场景
- 开发/测试环境（非核心业务）；
- 仅要求“数据平面本地”，对控制平面位置无要求；
- 能接受依赖云端控制平面（如互联网企业非核心系统）。

## 四、核心区别对比表（SAP考试直接考）
| 对比维度                | EKS本地集群（Local Cluster） | EKS扩展集群（Extended Cluster） |
|-------------------------|------------------------------|---------------------------------|
| 控制平面部署位置        | 本地Outposts                 | AWS云端Region                  |
| 数据平面部署位置        | 本地Outposts                 | 本地Outposts                   |
| 断网后集群可用性        | 完全可用（调度/管理/业务）   | 仅已运行容器可用（无法调度新任务） |
| 数据驻留合规性          | 完全满足本地数据驻留         | 不满足（控制平面数据在云端）|
| 延迟表现                | 单-digit毫秒（最优）| 数十毫秒（控制平面访问需跨网络） |
| 网络依赖                | 低（仅监控/日志需连接）| 高（必须稳定连接Region）|
| 适用场景                | 生产环境、合规、低延迟       | 开发/测试环境、非核心业务       |
| SAP考试选型优先级       | 高（生产/合规/低延迟场景必选） | 低（仅无控制平面本地要求时选）|

## 五、SAP考点强化：避坑关键
1. **核心陷阱**：题目中只要出现“控制平面必须本地”“生产环境”“数据驻留”“低延迟”，直接选本地集群；仅提“数据平面本地”，选扩展集群。
2. **运维对比**：
   - 本地集群/扩展集群：均为AWS托管（硬件/软件由AWS维护），运维开销远低于EKS Anywhere（自管理，需用户维护所有组件）；
   - 第445题排除EKS Anywhere的核心原因：“自管理”=运维开销高，不符合“最低运维”要求。
3. **易混点**：
   - 不要把“扩展集群”理解为“本地集群的扩展”——两者是平行的部署模式，核心区别是控制平面位置；
   - 本地集群不是“自管理”：仍由AWS托管，只是部署位置在本地，这是和EKS Anywhere的本质区别。

## 总结
| 记忆口诀 | 适用场景 | SAP选型 |
|----------|----------|---------|
| 控制平面本地=本地集群 | 生产、合规、低延迟、断网可用 | 优先选 |
| 控制平面云端=扩展集群 | 测试、仅数据平面本地、能接受网络依赖 | 仅无本地控制平面要求时选 |