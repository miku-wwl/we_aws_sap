# AWS迁移与现代化（下）：核心工具深度拆解+SAP考点精讲
基于之前的工具场景对比表，我们按「工具分类→核心原理→适用场景→操作流程→真题关联→考试陷阱」的逻辑，逐一拆解每个迁移工具，聚焦SAP考试的高频考点和实操逻辑，确保你既能理解“为什么选”，也知道“怎么用”。


## 一、先明确：迁移与现代化的核心目标（SAP考试底层逻辑）
AWS迁移与现代化的核心是「以最低成本、最短停机时间、最小业务影响，将本地/其他云的工作负载迁移到AWS，并优化为云原生架构」。  
SAP考试考察的核心不是“工具操作细节”，而是「场景关键词→工具选型」的精准匹配，以及「易混淆工具的边界区分」。


## 二、核心迁移工具逐模块拆解
### 模块1：服务器迁移（物理机/VM → AWS EC2）
#### 核心工具：AWS MGN（Migration Hub Strategy Recommendations）
##### 1. 工具定位
AWS官方首选的「无代理服务器迁移工具」，专门用于“ Lift-and-Shift（直接迁移）”场景，支持物理机、VMware、Hyper-V等多种源环境，核心优势是「零停机迁移+持续数据复制+自动适配AWS资源」。

##### 2. 核心原理（SAP考点）
```
源服务器（本地物理机/VM）→ 安装MGN代理（或无代理部署）→ 持续复制数据到AWS → 启动测试实例（验证兼容性）→ 切割流量（零停机）→ 迁移完成
```
- 关键特性：  
  ✅ 持续数据复制（仅传输变化数据，减少带宽消耗）；  
  ✅ 自动转换操作系统（如Windows Server 2012→2019）；  
  ✅ 与AWS Migration Hub集成，统一管理多服务器迁移。

##### 3. 适用场景（真题触发词）
- 场景关键词：“Lift-and-Shift迁移”“物理机/VM迁移”“零停机”“多服务器统一管理”；
- 典型案例：企业将本地100台VMware虚拟机迁移到AWS EC2，要求业务不中断。

##### 4. 考试排除项：为什么不选AWS SMS？
| 对比维度 | AWS MGN | AWS SMS（Server Migration Service） | SAP考试选型逻辑 |
|----------|---------|------------------------------------|----------------|
| 代理支持 | 支持无代理/有代理 | 仅支持有代理 | MGN兼容性更强，优先选 |
| 数据复制 | 持续复制（零停机） | 快照式复制（有停机时间） | 题目提“零停机”→ 排除SMS |
| 管理能力 | 支持1000+服务器，Migration Hub集成 | 支持小规模迁移，无统一管理 | 企业级迁移场景→ 排除SMS |

> SAP考点：只要题目出现“零停机”“大规模服务器迁移”“无代理”，直接选MGN，排除SMS。

##### 5. 简化实操步骤（实践导向）
1. 在AWS控制台创建MGN迁移项目；
2. 源服务器部署MGN代理（或配置无代理访问）；
3. 验证源服务器连接，设置目标EC2实例类型（自动适配）；
4. 启动“测试迁移”，生成测试EC2实例，验证业务可用性；
5. 执行“切割迁移”，关闭源服务器，流量切换到AWS EC2；
6. 迁移完成后，卸载源服务器代理，删除测试资源。


### 模块2：数据库迁移（本地数据库 → AWS数据库服务）
#### 核心工具：AWS SCT（Schema Conversion Tool）+ AWS DMS（Database Migration Service）
##### 1. 工具定位
- **SCT**：负责「架构转换」——将异构数据库的表结构、存储过程、函数等转换为AWS数据库兼容格式（如Oracle→Aurora MySQL，SQL Server→Redshift）；
- **DMS**：负责「数据迁移」——将源数据库数据复制到目标数据库，支持全量迁移+增量同步（CDC，Change Data Capture），实现「零停机迁移」。

> 核心逻辑：SCT管“结构”，DMS管“数据”，两者必须配合使用（SAP考试常考“组合选型”）。

##### 2. 核心原理（SAP高频考点）
```
源数据库（Oracle/SQL Server/MySQL）→ SCT转换架构（表结构/存储过程）→ 目标数据库（Aurora/Redshift）
→ DMS创建迁移任务（全量+CDC增量）→ 同步数据→ 验证一致性→ 切换业务→ 迁移完成
```
- 关键特性：  
  ✅ 异构迁移支持（如Oracle→Aurora，MongoDB→DocumentDB）；  
  ✅ CDC增量同步（捕获源数据库的insert/update/delete操作，确保零停机）；  
  ✅ 数据一致性校验（自动对比源和目标数据，避免丢失）。

##### 3. 适用场景（真题触发词）
- 场景关键词：“异构数据库迁移”“零停机”“CDC增量同步”“Oracle→Aurora”“SQL Server→Redshift”；
- 典型案例：银行将本地Oracle数据库迁移到AWS Aurora MySQL，要求交易数据不丢失，业务无中断。

##### 4. 考试排除项：为什么不选DataSync/Snowball？
- DataSync：仅支持文件/块存储迁移，不支持数据库结构化数据迁移（排除）；
- MGN：仅支持服务器迁移，无法处理数据库的增量同步和架构转换（排除）；
- Snowball：适合离线海量数据迁移，不支持数据库实时同步（排除）。

> SAP考点：数据库迁移题目，只要出现“异构”“零停机”“CDC”，直接选“SCT+DMS”组合。

##### 5. 简化实操步骤（实践导向）
1. 源数据库开启归档日志（CDC需要），创建迁移专用账号（授予读写权限）；
2. 安装SCT，连接源数据库和目标数据库，执行架构转换（生成转换报告，修复不兼容项）；
3. 在DMS控制台创建“复制实例”（迁移中间节点）；
4. 创建“源端点”（本地数据库）和“目标端点”（AWS Aurora）；
5. 创建DMS迁移任务：选择“全量迁移+CDC增量同步”；
6. 启动任务，监控数据同步进度，验证数据一致性；
7. 业务切换：关闭源数据库写入，等待DMS同步完最后一批数据，切换应用连接到目标数据库；
8. 迁移完成后，停止DMS任务，删除复制实例。


### 模块3：文件迁移（本地NFS/SMB文件 → AWS S3/EFS/FSx）
#### 核心工具：AWS DataSync
##### 1. 工具定位
AWS官方首选的「在线文件迁移工具」，专为“NFS/SMB协议文件”设计，支持增量迁移、压缩传输、错误自动恢复，适合带宽充足场景下的TB-PB级文件迁移。

##### 2. 核心原理（SAP考点）
```
本地文件存储（NAS/NFS/SMB服务器）→ DataSync代理（本地部署）→ 增量扫描文件变化→ 压缩/加密传输→ AWS存储（S3/EFS/FSx）
```
- 关键特性：  
  ✅ 支持增量迁移（仅传新增/修改文件，重复文件去重）；  
  ✅ 传输速度比传统FTP快10倍（AWS优化传输协议）；  
  ✅ 原生集成S3/EFS/FSx，无需额外协议转换。

##### 3. 适用场景（真题触发词）
- 场景关键词：“NFS/SMB文件迁移”“带宽充足”“增量同步”“文件去重”；
- 典型案例：企业将本地NAS存储的50TB设计图纸（NFS协议）迁移到AWS S3，要求后续本地文件更新后自动同步到S3。

##### 4. 考试排除项：为什么不选File Gateway？
| 对比维度 | AWS DataSync | AWS File Gateway | SAP考试选型逻辑 |
|----------|--------------|------------------|----------------|
| 核心定位 | 批量文件迁移（一次性/周期性） | 混合云文件访问（实时访问） | 迁移场景→ 选DataSync；访问场景→ 选File Gateway |
| 传输特性 | 增量迁移、压缩、去重 | 实时缓存，无批量迁移优化 | 批量迁移需求→ 排除File Gateway |
| 适用带宽 | 带宽充足（100Mbps+） | 带宽不限（侧重访问体验） | 题目提“带宽充足”→ 选DataSync |

> SAP考点：“文件迁移”场景选DataSync，“混合云实时访问文件”场景选File Gateway，两者不可混淆。

##### 5. 简化实操步骤（实践导向）
1. 在AWS控制台创建DataSync代理（下载OVA镜像，部署到本地VM）；
2. 激活代理，配置本地NFS/SMB文件源（输入服务器地址、账号密码）；
3. 配置目标AWS存储（如S3标准存储，设置存储类别）；
4. 创建迁移任务：选择“增量迁移”，设置同步频率（如每日凌晨同步）；
5. 启动任务，监控迁移进度（AWS控制台可视化）；
6. 迁移完成后，验证S3中的文件完整性，删除测试任务。


### 模块4：混合存储访问（本地实时访问AWS文件）
#### 核心工具：AWS File Gateway
##### 1. 工具定位（复习强化，SAP高频考点）
「混合云文件访问通道」——本地客户端通过SMB/NFS协议，像访问本地文件一样访问AWS S3/EFS/FSx中的文件，核心价值是「无需迁移文件，实时访问云端数据」，避免大规模文件迁移的带宽和时间成本。

##### 2. 核心原理（之前疑问延伸）
```
本地客户端（Windows/Linux）→ SMB/NFS协议 → File Gateway（本地部署）→ 缓存热点文件→ AWS S3/EFS/FSx（云端持久存储）
```
- 关键特性：  
  ✅ 本地缓存加速（常用文件读取延迟≈本地）；  
  ✅ 协议自动转换（SMB/NFS→S3 API）；  
  ✅ 云端文件统一管理（多分支机构访问同一套S3文件）。

##### 3. 适用场景（真题触发词）
- 场景关键词：“本地实时访问S3文件”“多分支机构共享云端文件”“无需迁移文件”；
- 典型案例：全国10个分支机构需要访问总部存放在AWS S3的共享文档，要求访问延迟低，无需每个分支机构下载副本。

##### 4. 考试排除项：为什么不选Volume Gateway？
- Volume Gateway：用于本地块存储（如iSCSI协议）访问AWS EBS快照，不支持文件级访问（NFS/SMB），排除；
- DataSync：用于批量迁移，不支持实时访问，排除。

> SAP考点：“文件级实时访问”→ 选File Gateway；“块级访问”→ 选Volume Gateway。


### 模块5：离线数据迁移（带宽不足，TB/PB级数据）
#### 核心工具：AWS Snowball Edge
##### 1. 工具定位
AWS「物理数据迁移设备」，专为“带宽极低/无网络”场景设计，将TB-PB级数据通过物理设备运送到AWS，避免长时间在线传输。核心优势是「离线迁移+边缘计算」二合一（SAP考试常考边缘计算场景）。

##### 2. 核心原理（SAP考点）
```
本地数据中心 → Snowball Edge设备（AWS邮寄上门）→ 本地写入数据（通过NFS/S3 API）→ 邮寄回AWS → AWS导入数据到S3/EFS → 设备回收
```
- 关键特性：  
  ✅ 存储容量可选（80TB-100PB集群）；  
  ✅ 硬件加密（AES-256）+ 物理防篡改（封条）；  
  ✅ 支持边缘计算（部署EC2实例/容器，本地处理数据）。

##### 3. 适用场景（真题触发词）
- 场景关键词：“带宽不足”“TB/PB级数据迁移”“离线迁移”“边缘计算”；
- 典型案例：偏远地区工厂有100TB生产数据，网络带宽仅1Mbps，需迁移到AWS S3；同时工厂需要本地运行边缘计算应用（断网可用）。

##### 4. 考试排除项：为什么不选DataSync/Snowmobile？
- DataSync：依赖网络，带宽不足时迁移时间过长（排除）；
- Snowmobile：PB级超大规模迁移（100PB+），设备是卡车大小，适合数据中心整体迁移，小题量迁移场景排除。

> SAP考点：“带宽不足+TB级数据”→ 选Snowball Edge；“PB级超大规模”→ 选Snowmobile（已退役，现在推荐Snowball Edge集群）。

##### 5. 简化实操步骤（实践导向）
1. AWS控制台下单Snowball Edge设备（选择存储优化/计算优化型号）；
2. 设备送达后，连接到本地网络（通过网线/无线）；
3. 安装Snowball客户端，通过NFS/S3 API向设备写入数据；
4. 写入完成后，锁定设备（物理封条），预约AWS回收；
5. AWS收到设备后，将数据导入指定S3桶，发送导入完成通知；
6. 验证数据完整性，关闭Snowball任务。


### 模块6：备份归档（替代本地磁带库）
#### 核心工具：AWS Tape Gateway
##### 1. 工具定位
「虚拟磁带库」，模拟本地磁带库的备份流程，将备份数据存储到AWS S3 Glacier（低成本归档存储），替代传统物理磁带库，降低备份运维成本和存储成本。

##### 2. 核心原理（SAP考点）
```
本地备份软件（如Veritas/NBU）→ iSCSI协议 → Tape Gateway（本地部署）→ 虚拟磁带→ 同步到AWS S3 Glacier → 长期归档
```
- 关键特性：  
  ✅ 兼容现有备份软件（无需修改备份流程）；  
  ✅ 支持磁带生命周期管理（自动从Glacier检索数据）；  
  ✅ 存储成本仅为物理磁带库的1/10。

##### 3. 适用场景（真题触发词）
- 场景关键词：“替代本地磁带库”“长期合规备份”“低成本归档”；
- 典型案例：银行需要将交易日志备份归档10年，满足合规要求，原使用物理磁带库，维护成本高。

##### 4. 考试排除项：为什么不选File Gateway？
- File Gateway：用于文件实时访问，不支持磁带库模拟和长期归档（排除）；
- DataSync：用于批量迁移，不支持备份软件集成和磁带生命周期管理（排除）。

> SAP考点：“替代磁带库”“合规归档”→ 直接选Tape Gateway。


## 三、SAP考试迁移工具选型口诀（速记）
1. 服务器迁移：零停机+大规模→MGN，小规模快照→SMS（少考）；
2. 数据库迁移：异构+零停机→SCT+DMS，CDC是关键；
3. 文件迁移：带宽足+增量→DataSync，实时访问→File Gateway；
4. 离线迁移：带宽不足→Snowball Edge，超大规模→Snowball集群；
5. 备份归档：替代磁带库→Tape Gateway，合规长期存→Glacier。


## 四、总结：迁移工具选型的核心决策逻辑（SAP考试关键）
1. 先看「工作负载类型」：服务器→MGN，数据库→SCT+DMS，文件→DataSync/File Gateway，备份→Tape Gateway；
2. 再看「场景关键词」：零停机→MGN/DMS，带宽不足→Snowball Edge，实时访问→File Gateway，替代磁带库→Tape Gateway；
3. 最后排除「易混淆工具」：区分DataSync（迁移）vs File Gateway（访问），MGN（零停机）vs SMS（快照），SCT（结构）vs DMS（数据）。
