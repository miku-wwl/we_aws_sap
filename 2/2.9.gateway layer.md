# Direct Connect（DX）物理连接全流程拆解（新手+SAP考点版）

## 一、先建立核心认知：DX的本质是“企业→运营商→AWS”的三方合作链路
用一个通俗比喻理解：  
把AWS想象成「全球最大的“网络商场”」，商场里有很多商铺（AWS的Region、VPC、S3等资源）；  
你的企业本地数据中心（DC）是「你自己的仓库」；  
你想让仓库和商场之间走“专属高速通道”（不堵车、不经过公共马路），而不是走普通公路（公网）——这个“专属高速通道”就是DX。  

但AWS不会亲自跑到你家仓库门口“铺高速”：  
- AWS只负责在“商场周边”建了很多「高速入口（DX接入点）」；  
- 你需要找一家“修路公司（AWS认证运营商）”，让他们从你的仓库（本地DC）修一条“小路（物理光纤）”，接到AWS的“高速入口（DX接入点）”；  
- 最后，“小路+高速入口+商场内部道路”打通，你的仓库就能直达商场（本地DC→AWS资源）。


## 二、三方角色清晰划分（SAP考试考点！）
必须明确「谁做什么、不做什么」，避免混淆责任边界（真题会问“下列哪项是AWS在DX中的职责？”）：

| 角色                | 核心职责                                                                 | 具体做什么（通俗版）                                                                 |
|---------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------------------|
| **AWS**             | 提供“高速入口”和“商场内部道路”                                           | 1. 在全球主要城市建「DX Location（DX接入点）」——本质是AWS的机房，里面有对接运营商的网络设备；<br/>2. 提供DX服务的逻辑层支持（比如允许你创建VIF、绑定DXGW/TGW）；<br/>3. 维护AWS侧的网络（比如接入点到Region的骨干网）。 |
| **企业（你）**      | 准备“仓库出口”和“内部网络”                                               | 1. 有自己的本地数据中心（DC），且DC里有「兼容DX的路由器」（比如Cisco、Juniper设备，需要支持1G/10G/100G端口）；<br/>2. 规划自己的内部网络（比如本地IP段、路由配置）；<br/>3. 和运营商签合同，支付“修路费”（物理线路费用）；<br/>4. 在AWS控制台申请DX连接，创建VIF（虚拟接口）。 |
| **AWS认证运营商**   | 负责“仓库到高速入口”的物理线路铺设与维护                                 | 1. 是AWS官方认证的网络服务商（比如中国的电信/联通、国际的Equinix/Level3）；<br/>2. 从企业本地DC拉一根「物理光纤」，接到最近的AWS DX Location（接入点）；<br/>3. 维护这条物理线路（比如光纤断了、故障了，运营商负责抢修）；<br/>4. 向企业收取线路租赁费用（按带宽、距离计费）。 |

### 关键考点提醒（SAP真题陷阱）：
- 错误选项：“AWS负责从企业本地DC铺设光纤到DX接入点”“DX的物理线路维护由AWS承担”；  
- 正确选项：“DX的物理链路由企业与AWS认证运营商协商搭建”“AWS仅提供DX接入点（DX Location）和AWS侧网络支持”。


## 三、DX物理链路搭建全流程（step-by-step，新手能看懂）
咱们以“中国企业（本地DC在上海）想连AWS亚太区（ap-southeast-1，新加坡）的资源”为例，讲清楚从0到1的搭建过程：

### Step 1：企业做“准备工作”
1. 确认需求：企业需要每天传输10TB数据，公网VPN延迟太高，决定用DX（10Gbps带宽）；  
2. 检查本地设备：确保本地DC的路由器有「10Gbps光口」（兼容DX的物理接口标准），且支持BGP路由协议（DX必备的路由协议）；  
3. 查AWS DX Location：登录AWS控制台，查看离上海最近的DX接入点——比如AWS在上海有合作的DX Location（机房），或者周边城市（如香港）的DX Location；  
4. 选择运营商：从AWS官网查询「上海地区的AWS认证运营商」（比如中国电信），联系运营商咨询线路报价、施工周期。

### Step 2：企业与运营商签合同，运营商“铺路”
1. 企业和中国电信签合同：约定线路带宽（10Gbps）、铺设起点（企业上海DC）、终点（AWS上海DX Location）、租赁期限（比如3年）；  
2. 运营商施工：中国电信派工程师到企业DC，从DC的路由器光口拉一根「单模光纤」，一路铺设到AWS上海DX Location的机房；  
   - 铺设方式：可能走地下管道、架空线路，或者利用运营商已有的光纤网络（不用完全新铺，而是占用运营商的光纤资源）；  
   - 施工周期：一般几周到几个月（看企业DC到DX接入点的距离，比如同城可能2周，跨城可能1个月）；  
3. 运营商测试线路：光纤铺好后，运营商测试线路是否通畅、带宽是否达标（10Gbps），确保物理链路无故障。

### Step 3：对接AWS，打通“最后一公里”
1. 企业在AWS控制台申请DX连接：  
   - 选择DX Location（比如“上海DX接入点”）；  
   - 填写运营商信息（比如“中国电信”）；  
   - 提交申请后，AWS会审核，并通知DX接入点的工程师“准备对接”；  
2. AWS与运营商完成物理对接：  
   - AWS在DX接入点的设备（比如Cisco Nexus交换机），和运营商铺设的光纤进行物理连接（插光纤模块）；  
   - 对接完成后，物理链路就通了：企业DC → 运营商光纤 → AWS DX接入点；  
3. 企业创建VIF（虚拟接口）：  
   - 物理链路是“空白通道”，需要创建VIF来定义“流量用途”（比如Private VIF连VGW、Transit VIF连DXGW）；  
   - 配置BGP路由：企业本地路由器和AWS侧设备通过BGP协议交换路由（比如企业告诉AWS“我的本地IP段是10.0.0.0/8”，AWS告诉企业“我的VPC IP段是172.16.0.0/16”）；  
4. 测试连通性：企业从本地DC ping AWS VPC里的EC2，延迟通常在10-50ms（远低于公网VPN的100+ms），说明DX链路已打通。


## 四、关键细节补充（新手易忽略，SAP考试常考）
### 1. DX Location不是Region，是“接入点”
- 比如AWS的ap-southeast-1（新加坡Region），可能在上海、香港、新加坡都有DX Location；  
- 企业选择DX Location的原则：优先选离本地DC最近的，这样物理线路最短、延迟最低、费用最低；  
- 即使DX Location和目标Region不在同一个城市（比如上海DX Location连新加坡Region），AWS会通过自己的骨干网把流量从DX Location转发到Region（骨干网延迟极低，几乎可忽略）。

### 2. 物理线路的类型和带宽
- 线路类型：主要是「单模光纤」（支持长距离、高带宽，比如10Gbps、100Gbps）；  
- 带宽选项：AWS DX支持的带宽从1Gbps到100Gbps（常见的是1G、10G），企业按自己的需求选择，带宽越高，费用越贵。

### 3. 为什么AWS不自己铺线？
- 成本问题：全球铺设光纤的成本极高（涉及土地、施工、维护），AWS没必要做“重资产”的铺路业务；  
- 合规问题：不同国家/地区的电信业务有严格的牌照要求（比如中国的电信业务需要工信部牌照），AWS无法直接开展；  
- 专业分工：AWS专注于“云计算和网络服务”，运营商专注于“物理线路铺设和维护”，各司其职效率更高。

### 4. 线路故障谁来修？
- 如果是“企业DC内部的设备或线路”故障（比如本地路由器坏了）：企业自己负责维修；  
- 如果是“运营商铺设的光纤”故障（比如光纤被挖断）：运营商负责抢修（按合同约定的SLA，比如4小时内修复）；  
- 如果是“AWS DX接入点或AWS侧网络”故障：AWS负责修复（AWS SLA承诺99.9%可用性）。


## 五、SAP备考总结（新手必背）
1. DX物理链路是「企业+运营商+AWS」三方合作：AWS只提供接入点，运营商铺线，企业准备本地设备；  
2. 核心考点：记住“AWS不铺线、不维护物理链路”，做题时直接排除相关错误选项；  
3. 流程考点：DX搭建的关键步骤是“选运营商→铺光纤→对接DX接入点→创建VIF→配置BGP”，真题可能考“DX连接建立的正确流程”。
