è¿™ 10 é“é¢˜ç›®æ¶µç›–äº† **æœ¬åœ°æ•°æ®ç¾å¤‡ (Storage Gateway / Outposts)**ã€**è¿œç¨‹åŠå…¬ VDI (WorkSpaces vs AppStream)**ã€**Amazon Connect é˜²åƒåœ¾ç”µè¯**ã€**å®æ—¶ç‰©è”ç½‘åˆ†æ (Kinesis + Lambda)**ã€**EKS èŠ‚ç‚¹å¼¹æ€§ (Topology Spread)**ã€**è·¨åŒºåŸŸ DR (RDS RR + ECS)**ã€**æˆæœ¬ç›‘æ§ (AWS Budgets)**ã€**é«˜å¯ç”¨è®¢å•å¤„ç† (SQS + Lambda)**ã€**Lambda è®¿é—®æ•°æ®åº“å‡­è¯ (Secrets Manager)**ã€**Control Tower æŠ¤æ  (SCP)**ã€‚

ç‰¹åˆ«æ˜¯ **Q405 (EKS Topology Spread)** å’Œ **Q406 (Cross-Region DR with RDS RR)** æ˜¯ SAP è€ƒè¯•ä¸­çš„ç°ä»£åŒ–æ¶æ„è€ƒç‚¹ã€‚

è®©æˆ‘ä»¬å¼€å¯ **é€é¢˜ç§’æ€æ¨¡å¼**ï¼

---

#### ğŸ“ [401/529] æœ¬åœ° SMB ç¾å¤‡åˆ°äº‘ (S3 File Gateway)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **æºç«¯ï¼š** On-prem SMB shares (Metadata + Images)ã€‚
* **éœ€æ±‚ï¼š**
    1.  Access via **SMB** from on-prem or AWS in DR (ç¾éš¾æ—¶ SMB è®¿é—®)ã€‚
    2.  Data available within **5 minutes** (RTO å¿«)ã€‚
    3.  Rarely accessed (å†·æ•°æ®)ã€‚
* **ç›®æ ‡ï¼š** DR solutionã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **ç½‘å…³é€‰å‹ï¼š**
    * **S3 File Gateway (C/D):** æä¾› SMB æ¥å£ï¼Œåç«¯å­˜å‚¨åœ¨ S3ã€‚æ•°æ®åœ¨ S3 ä¸­æ˜¯å¯¹è±¡ï¼Œä½†å¯ä»¥é€šè¿‡ç½‘å…³ä»¥æ–‡ä»¶å½¢å¼è®¿é—®ã€‚
    * FSx File Gateway (B): åç«¯æ˜¯ FSx for Windowsã€‚è™½ç„¶å…¼å®¹æ€§å¥½ï¼Œä½† FSx å­˜å‚¨æˆæœ¬æ¯” S3 é«˜ï¼Œä¸” FSx File Gateway ä¸»è¦ç”¨äºç¼“å­˜ï¼Œæºæ•°æ®åœ¨ FSxã€‚é¢˜ç›®è¯´ "Store copies on AWS"ï¼ŒFSx ä¹Ÿå¯ä»¥ã€‚
    * Outposts (A): ç¡¬ä»¶éƒ¨ç½²ï¼Œæˆæœ¬æé«˜ï¼Œä¸é€‚åˆâ€œå¾ˆå°‘è®¿é—®â€çš„å†·å¤‡ä»½ã€‚
* **å­˜å‚¨ç±»åˆ« (S3 Storage Class):**
    * **Metadata:** å¯èƒ½éœ€è¦å¿«é€Ÿæ£€ç´¢ï¼Ÿé¢˜ç›®æ²¡ç»†è¯´ã€‚
    * **Images:** Rarely accessedã€‚
    * **RTO 5 åˆ†é’Ÿï¼š**
        * **Glacier Deep Archive (C):** å–å›æ—¶é—´ **12-48 å°æ—¶**ã€‚ä¸æ»¡è¶³ 5 åˆ†é’Ÿè¦æ±‚ã€‚
        * **S3 Standard-IA (C/D):** æ¯«ç§’çº§è®¿é—®ã€‚æ»¡è¶³ 5 åˆ†é’Ÿã€‚
        * **S3 Glacier Instant Retrieval:** æ¯«ç§’çº§ï¼Œä¹Ÿå¯ä»¥ã€‚
    * **é€‰é¡¹ C:** Metadata -> Standard-IA, Images -> Glacier Deep Archiveã€‚å› ä¸º Deep Archive æ¢å¤å¤ªæ…¢ï¼ˆ>12hï¼‰ï¼Œè¿™è¿åäº† "Available within 5 minutes"ã€‚
    * **é€‰é¡¹ D:** All -> **S3 Standard-IA**ã€‚è™½ç„¶ç¨å¾®è´µç‚¹ï¼ˆç›¸æ¯” Glacierï¼‰ï¼Œä½†å®ƒæ˜¯å”¯ä¸€èƒ½æ»¡è¶³ 5 åˆ†é’Ÿ RTO çš„â€œä½é¢‘è®¿é—®â€å±‚ï¼ˆé¢˜ç›®æ²¡ç»™ Glacier Instant Retrieval é€‰é¡¹ï¼‰ã€‚
    * **å†çœ‹ B (FSx):** FSx SSD è´µï¼ŒHDD ä¾¿å®œä½†ä¹Ÿè¦ä¸€ç›´å¼€ç€ã€‚ç›¸æ¯” S3 Standard-IAï¼ŒS3 æ›´é€‚åˆåšè¿™ç§çº¯ DR å‰¯æœ¬å­˜å‚¨ã€‚ä¸” S3 File Gateway éƒ¨ç½²ç®€å•ã€‚
    * **å†³èƒœç‚¹ï¼š** 5 åˆ†é’Ÿ RTOã€‚Glacier Deep Archive ç»å¯¹ä¸è¡Œã€‚å¿…é¡»é€‰ **S3 Standard-IA** æˆ– **Standard**ã€‚
    * **é”å®š Dã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ D)**
* **S3 File Gateway:** æä¾› SMB æ¥å£ã€‚
* **S3 Standard-IA:** æ»¡è¶³ 5 åˆ†é’Ÿ RTO çš„ä½æˆæœ¬å­˜å‚¨ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** å­˜å‚¨ç½‘å…³ä¸ S3 å­˜å‚¨ç±»åˆ«çš„æ¢å¤æ—¶é—´ (RTO)ã€‚

---

#### ğŸ“ [402/529] è¿œç¨‹åŠå…¬ä¸å¤šç³»ç»Ÿæ¡Œé¢ (WorkSpaces)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **ç”¨æˆ·ï¼š** 400 å‘˜å·¥ï¼Œæ··åˆ OS (Windows/Linux)ã€‚
* **éœ€æ±‚ï¼š**
    1.  Remote work environment (è¿œç¨‹åŠå…¬)ã€‚
    2.  Integrate with On-prem AD (AD é›†æˆ)ã€‚
    3.  MFAã€‚
    4.  **Replicate existing desktop experience** (å¤åˆ¶æ¡Œé¢ä½“éªŒ -> å…¨åŠŸèƒ½æ¡Œé¢)ã€‚
* **å·¥å…·ï¼š** WorkSpaces vs AppStreamã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **WorkSpaces (A/C):** æä¾›æŒä¹…åŒ–çš„ã€å®Œæ•´çš„äº‘æ¡Œé¢ï¼ˆDaaSï¼‰ã€‚æ”¯æŒ Windows å’Œ Linuxã€‚éå¸¸é€‚åˆæ›¿ä»£å‘˜å·¥çš„ä¸»åŠå…¬ç”µè„‘ã€‚
* **AppStream 2.0 (B/D):** æä¾›åº”ç”¨ç¨‹åºæµï¼ˆéæŒä¹…åŒ–æ¡Œé¢ï¼‰ã€‚è™½ç„¶æœ‰ Desktop Viewï¼Œä½†ä¸»è¦ç”¨äºåˆ†å‘ç‰¹å®šåº”ç”¨ï¼Œæ•°æ®ä¸æŒä¹…åŒ–ï¼ˆé™¤éé…ç½® Home Foldersï¼‰ã€‚é¢˜ç›®è¦æ±‚ "Replicate existing desktop experience"ï¼Œé€šå¸¸ WorkSpaces æ›´è´´åˆ‡ã€‚
* **AD é›†æˆä¸ MFA:**
    * **AD Connector:** è¿æ¥æœ¬åœ° ADã€‚
    * **MFA:** WorkSpaces æ”¯æŒé€šè¿‡ **RADIUS** æœåŠ¡å™¨é›†æˆ MFAã€‚
    * é€‰é¡¹ A è¯´ "Activate MFA using AWS Console"ã€‚AWS Console ä¸èƒ½ç›´æ¥ç»™ WorkSpaces å¼€ MFAï¼Œå¿…é¡»é…ç½® RADIUSã€‚
    * é€‰é¡¹ C è¯´ "Configure RADIUS server for MFA"ã€‚è¿™æ˜¯æ­£ç¡®çš„é…ç½®æ–¹å¼ã€‚
* **é”å®š Cã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ C)**
* **WorkSpaces:** å…¨åŠŸèƒ½äº‘æ¡Œé¢ã€‚
* **AD Connector + RADIUS:** å®ç° AD é›†æˆä¸ MFAã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** WorkSpaces çš„ MFA é…ç½®ä¾èµ– (RADIUS)ã€‚

---

#### ğŸ“ [403/529] Amazon Connect é˜²åƒåœ¾ç”µè¯ (DynamoDB + Lambda)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **åœºæ™¯ï¼š** å‘¼å«ä¸­å¿ƒï¼Œåƒåœ¾ç”µè¯å¤šã€‚
* **éœ€æ±‚ï¼š**
    1.  Agent marks call as spam (ä»£ç†æ ‡è®°)ã€‚
    2.  **Automatically block** future calls (è‡ªåŠ¨æ‹¦æˆª)ã€‚
* **ç›®æ ‡ï¼š** **Operational efficiency**ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **æ ‡è®°æµç¨‹ï¼š**
    * ä»£ç†åœ¨æ¥ç”µè¯æ—¶ï¼Œéœ€è¦ä¸€ä¸ªæŒ‰é’®æˆ–æ–¹å¼æ ‡è®°ã€‚
    * é€‰é¡¹ A: è‡ªå®šä¹‰ CCP (Contact Control Panel) æ·»åŠ æŒ‰é’®ã€‚è¿™éœ€è¦å‰ç«¯å¼€å‘ï¼Œç¨å¤æ‚ä½†ä½“éªŒå¥½ã€‚
    * é€‰é¡¹ C: **Quick Connect (å¿«é€Ÿè¿æ¥)**ã€‚ä»£ç†å¯ä»¥å°†ç”µè¯â€œè½¬æ¥â€åˆ°ä¸€ä¸ªç‰¹å®šçš„ Quick Connectï¼ˆå‘½åä¸ºâ€œReport Spamâ€ï¼‰ã€‚è¿™ä¸ª Quick Connect èƒŒåæ˜¯ä¸€ä¸ª Contact Flowï¼Œè§¦å‘ Lambda å°†å·ç å†™å…¥ DynamoDBã€‚è¿™æ˜¯ Amazon Connect çš„æ ‡å‡†â€œæ— ä»£ç /ä½ä»£ç â€æ‰©å±•ç©æ³•ï¼Œæ— éœ€å¼€å‘è‡ªå®šä¹‰ CCPã€‚ $\rightarrow$ **é€‰ä¸­ C**ã€‚
* **æ‹¦æˆªæµç¨‹ï¼š**
    * åœ¨å…¥ç«™ Contact Flow (Inbound Flow) ä¸­ï¼Œå…ˆè°ƒç”¨ Lambda æŸ¥ DynamoDBã€‚å¦‚æœåœ¨é»‘åå•ï¼Œç›´æ¥æŒ‚æ–­ã€‚
    * é€‰é¡¹ C çš„æè¿° "Modify contact flow for the quick connect to invoke Lambda" æ˜¯ä¸ºäº†å†™å…¥ã€‚æ‹¦æˆªé€»è¾‘éšå«åœ¨å…¥ç«™æµç¨‹ä¸­ï¼ˆé¢˜ç›®é—®è§£å†³æ–¹æ¡ˆï¼ŒC ä¾§é‡äºå¦‚ä½•æ ‡è®°ï¼‰ã€‚
    * é€‰é¡¹ A/B éœ€è¦å¼€å‘ã€‚é€‰é¡¹ D (è¦æ±‚è¾“å…¥) ä¼šå½±å“æ­£å¸¸ç”¨æˆ·ä½“éªŒã€‚
    * **C æ˜¯æœ€å·§å¦™çš„è¿è¥æ–¹æ¡ˆã€‚** ä»£ç†åªéœ€åšâ€œè½¬æ¥â€åŠ¨ä½œå³å¯æ ‡è®°ã€‚
    * **é”å®š Cã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ C)**
* **Quick Connect as Trigger:** åˆ©ç”¨è½¬æ¥æœºåˆ¶è§¦å‘åå°é€»è¾‘ï¼ˆæ ‡è®°åƒåœ¾ç”µè¯ï¼‰ï¼Œæ— éœ€ä¿®æ”¹å‰ç«¯ UIã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** Amazon Connect çµæ´»è¿ç”¨ Contact Flow å®ç°ä¸šåŠ¡é€»è¾‘ã€‚

---

#### ğŸ“ [404/529] å®æ—¶ç‰©è”ç½‘å¼‚å¸¸æ£€æµ‹ä¸é€šçŸ¥ (Kinesis + Lambda)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **æºï¼š** ä¼ æ„Ÿå™¨æ•°æ® (Environment params)ã€‚
* **éœ€æ±‚ï¼š**
    1.  Stream and analyze **in real time** (å®æ—¶)ã€‚
    2.  **Notify immediately** if out of range (ç«‹å³é€šçŸ¥)ã€‚
* **æ¶æ„ï¼š** æµå¤„ç†ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **æµæœåŠ¡ï¼š**
    * **Kinesis Data Streams (C):** å®æ—¶æµï¼Œä½å»¶è¿Ÿã€‚
    * Firehose (A): ä¸»è¦æ˜¯åŠ è½½æ•°æ®åˆ° S3/Redshiftï¼Œå»¶è¿Ÿç¨é«˜ï¼ˆç¼“å†²ï¼‰ï¼Œåˆ†æèƒ½åŠ›å¼±ï¼ˆåªèƒ½åšç®€å•è½¬æ¢ï¼‰ã€‚
    * MSK (B): Kafka ä¹Ÿå¯ä»¥ï¼Œä½† Fargate æ¶ˆè´¹ Kafka éœ€è¦ç»´æŠ¤æ¶ˆè´¹è€…ç»„ï¼Œä¸å¦‚ Lambda è§¦å‘å™¨ç®€å•ã€‚
    * Kinesis Analytics (D): SQL åˆ†æï¼Œé€‚åˆå¤æ‚çª—å£èšåˆã€‚é¢˜ç›®åªæ˜¯â€œè¶…å‡ºèŒƒå›´â€ï¼ˆç®€å•çš„é˜ˆå€¼æ£€æŸ¥ï¼‰ï¼ŒLambda è¶³å¤Ÿä¸”æ›´è½»é‡ã€‚ä¸” D ç”¨ ECS æ¶ˆè´¹ï¼ŸKinesis Analytics å¯ä»¥ç›´æ¥å‘ Lambda æˆ– Firehoseã€‚
* **å¤„ç†ä¸é€šçŸ¥ï¼š**
    * **Lambda (C):** æ¶ˆè´¹ Kinesis æµï¼Œæ£€æŸ¥æ•°å€¼ï¼Œå¦‚æœè¶…æ ‡ï¼Œè°ƒç”¨ **SNS**ã€‚è¿™æ˜¯æœ€ç»å…¸çš„å®æ—¶å¤„ç†æ¨¡å¼ã€‚
    * Step Functions (A): ä¸é€‚åˆç›´æ¥æ¶ˆè´¹ Firehose é«˜ååæµã€‚
    * Fargate (B): ç»´æŠ¤æˆæœ¬é«˜äº Lambdaã€‚
* **é”å®š Cã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ C)**
* **Kinesis Data Streams:** å®æ—¶æ‘„å–ã€‚
* **Lambda:** å®æ—¶å¤„ç†é€»è¾‘ï¼ˆé˜ˆå€¼æ£€æŸ¥ï¼‰ã€‚
* **SNS:** å®æ—¶é€šçŸ¥ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** å®æ—¶æµå¤„ç†çš„æ ‡å‡† Serverless æ¶æ„ã€‚

---

#### ğŸ“ [405/529] EKS èŠ‚ç‚¹å¼¹æ€§ä¸åˆ†å¸ƒ (Topology Spread)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **åœºæ™¯ï¼š** EKS, Stateless Pods, Unpredictable number (ä¸å¯é¢„æµ‹)ã€‚
* **ç‰¹ç‚¹ï¼š** Short period creation (çŸ­æ—¶å¤§é‡åˆ›å»º)ã€‚
* **éœ€æ±‚ï¼š** **Maximize node resilience** (æœ€å¤§åŒ–èŠ‚ç‚¹å¼¹æ€§/å¯ç”¨æ€§)ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **å¼¹æ€§ç­–ç•¥ï¼š**
    * è¿™é‡Œçš„ "Resilience" é€šå¸¸æŒ‡é«˜å¯ç”¨ï¼Œå³é¿å…æ‰€æœ‰ Pod éƒ½åœ¨ä¸€ä¸ªèŠ‚ç‚¹æˆ–ä¸€ä¸ª AZã€‚
    * **Topology Spread Constraints (D):** Kubernetes åŸç”ŸåŠŸèƒ½ï¼Œå¯ä»¥æ§åˆ¶ Pod åœ¨ä¸åŒæ‹“æ‰‘åŸŸï¼ˆå¦‚ AZã€èŠ‚ç‚¹ï¼‰ä¸Šçš„åˆ†å¸ƒã€‚é…ç½® `topologyKey: topology.kubernetes.io/zone` å¯ä»¥å¼ºåˆ¶ Pod è·¨ AZ åˆ†å¸ƒã€‚è¿™æ˜¯æœ€å¤§åŒ–å¼¹æ€§çš„æ­£ç¡®å§¿åŠ¿ã€‚
* **å…¶ä»–é€‰é¡¹ï¼š**
    * A: EKS Control Plane æ˜¯ AWS æ‰˜ç®¡çš„ï¼Œç”¨æˆ·æ— æ³•æ§åˆ¶å…¶éƒ¨ç½²ä½ç½®ï¼ˆå®ƒæœ¬èº«å°±æ˜¯å¤š AZ çš„ï¼‰ã€‚
    * B: Less node groups? è¿™è·Ÿå¼¹æ€§æ²¡å…³ç³»ã€‚
    * C: Cluster Autoscaler over-provisioning (è¿‡åº¦é…ç½®)? è¿™æé«˜äº†å¯åŠ¨é€Ÿåº¦ï¼ˆå‡å°‘ Pending æ—¶é—´ï¼‰ï¼Œä½†æ²¡è§£å†³ Pod åˆ†å¸ƒçš„å¼¹æ€§é—®é¢˜ï¼ˆå¯èƒ½éƒ½æŒ¤åœ¨ä¸€ä¸ª AZï¼‰ã€‚
    * **é”å®š Dã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ D)**
* **Topology Spread Constraints:** K8s åŸç”Ÿè°ƒåº¦ç­–ç•¥ï¼Œç¡®ä¿ Pod è·¨æ•…éšœåŸŸï¼ˆAZï¼‰å‡åŒ€åˆ†å¸ƒã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** Kubernetes (EKS) çš„é«˜å¯ç”¨è°ƒåº¦é…ç½®ã€‚

---

#### ğŸ“ [406/529] è·¨åŒºåŸŸ DR: RDS & ECS (Read Replica + Lambda)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **æ¶æ„ï¼š** ECS Fargate + RDS MySQLã€‚
* **è§¦å‘ï¼š** CloudWatch Alarm -> EventBridgeã€‚
* **ç›®æ ‡ï¼š** Failover to separate Regionã€‚
* **éœ€æ±‚ï¼š** **Minimize recovery time** (RTO æœ€çŸ­)ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **æ•°æ®åº“æ¢å¤ï¼š**
    * **Snapshot (A/B/D):** ä»å¿«ç…§æ¢å¤ RDS éœ€è¦æ—¶é—´ï¼ˆå‡ åˆ†é’Ÿåˆ°å‡ ååˆ†é’Ÿï¼Œå–å†³äºæ•°æ®é‡ï¼‰ã€‚
    * **Cross-Region Read Replica (C):** å‰¯æœ¬å·²ç»åœ¨é‚£äº†ï¼Œæ•°æ®å®æ—¶åŒæ­¥ã€‚æ•…éšœæ—¶åªéœ€ **Promote** (æå‡) ä¸ºä¸»åº“ã€‚è¿™æ¯”å¿«ç…§æ¢å¤å¿«å¾—å¤šã€‚
* **åº”ç”¨æ¢å¤ï¼š**
    * **Pre-provisioned (C):** "Set up 2nd ECS cluster...". æå‰å»ºå¥½é›†ç¾¤ï¼ˆPilot Lightï¼‰ï¼Œæ•…éšœæ—¶åªéœ€è°ƒæ•´æœåŠ¡æ•°é‡æˆ–åˆ‡æµé‡ã€‚è¿™æ¯” "Lambda creates cluster" (B) è¦å¿«ã€‚
* **æµç¨‹ (C):**
    * EventBridge -> Lambdaã€‚
    * Lambda -> Promote Read Replicaã€‚
    * Lambda -> Update Route 53ã€‚
    * è¿™æ˜¯å®ç°æœ€ä½ RTO çš„è‡ªåŠ¨åŒ–æµç¨‹ã€‚
* **é”å®š Cã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ C)**
* **RDS Read Replica:** æä¾›æœ€å¿«çš„æ•°æ®åº“ RTOã€‚
* **Pre-provisioned Cluster:** å‡å°‘åŸºç¡€è®¾æ–½åˆ›å»ºæ—¶é—´ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** æ•°æ®åº“ DR æ–¹æ¡ˆçš„ RTO å¯¹æ¯”ï¼ˆå¿«ç…§ vs å‰¯æœ¬ï¼‰ã€‚

---

#### ğŸ“ [407/529] EC2 ä½¿ç”¨é‡æ¿€å¢æŠ¥è­¦ (AWS Budgets)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **éœ€æ±‚ï¼š** Track EC2 usage (hours/cost)ã€‚
* **æŠ¥è­¦æ¡ä»¶ï¼š** Usage > 10% higher than **average of past 30 days** (æ¯”è¿‡å»30å¤©å¹³å‡å€¼é«˜10%)ã€‚
* **å·¥å…·ï¼š** Organizationsã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **AWS Budgets (A):**
    * æ”¯æŒ **Auto-adjusting budgets** (è‡ªåŠ¨è°ƒæ•´é¢„ç®—)ã€‚å¯ä»¥åŸºäºå†å²æœŸé—´ï¼ˆå¦‚è¿‡å» 30 å¤©æˆ–ä¸Šä¸ªæœˆï¼‰çš„å¹³å‡å€¼æˆ–æ”¯å‡ºè®¾ç½®åŸºçº¿ã€‚
    * é¢˜ç›®æè¿° "Set budget amount to 10% higher than average usage... reported by Cost Explorer"ã€‚è¿™æ­£æ˜¯ AWS Budgets çš„åŠŸèƒ½ï¼ˆå¯ä»¥åŸºäº Cost Explorer æ•°æ®æ‰‹åŠ¨è®¾ï¼Œæˆ–è€…ç”¨ Auto-adjustingï¼‰ã€‚
    * é€‰é¡¹ A çš„æè¿°æ˜¯æ‰‹åŠ¨çš„ï¼Ÿ"Set budget amount to..."ã€‚å¦‚æœèƒ½è·å–åˆ°è¿‡å»30å¤©å¹³å‡å€¼ï¼Œè¿™ç¡®å®èƒ½åšåˆ°ã€‚
* **Cost Anomaly Detection (B):**
    * ä¸“é—¨æ£€æµ‹å¼‚å¸¸ï¼ˆAnomalyï¼‰ã€‚å®ƒä½¿ç”¨ ML è‡ªåŠ¨æ£€æµ‹å³°å€¼ã€‚
    * é¢˜ç›®æœ‰ä¸€ä¸ªéå¸¸å…·ä½“çš„é˜ˆå€¼ "10% higher than average"ã€‚Cost Anomaly Detection é€šå¸¸æ˜¯æ£€æµ‹â€œå¼‚å¸¸â€ï¼Œé˜ˆå€¼æ˜¯åŸºäºå½±å“é‡‘é¢ï¼ˆImpactï¼‰æˆ–æ•æ„Ÿåº¦ï¼Œè€Œä¸æ˜¯ç®€å•çš„â€œæ¯”å¹³å‡é«˜10%â€è¿™ç§å›ºå®šé€»è¾‘ï¼ˆè™½ç„¶æ•ˆæœç±»ä¼¼ï¼Œä½†æœºåˆ¶ä¸åŒï¼‰ã€‚
    * **Budgets** æ›´é€‚åˆè¿™ç§â€œåŸºäºè§„åˆ™çš„å›ºå®šé˜ˆå€¼â€æŠ¥è­¦ã€‚
    * **ä½†æ˜¯ï¼Œ** A é€‰é¡¹è¯´ "Specify a daily period... Set amount to 10% higher than past 30 days"ã€‚å¦‚æœæ¯å¤©éƒ½è¦æ‰‹åŠ¨è®¾ï¼Œé‚£å¤ªç´¯äº†ã€‚
    * **è®©æˆ‘ä»¬å†çœ‹ B:** Cost Anomaly Detection æ˜¯è‡ªåŠ¨çš„ã€‚å¦‚æœ "10% higher" æ˜¯æŒ‡â€œæ˜¾è‘—å¼‚å¸¸â€ï¼ŒB æ›´æ™ºèƒ½ã€‚
    * **ç„¶è€Œï¼Œ** é¢˜ç›®ä¸­çš„ "10% higher than average of past 30 days" æ˜¯ä¸€ä¸ªéå¸¸å…·ä½“çš„**é¢„ç®—é€»è¾‘**ã€‚AWS Budgets çš„ **Auto-adjusting budgets** åŠŸèƒ½å¯ä»¥é…ç½®ä¸º "Based on historical usage"ï¼Œå¹¶è®¾ç½® Notification thresholdã€‚
    * è®©æˆ‘ä»¬ä»”ç»†çœ‹ A çš„æ“ä½œæ€§ã€‚å¦‚æœæ˜¯â€œä¸€æ¬¡æ€§é…ç½®â€ä¸€ä¸ª Auto-adjusting Budgetï¼Œé‚£æ˜¯å®Œç¾çš„ã€‚å¦‚æœæ˜¯ A æè¿°çš„â€œæ‰‹åŠ¨å¡«ä¸€ä¸ªæ•°å­—â€ï¼Œé‚£è¿™å°±ä¸æ˜¯åŠ¨æ€çš„ã€‚ä½† A çš„æè¿°æ›´åƒæ˜¯â€œé…ç½®é€»è¾‘â€ã€‚
    * è€ƒè™‘åˆ° **Cost Anomaly Detection** ä¸»è¦æ˜¯ä¸ºäº†å‘ç°æ„æ–™ä¹‹å¤–çš„å³°å€¼ï¼ˆML basedï¼‰ï¼Œè€Œé¢˜ç›®å®šä¹‰äº†æ˜ç¡®çš„æ•°å­¦è§„åˆ™ï¼Œ**AWS Budgets** æ˜¯æ‰§è¡Œè¿™ç§è§„åˆ™çš„æ ‡å‡†å·¥å…·ã€‚
    * **é”å®š Aã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ A)**
* **AWS Budgets:** æ”¯æŒåŸºäºä½¿ç”¨é‡ï¼ˆUsageï¼‰çš„é¢„ç®—å’ŒæŠ¥è­¦ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** æˆæœ¬ç›‘æ§å·¥å…·çš„åŒºåˆ« (Budgets vs Anomaly Detection)ã€‚

---

#### ğŸ“ [408/529] é«˜å¯ç”¨æ¾è€¦åˆè®¢å•å¤„ç† (SQS + Lambda)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **åœºæ™¯ï¼š** è®¢å•å¤„ç† -> DynamoDBã€‚
* **è´Ÿè½½ï¼š** Intermittent (é—´æ­‡æ€§), Spikes (è¥é”€æ´»åŠ¨)ã€‚
* **éœ€æ±‚ï¼š**
    1.  Simple, High Availability, **Loosely Coupled** (æ¾è€¦åˆ)ã€‚
    2.  Scale during campaignsã€‚
    3.  Process with minimal delayã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **æ¶æ„æ¨¡å¼ï¼š**
    * æ¾è€¦åˆ + å‰Šå³°å¡«è°· $\rightarrow$ **SQS**ã€‚
    * å¼¹æ€§è®¡ç®— + é—´æ­‡è´Ÿè½½ $\rightarrow$ **Lambda**ã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * A (EC2): è€¦åˆåº¦é«˜ï¼Œæ‰©å±•æ…¢ã€‚
    * **B (SQS + Lambda):** å®Œç¾çš„æ¾è€¦åˆ Serverless æ¶æ„ã€‚SQS æ¥æ”¶è®¢å•ï¼ˆé«˜å¯ç”¨ã€ç¼“å†²ï¼‰ï¼Œè§¦å‘ Lambda å¤„ç†ï¼ˆè‡ªåŠ¨æ‰©å±•ï¼‰ã€‚
    * C (Step Functions + ECS): ä¹Ÿå¯ä»¥ï¼Œä½†â€œSimpleâ€æ˜¯å…³é”®è¯ã€‚SQS+Lambda æ¯” Step Functions+ECS æ›´ç®€å•ç›´æ¥ã€‚
    * D (Kinesis + EC2): é€‚åˆæµæ•°æ®ï¼Œä¸” EC2 ç»´æŠ¤é‡ã€‚
* **é”å®š Bã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B)**
* **SQS:** æ¾è€¦åˆä¸ç¼“å†²ã€‚
* **Lambda:** å¼¹æ€§è®¡ç®—ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** ç»å…¸çš„è®¢å•å¤„ç† Serverless æ¶æ„ã€‚

---

#### ğŸ“ [409/529] Lambda è®¿é—® RDS å‡­è¯ç®¡ç† (Secrets Manager)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **åœºæ™¯ï¼š** Lambda $\rightarrow$ RDS PostgreSQLã€‚
* **ç¯å¢ƒï¼š** QA, Prodã€‚
* **éœ€æ±‚ï¼š**
    1.  **NO credentials in code** (ä»£ç æ— å‡­è¯)ã€‚
    2.  **Auto-rotate passwords** (è‡ªåŠ¨è½®æ¢)ã€‚
* **å·¥å…·ï¼š** Secrets Manager vs Parameter Storeã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **è‡ªåŠ¨è½®æ¢ï¼š**
    * **Secrets Manager (B):** åŸç”Ÿæ”¯æŒ RDS å¯†ç çš„**è‡ªåŠ¨è½®æ¢**ï¼ˆå†…ç½® Lambda Rotatorï¼‰ã€‚
    * Parameter Store (A): éœ€è¦è‡ªå·±å†™ Lambda é€»è¾‘æ¥è½®æ¢ã€‚
    * KMS (C): åªæ˜¯åŠ å¯†ï¼Œä¸å­˜å‚¨å’Œè½®æ¢å¯†ç ã€‚
* **ç¯å¢ƒåŒºåˆ†ï¼š**
    * Secrets Manager å¯ä»¥å­˜å¤šå¥—å¯†é’¥ï¼Œæˆ–è€…åŒåå¯†é’¥åœ¨ä¸åŒè´¦æˆ·/åŒºåŸŸã€‚B é€‰é¡¹è¯´ "Use different secret entries"ã€‚
    * Lambda é€šè¿‡ç¯å¢ƒå˜é‡å¼•ç”¨ Secret Nameã€‚
* **é”å®š Bã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B)**
* **Secrets Manager:** å‡­è¯å­˜å‚¨ä¸è‡ªåŠ¨è½®æ¢çš„æœ€ä½³å®è·µã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** æ•°æ®åº“å‡­è¯ç®¡ç†çš„æ ‡å‡†æ–¹æ¡ˆ (Secrets Manager)ã€‚

---

#### ğŸ“ [410/529] é˜²æ­¢ EC2 å…¬ç½‘ IP (SCP)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **éœ€æ±‚ï¼š** Prevent **NEW or EXISTING** EC2 instances from having **Public IP addresses**ã€‚
* **èŒƒå›´ï¼š** OU level (Control Tower/Organizations)ã€‚
* **ç›®æ ‡ï¼š** Prevention (é˜²æ­¢)ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **ç½‘ç»œæ¥å£å±‚é¢ï¼š**
    * EC2 çš„å…¬ç½‘ IP æ˜¯é€šè¿‡ ENI å±æ€§å…³è”çš„ã€‚
    * **Prevent New:** ç¦æ­¢ `ec2:RunInstances` æ—¶è®¾ç½® `AssociatePublicIpAddress`ã€‚
    * **Prevent Existing:** ç¦æ­¢ `ec2:AssociateAddress` (EIP)ã€‚
* **å·¥å…·ï¼š**
    * **SCP (C):** å¯ä»¥å®šä¹‰å…¨å±€ç­–ç•¥ã€‚
        * 1. Deny `RunInstances` if `AssociatePublicIpAddress` is true (ç½‘ç»œæ¥å£å±‚é¢)ã€‚
        * 2. Deny `AssociateAddress` (ç¦æ­¢ç»‘å®š EIP)ã€‚
        * è¿™èƒ½æœ‰æ•ˆé˜²æ­¢ä»»ä½•å…¬ç½‘ IP çš„å‡ºç°ã€‚
    * **Control Tower (B):** Control Tower æœ‰ Proactive Controlsï¼Œä½†åº•å±‚é€šå¸¸æ˜¯ CloudFormation Hooks æˆ– SCPã€‚å¦‚æœé€‰é¡¹ C çš„ SCP å†™æ³•æ­£ç¡®ï¼Œå®ƒæ˜¯æœ€åº•å±‚çš„æ§åˆ¶ã€‚
    * **Config (D):** æ˜¯æ£€æµ‹ï¼ˆDetectiveï¼‰ï¼Œäº‹åä¿®å¤ï¼Œä¸æ˜¯â€œé˜²æ­¢â€ï¼ˆPreventï¼‰ã€‚
    * **SSM (A):** æ— æ³•é˜»æ­¢ç”¨æˆ·é€šè¿‡æ§åˆ¶å°/API æ“ä½œã€‚
* **B vs C:**
    * B æåˆ°äº† "Proactive control... Set AssociatePublicIpAddress to False"ã€‚è¿™æ˜¯ CloudFormation Hook çš„è¡Œä¸ºã€‚
    * C æåˆ°äº† "SCP... Prevent launching... Prevent attaching"ã€‚è¿™æ˜¯ API æ‹¦æˆªã€‚
    * é¢˜ç›®é—® "Prevent... from having public IP"ã€‚SCP æ˜¯æœ€ç¡¬çš„å¢™ã€‚
    * ç‰¹åˆ«æ˜¯å¯¹äº **Existing** å®ä¾‹ï¼Œå¦‚æœè¦é˜²æ­¢å®ƒç»‘å®š EIPï¼ŒSCP `Deny ec2:AssociateAddress` æ˜¯å”¯ä¸€æ–¹æ³•ã€‚
    * **é”å®š Cã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ C)**
* **SCP:** é€šè¿‡é™åˆ¶ API å‚æ•°ï¼ˆ`ec2:AssociatePublicIpAddress`ï¼‰å’Œæ“ä½œï¼ˆ`ec2:AssociateAddress`ï¼‰æ¥å¼ºåˆ¶ç§æœ‰åŒ–ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** åˆ©ç”¨ SCP å¼ºåˆ¶ EC2 æ— å…¬ç½‘ IPã€‚

---
**å°ç»“ï¼š**
è¿™ç»„é¢˜ç›®çš„ **EKS Topology**ã€**RDS DR RTO**ã€**S3 File Gateway RTO** éƒ½æ˜¯å®æˆ˜ä¸­çš„â€œé»„é‡‘æ ‡å‡†â€ã€‚

**æ­å–œä½ ï¼Œ410 é¢˜ï¼**