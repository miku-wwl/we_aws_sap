è¿™ 10 é“é¢˜æ¶µç›–äº† **S3 Access Points VPC é™åˆ¶**ã€**Elastic Beanstalk è“ç»¿éƒ¨ç½²**ã€**S3 å¼‚æ­¥å¤„ç†æ¶æ„ (SQS + EC2)**ã€**Aurora Global Database å†™å…¥è½¬å‘**ã€**SFTP è¿ç§» (AWS Transfer + EIP)**ã€**AppSync å®æ—¶è®¢é˜…**ã€**DynamoDB æˆæœ¬ä¼˜åŒ–**ã€**SCP å¼ºåˆ¶ç½‘ç»œæº**ã€‚

ç‰¹åˆ«æ˜¯ **Q286 (S3 Access Points & SCP)** å’Œ **Q289 (Aurora Global Write Forwarding)** æ˜¯ SAP è€ƒè¯•ä¸­çš„é«˜çº§ç‰¹æ€§é¢˜ã€‚

è®©æˆ‘ä»¬å¼€å¯ **é€é¢˜ç§’æ€æ¨¡å¼**ï¼

---

### **æ­£å¼è§£æ Q281 - Q290**

#### ğŸ“ [281/529] é™ä½ Presto æŸ¥è¯¢æˆæœ¬ (S3 æ•°æ®æ¹–)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **ç°çŠ¶ï¼š** EMR (Persistent Cluster) + HDFS (ORC Data)ã€‚
* **è´Ÿè½½ï¼š** SQL Queries (Presto), Run time < 15 mins, Only 5pm-10pm (æ¯å¤© 5 å°æ—¶)ã€‚
* **ç—›ç‚¹ï¼š** **High cost** (æŒä¹…é›†ç¾¤ä¸€ç›´å¼€ç€å¾ˆè´µ)ã€‚
* **ç›®æ ‡ï¼š** **Most cost-effective**ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **è®¡ç®—å­˜å‚¨åˆ†ç¦»ï¼š**
    * å½“å‰æ¶æ„æ˜¯å­˜ç®—è€¦åˆï¼ˆHDFS åœ¨ EMR ä¸Šï¼‰ã€‚ä¸ºäº†å­˜æ•°æ®ï¼ŒEMR å¿…é¡» 24/7 å¼€ç€ï¼Œå³ä½¿åªæœ‰ 5 å°æ—¶åœ¨è·‘æŸ¥è¯¢ã€‚
    * åº”è¯¥æŠŠæ•°æ®ç§»åˆ° **Amazon S3**ã€‚S3 å­˜å‚¨ä¾¿å®œä¸”æŒä¹…ã€‚
* **è®¡ç®—å±‚ï¼š**
    * **Athena (Serverless Presto):** Athena åº•å±‚å°±æ˜¯ Prestoã€‚å®ƒæŒ‰æŸ¥è¯¢æ•°æ®é‡æ”¶è´¹ï¼Œæ²¡æœ‰é—²ç½®æˆæœ¬ã€‚å¯¹äºæ¯å¤©åªè·‘å‡ å°æ—¶çš„æŸ¥è¯¢ï¼ŒAthena æ˜¯æœ€çœé’±çš„ï¼ˆPay-per-queryï¼‰ã€‚ä¸”ä¸éœ€è¦ç»´æŠ¤ EMR é›†ç¾¤ã€‚
    * **EMR on S3 (Transient):** ä¹Ÿå¯ä»¥ï¼Œä½†æ¯æ¬¡è¦å¯åŠ¨é›†ç¾¤ï¼Œè€Œä¸” Athena æ›´ Serverlessã€‚
    * **Redshift (A/D):** Redshift æˆæœ¬æ¯” Athena é«˜ï¼ˆéœ€è¦é¢„ç½®èŠ‚ç‚¹ï¼Œå³ä½¿æ˜¯ RA3 ä¹Ÿæœ‰é—²ç½®è´¹ï¼Œæˆ–è€… Serverless ä¹Ÿæœ‰åº•ä»·ï¼‰ã€‚
* **é€‰é¡¹ B:** Data in **S3**, Query with **Glue Data Catalog & Athena**ã€‚è¿™æ˜¯æ ‡å‡†çš„æ•°æ®æ¹–æŸ¥è¯¢æ¶æ„ï¼Œæè‡´æˆæœ¬æ•ˆç›Šã€‚
* **é”å®š Bã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B)**
* **S3:** ä½æˆæœ¬å­˜å‚¨ã€‚
* **Athena:** Serverless æŸ¥è¯¢ï¼Œæ— é—²ç½®æˆæœ¬ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** ä» EMR/HDFS è¿ç§»åˆ° S3 æ•°æ®æ¹– (Athena) çš„æˆæœ¬ä¼˜åŠ¿ã€‚

---

#### ğŸ“ [282/529] å¼ºåˆ¶æ ‡ç­¾ç­–ç•¥ (SCP)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **ç—›ç‚¹ï¼š** æˆæœ¬ä¸å¯è§ï¼Œç¼ºä¹ä¸€è‡´æ ‡ç­¾ã€‚
* **éœ€æ±‚ï¼š** Ensure **ALL existing and future** resources have Cost Center & Project ID tagsã€‚
* **ç¯å¢ƒï¼š** Organizationsã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **ç°æœ‰èµ„æº (Existing):**
    * **Tag Editor:** ç”¨äºæ‰¹é‡ä¿®æ”¹ç°æœ‰èµ„æºçš„æ ‡ç­¾ã€‚
    * **AWS Config:** ç”¨äºæŒç»­æ£€æµ‹ä¸åˆè§„èµ„æºï¼ˆæœªæ ‡è®°ï¼‰å¹¶æŠ¥è­¦/ä¿®å¤ã€‚
* **æœªæ¥èµ„æº (Future):**
    * **SCP (Service Control Policy):** å¯ä»¥å¼ºåˆ¶è¦æ±‚â€œåˆ›å»ºèµ„æºæ—¶å¿…é¡»å¸¦ç‰¹å®šæ ‡ç­¾â€ã€‚å¦‚æœä¸å¸¦ï¼Œæ‹’ç»åˆ›å»º (`Deny` `RunInstances` without `RequestTag`).
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * é€‰é¡¹ A (Tag Editor): åªè§£å†³äº†ç°æœ‰ï¼Œæ²¡å¼ºåˆ¶æœªæ¥ã€‚
    * é€‰é¡¹ B (Config + Lambda): æ˜¯äº‹åä¿®å¤ï¼ˆReactiveï¼‰ï¼Œä¸æ˜¯äº‹å‰å¼ºåˆ¶ï¼ˆProactiveï¼‰ã€‚
    * é€‰é¡¹ D (IAM Role): æ›´æ–°æ‰€æœ‰è§’è‰²å¤ªéº»çƒ¦ã€‚
    * **é€‰é¡¹ C:**
        * Use **Tag Editor** for existing.
        * Use **SCP** to restrict resource creation (Future enforcement).
        * è¿™æ¶µç›–äº†å­˜é‡å’Œå¢é‡ï¼Œä¸”æ‰‹æ®µæœ€å¼ºç¡¬ï¼ˆSCPï¼‰ã€‚
    * **é”å®š Cã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ C)**
* **Tag Editor:** å¤„ç†å­˜é‡ã€‚
* **SCP:** å¼ºåˆ¶å¢é‡ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** æ ‡ç­¾æ²»ç†çš„å…¨é¢ç­–ç•¥ (SCP + Tag Editor)ã€‚

---

#### ğŸ“ [283/529] è·¨è´¦æˆ· S3 ç§æœ‰ä¸Šä¼  (VPC Peering vs PrivateLink)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **åœºæ™¯ï¼š** On-prem $\rightarrow$ S3 (3 different accounts)ã€‚
* **è¿æ¥ï¼š** **No existing dedicated connection** (æ²¡ä¸“çº¿)ã€‚
* **éœ€æ±‚ï¼š** **Privately** (ç§ç½‘)ï¼ŒNot over Internetã€‚
* **é€‰æ‹©ï¼š** 2 ä¸ªæ­¥éª¤ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **è¿æ¥å»ºç«‹ï¼š**
    * æ—¢ç„¶æ²¡ä¸“çº¿ï¼Œè¦ç§ç½‘ä¼ æ•°æ®ï¼Œå¿…é¡»å…ˆå»º **Direct Connect (DX)** æˆ– **VPN**ã€‚
    * é¢˜ç›®é€‰é¡¹ A/B æåˆ°äº† "Set up AWS Direct Connect"ã€‚è™½ç„¶é¢˜ç›®è¯´â€œNo existingâ€ï¼Œä½†è¿™å¯èƒ½æ˜¯è§£å†³æ–¹æ¡ˆçš„ä¸€éƒ¨åˆ†ï¼ˆå»ºç«‹è¿æ¥ï¼‰ã€‚
    * ç§æœ‰ä¼ è¾“ S3ï¼Œé€šå¸¸æ¨è **Direct Connect + Public VIF** (ä½†è¿™æ˜¯å…¬ç½‘è·¯ç”±ï¼Œåªæ˜¯ä¸“ç”¨çº¿è·¯) æˆ–è€… **Direct Connect + Private VIF + VPC Endpoint**ã€‚
    * é¢˜ç›®è¦æ±‚ "Send data privately, NOT over internet"ã€‚DX Public VIF çš„æµé‡è™½ç„¶èµ°ä¸“çº¿ï¼Œä½†ç”¨çš„æ˜¯å…¬ç½‘ IPã€‚æ›´ä¸¥æ ¼çš„â€œç§æœ‰â€é€šå¸¸æŒ‡ **Interface VPC Endpoint (PrivateLink)**ï¼Œå®ƒä½¿ç”¨ VPC ç§æœ‰ IPã€‚
* **æ¶æ„è®¾è®¡ï¼š**
    1.  å»ºç«‹ **Network Account** å’Œ **Private VPC**ã€‚è®¾ç½® DX (Private VIF)ã€‚ $\rightarrow$ **é€‰ä¸­ A**ã€‚
        * (B æ˜¯ Public VIFï¼Œè™½ç„¶ä¹Ÿè¡Œï¼Œä½† A çš„ Private VIF é…åˆ Endpoint æ›´ç¬¦åˆ "Privately" çš„è¯­å¢ƒ)ã€‚
    2.  åœ¨ Network Account VPC ä¸­åˆ›å»º **S3 Interface Endpoint** (C) æˆ– **Gateway Endpoint** (D)ã€‚
        * **Gateway Endpoint:** ä¸æ”¯æŒä» On-prem é€šè¿‡ DX/VPN ç›´æ¥è®¿é—®ï¼ˆè·¯ç”±è¡¨é™åˆ¶ï¼‰ã€‚
        * **Interface Endpoint:** æ”¯æŒä» On-prem è®¿é—®ã€‚
        * $\rightarrow$ **é€‰ä¸­ C**ã€‚
* **è·¨è´¦æˆ· S3ï¼š**
    * Interface Endpoint å¯ä»¥è®¿é—®ä»»ä½•è´¦æˆ·çš„ S3 æ¡¶ï¼ˆåªè¦ Endpoint Policy å’Œ Bucket Policy å…è®¸ï¼‰ã€‚æ‰€ä»¥åªéœ€åœ¨ä¸€ä¸ªç½‘ç»œè´¦æˆ·å»º Endpoint å³å¯ã€‚
* **é”å®š A, Cã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ A, C)**
* **DX Private VIF:** å»ºç«‹ç§ç½‘é€šé“ã€‚
* **S3 Interface Endpoint:** å…è®¸ä» On-prem é€šè¿‡ç§ç½‘ IP è®¿é—® S3ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** æœ¬åœ°é€šè¿‡ DX/VPN ç§ç½‘è®¿é—® S3 çš„æ ‡å‡†æ¶æ„ (Interface Endpoint)ã€‚

---

#### ğŸ“ [284/529] DynamoDB å‘¨æœŸæ€§é«˜å³°ä¼˜åŒ– (Reserved Capacity)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **æ¨¡å¼ï¼š** æ¯å¤© 4 å°æ—¶é«˜å³°ï¼Œå…¶ä½™æ—¶é—´ä½ã€‚
* **ç°çŠ¶ï¼š** Provisioned (100k RCU / 80k WCU) è¦†ç›–é«˜å³°ã€‚
* **ç—›ç‚¹ï¼š** æˆæœ¬é«˜ã€‚
* **ç›®æ ‡ï¼š** Reduce cost, **Minimize operational overhead**ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **Auto Scaling (C):** å¯ä»¥è‡ªåŠ¨è°ƒæ•´ã€‚ä½†æ˜¯å¯¹äºæå…¶å‰§çƒˆçš„é«˜å³°ï¼ˆ100k RCUï¼‰ï¼ŒAuto Scaling å¯èƒ½æœ‰æ»åã€‚ä¸è¿‡é€šå¸¸æ˜¯é¦–é€‰ã€‚
* **Reserved Capacity (D):**
    * DynamoDB é¢„ç•™å®¹é‡æ˜¯**å…¨å¤©å€™**ç”Ÿæ•ˆçš„ï¼ˆä¹°äº† 100kï¼Œå°±æ˜¯ 24h çš„ 100kï¼‰ã€‚
    * å¦‚æœåªåœ¨é«˜å³° 4 å°æ—¶ç”¨ 100kï¼Œå‰©ä¸‹ 20 å°æ—¶é—²ç½®ã€‚ä¹°å…¨å¤© 100k çš„é¢„ç•™å®¹é‡**éå¸¸äº**ï¼ˆé™¤éé—²ç½®æ—¶é—´åˆ©ç”¨ç‡ä¹Ÿé«˜ï¼Œæˆ–è€…æŠ˜æ‰£å·¨å¤§ï¼‰ã€‚
    * **ä½†æ˜¯ï¼Œ** é¢˜ç›®ç›®å‰çš„é…ç½®æ˜¯ "Provisioned... to meet peak"ã€‚ä¹Ÿå°±æ˜¯ç°åœ¨å°±æ˜¯ 24 å°æ—¶å¼€ç€ 100kã€‚
    * å¦‚æœä¸æƒ³æ”¹æ¶æ„ï¼ˆMinimize overheadï¼‰ï¼Œä¹° Reserved Capacity ç¡®å®èƒ½ç›´æ¥æ‰“æŠ˜ã€‚
    * **ç„¶è€Œï¼Œ** æ›´å¥½çš„åšæ³•æ˜¯ **Auto Scaling**ã€‚è®©å®ƒåœ¨éé«˜å³°æœŸé™ä¸‹æ¥ã€‚
    * **æ¯”è¾ƒ C å’Œ D:**
        * C (Auto Scaling): èŠ‚çœ 20 å°æ—¶çš„è´¹ç”¨ï¼ˆé™åˆ°ä½æ°´ä½ï¼‰ã€‚è¿™æ¯” D (ä¹°å…¨å¤©æŠ˜æ‰£) çœå¾—å¤šã€‚ä¸” DynamoDB Auto Scaling æ˜¯å†…ç½®åŠŸèƒ½ï¼ŒOverhead å¾ˆå°ã€‚
        * **ä½†æ˜¯ï¼Œ** æœ‰æ—¶å€™é¢˜ç›®ä¼šæš—ç¤º "Standard pattern"ï¼Œå¦‚æœ Reserved Capacity èƒ½è¦†ç›–é«˜å³°ï¼Œå®ƒæ˜¯æœ€ç®€å•çš„â€œè´¢åŠ¡æ‰‹æ®µâ€ã€‚ä½†æŠ€æœ¯ä¸Š Auto Scaling æ›´ä¼˜ã€‚
    * **å†çœ‹ B (On-Demand):** å¯¹äºæ¯å¤© 4 å°æ—¶çš„è§„å¾‹é«˜å³°ï¼ŒOn-Demand é€šå¸¸æ¯” Provisioned + ASG è´µã€‚
    * **å…³é”®ç‚¹ï¼š** "Minimize operational overhead"ã€‚Auto Scaling æ˜¯ä¸€æ¬¡æ€§é…ç½®ã€‚
    * **è¿˜æœ‰ä¸€ä¸ªå› ç´ ï¼š** 100k RCU å¾ˆå¤§ã€‚Auto Scaling é¢„çƒ­å¯èƒ½è·Ÿä¸ä¸Šï¼Ÿå¦‚æœæ¨¡å¼æ˜¯ "Predictable" (å¯é¢„æµ‹)ï¼Œå¯ä»¥ä½¿ç”¨ **Scheduled Scaling** (é¢„å®šæ‰©å±•)ã€‚é€‰é¡¹ C åªæ˜¯è¯´ "Enable Auto Scaling"ã€‚
    * **è®©æˆ‘ä»¬ç®—ç¬”è´¦ï¼š**
        * ç°çŠ¶ï¼š24h * 100kã€‚
        * æ–¹æ¡ˆ C: 4h * 100k + 20h * 1kã€‚èŠ‚çœçº¦ 80%ã€‚
        * æ–¹æ¡ˆ D: 24h * 100k * (æŠ˜æ‰£ï¼Œæ¯”å¦‚ 50%)ã€‚èŠ‚çœ 50%ã€‚
        * æ˜¾ç„¶ C æ›´çœã€‚
    * **ç»“è®ºï¼š** é™¤éé¢˜ç›®æš—ç¤º Auto Scaling ä¸é€‚ç”¨ï¼ˆå¦‚æé€Ÿçªå‘ï¼‰ï¼Œå¦åˆ™å¯¹äºå¯é¢„æµ‹çš„å‘¨æœŸè´Ÿè½½ï¼ŒAuto Scaling (æˆ–è€… Scheduled Scaling) æ˜¯æ­£è§£ã€‚é€‰é¡¹ C æœ€åˆç†ã€‚
    * **ä¿®æ­£ï¼š** é¢˜ç›®é—® "Most cost-effective"ã€‚C è‚¯å®šæ¯” D çœã€‚
    * **é”å®š Cã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ C)**
* **DynamoDB Auto Scaling:** è‡ªåŠ¨é€‚åº”è´Ÿè½½å˜åŒ–ï¼Œæ¶ˆé™¤é—²ç½®æµªè´¹ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** DynamoDB å‘¨æœŸæ€§è´Ÿè½½çš„æˆæœ¬ä¼˜åŒ–ã€‚

---

#### ğŸ“ [285/529] å®æ—¶è¯„è®ºç³»ç»Ÿ (AppSync)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **åœºæ™¯ï¼š** åšå®¢è¯„è®ºã€‚
* **éœ€æ±‚ï¼š** **Comments appear in real-time** (å®æ—¶æ˜¾ç¤º)ã€‚
* **ç°çŠ¶ï¼š** API Gateway (REST)ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **å®æ—¶æ¨é€æŠ€æœ¯ï¼š**
    * **WebSockets:** å…è®¸æœåŠ¡å™¨ä¸»åŠ¨æ¨æ•°æ®ç»™å®¢æˆ·ç«¯ã€‚
    * **AWS AppSync (C):** æ‰˜ç®¡çš„ GraphQL æœåŠ¡ï¼ŒåŸç”Ÿæ”¯æŒ **Subscriptions** (åŸºäº WebSockets)ã€‚å®¢æˆ·ç«¯è®¢é˜…è¯„è®ºæ›´æ–°ï¼Œä¸€æ—¦æœ‰æ–°è¯„è®ºï¼ŒAppSync è‡ªåŠ¨æ¨é€ã€‚è¿™æ˜¯å®ç°â€œå®æ—¶è¯„è®ºâ€çš„æœ€ç°ä»£ã€æœ€ç®€å•çš„ AWS æ–¹æ¡ˆã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * é€‰é¡¹ A (CloudFront Cache): ç¼“å­˜ä¼šå¯¼è‡´çœ‹åˆ°æ—§æ•°æ®ï¼Œåå®æ—¶ã€‚
    * é€‰é¡¹ B (Polling): è½®è¯¢ï¼ˆæ¯ 10 ç§’ï¼‰å»¶è¿Ÿé«˜ï¼Œä¸”æœåŠ¡å™¨å‹åŠ›å¤§ï¼Œä¸æ˜¯â€œå®æ—¶â€ã€‚
    * é€‰é¡¹ D (Lambda Concurrency): æ— å…³ã€‚
    * **é”å®š Cã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ C)**
* **AppSync GraphQL Subscriptions:** è½»æ¾å®ç°å®æ—¶æ•°æ®æ¨é€ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** å®æ—¶åº”ç”¨æ¶æ„ (AppSync vs Polling)ã€‚

---

#### ğŸ“ [286/529] å¼ºåˆ¶ S3 Access Point ç½‘ç»œæ¥æº (SCP)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **éœ€æ±‚ï¼š** Allow Product Teams to create Access Points, BUT only **VPC-restricted** ones (åªèƒ½åˆ›å»ºé™åˆ¶åœ¨ VPC å†…çš„ AP).
* **ç¦æ­¢ï¼š** Internet-accessible Access Pointsã€‚
* **ç®¡ç†ï¼š** Hundreds of accounts (Organizations)ã€‚
* **ç›®æ ‡ï¼š** **Most operationally efficient** (æœ€é«˜æ•ˆ)ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **å…¨å±€å¼ºåˆ¶ï¼š**
    * è¦åœ¨å‡ ç™¾ä¸ªè´¦æˆ·é‡Œå¼ºåˆ¶ä¸€ä¸ªè§„åˆ™ï¼Œ**SCP (Service Control Policy)** æ˜¯æœ€ä½³å·¥å…·ã€‚
    * **SCP é€»è¾‘ï¼š** **Deny** `s3:CreateAccessPoint` **Unless** `s3:AccessPointNetworkOrigin` == `VPC`ã€‚
    * è¿™æ ·ï¼Œä»»ä½•äººå°è¯•åˆ›å»ºâ€œInternetâ€ç±»å‹çš„ AP éƒ½ä¼šè¢«æ‹’ç»ã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * é€‰é¡¹ A/D (Resource/Bucket Policy): éœ€è¦åœ¨æ¯ä¸ª AP æˆ– Bucket ä¸Šé…ï¼Œæ— æ³•â€œé¢„é˜²â€åˆ›å»ºï¼ˆè™½ç„¶ Bucket Policy å¯ä»¥æ‹’ç»é VPC è®¿é—®ï¼Œä½†é¢˜ç›®æ˜¯é™åˆ¶â€œåˆ›å»º Access Pointâ€è¿™ä¸ªåŠ¨ä½œæœ¬èº«çš„å±æ€§ï¼‰ã€‚
    * é€‰é¡¹ C (StackSets IAM Policy): ç»™æ¯ä¸ªç”¨æˆ·/è§’è‰²å‘ Policyï¼Ÿç®¡ç†å¤ªä¹±ï¼Œä¸”å®¹æ˜“è¢«ç»•è¿‡ã€‚
    * **é€‰é¡¹ B:** **SCP at Root level**ã€‚ä¸€é”®ç”Ÿæ•ˆï¼Œè¦†ç›–å…¨å‘˜ã€‚
    * **é”å®š Bã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B)**
* **SCP:** ç»„ç»‡çº§é¢„é˜²æ€§æ§åˆ¶ã€‚
* **Condition Key:** `s3:AccessPointNetworkOrigin` åŒºåˆ† VPC å’Œ Internet APã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** S3 Access Point ç±»å‹çš„åˆè§„æ§åˆ¶ (SCP)ã€‚

---

#### ğŸ“ [287/529] Elastic Beanstalk è“ç»¿éƒ¨ç½²åˆ‡æ¢ (Swap URLs)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **åœºæ™¯ï¼š** Elastic Beanstalk (EB) è“ç»¿éƒ¨ç½²ã€‚
* **ç°çŠ¶ï¼š** å·²åˆ›å»ºæ–°ç¯å¢ƒ (Green) å¹¶éƒ¨ç½²äº†æ–°ä»£ç ã€‚
* **ä¸‹ä¸€æ­¥ï¼š** Cutover (åˆ‡æ¢æµé‡)ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **EB åŸç”ŸåŠŸèƒ½ï¼š** **Swap Environment URLs** (äº¤æ¢ç¯å¢ƒ URL)ã€‚
    * å®ƒä¼šè‡ªåŠ¨äº¤æ¢ä¸¤ä¸ªç¯å¢ƒçš„ CNAME è®°å½•ã€‚
    * ç¬é—´å°†æµé‡ä» Blue åˆ‡åˆ° Greenã€‚
    * è¿™æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼ŒDNS ä¼ æ’­æå¿«ï¼ˆå› ä¸ºæ˜¯ AWS å†…éƒ¨ DNS åˆ«ååˆ‡æ¢ï¼‰ã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * é€‰é¡¹ A (Route 53 Redirect): ä¸éœ€è¦æ‰‹åŠ¨é… R53ï¼ŒEB Swap URL æ›´å¥½ç”¨ã€‚
    * é€‰é¡¹ C (Replace Launch Config): è¿™æ˜¯åŸåœ°æ›´æ–°ï¼Œä¸æ˜¯è“ç»¿ã€‚
    * é€‰é¡¹ D (Update DNS): æ‰‹åŠ¨æ”¹ DNS å¤ªæ…¢ä¸”æ˜“é”™ï¼ŒSwap URL æ˜¯ EB æä¾›çš„æ ‡å‡†æŒ‰é’®ã€‚
    * **é”å®š Bã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B)**
* **Swap Environment URLs:** Elastic Beanstalk å®ç°é›¶åœæœºè“ç»¿éƒ¨ç½²çš„æ ¸å¿ƒåŠŸèƒ½ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** Elastic Beanstalk è“ç»¿éƒ¨ç½²æ“ä½œã€‚

---

#### ğŸ“ [288/529] å›¾åƒå¤„ç†æ¶æ„ (S3 + SQS + ASG)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **åœºæ™¯ï¼š** ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ï¼ŒåŠ æ–‡å­—ï¼Œå‘å¸ƒã€‚
* **æµé‡ï¼š** 10,000 concurrent uploads (é«˜å³°)ã€‚
* **å¤„ç†ï¼š** å åŠ æ–‡å­— (CPU å¯†é›†)ã€‚
* **æ¶æ„ï¼š** è§£è€¦ã€æŠ—å‹ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **æ‘„å–å±‚ï¼š** ç›´æ¥ä¸Šä¼ åˆ° **S3** (B/C)ã€‚EFS (A) æˆ– EBS (D) éœ€è¦ EC2 ä½œä¸ºå‰ç«¯æ¥æ”¶ï¼Œ10000 å¹¶å‘éœ€è¦å·¨å¤§çš„ EC2 é›†ç¾¤ï¼Œä¸åˆ’ç®—ä¸”éš¾ç»´æŠ¤ã€‚S3 å¯ä»¥æ— é™ååã€‚
* **è§£è€¦å±‚ï¼š**
    * S3 Event -> **SQS** (C) æˆ– **SNS** (B)ã€‚
    * SQS æ˜¯ç¼“å†²é˜Ÿåˆ—ï¼Œé€‚åˆå‰Šå³°å¡«è°·ã€‚EC2 Worker ä» SQS æ‹‰å–ä»»åŠ¡ã€‚
    * SNS æ˜¯æ¨é€ï¼Œå¦‚æœå¹¶å‘å¤§ï¼Œä¼šå‹å® EC2ï¼ˆé™¤é EC2 å¾ˆå¤šï¼Œæˆ–è€… SNS å†æ¨ç»™ SQSï¼‰ã€‚ç›´æ¥ç”¨ SQS æ›´ç¨³ã€‚
* **å¤„ç†å±‚ï¼š**
    * EC2 ASG æ ¹æ® **Queue Depth** (é˜Ÿåˆ—æ·±åº¦) æ‰©å±•ã€‚è¿™æ˜¯æ ‡å‡†æ¨¡å¼ã€‚
* **ç»“æœå­˜å‚¨ï¼š**
    * å¤„ç†å®Œå­˜å› S3 (C)ã€‚
    * EFS (B) ä¹Ÿå¯ä»¥ï¼Œä½† S3 ä¹Ÿæ˜¯ web hosting çš„å¥½åœ°æ–¹ã€‚
* **B vs C:**
    * C (SQS) æä¾›äº†æ›´å¥½çš„æµé‡æ§åˆ¶å’Œç¼“å†²ã€‚B (SNS) æ˜¯æ¨æ¨¡å¼ï¼Œå¯¹äºåç«¯å¤„ç†èƒ½åŠ›æœ‰é™çš„åœºæ™¯ï¼ˆEC2 ASG éœ€è¦æ—¶é—´å¯åŠ¨ï¼‰ï¼ŒSNS å¯èƒ½ä¼šå¯¼è‡´è¯·æ±‚ä¸¢å¤±æˆ–é‡è¯•é£æš´ï¼ˆé™¤é SNS -> SQSï¼‰ã€‚
    * ä¸” C é€‰é¡¹æè¿°äº† "S3 Event -> SQS -> EC2 -> S3"ï¼Œè¿™æ˜¯ç»å…¸çš„**æ‰‡å…¥ (Fan-in)** å¤„ç†æ¶æ„ã€‚
    * **é”å®š Cã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ C)**
* **S3 Direct Upload:** å¸è½½ä¸Šä¼ å‹åŠ›ã€‚
* **SQS:** å¼‚æ­¥ç¼“å†²ï¼Œä¿æŠ¤åç«¯ã€‚
* **Auto Scaling:** æŒ‰éœ€è®¡ç®—ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** é«˜å¹¶å‘å›¾åƒå¤„ç†çš„ Serverless/å¼‚æ­¥æ¶æ„ã€‚

---

#### ğŸ“ [289/529] è·¨å¤§è¥¿æ´‹åŒæ´»æ•°æ®åº“ (Aurora Global Write Forwarding)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **ç°çŠ¶ï¼š** RDS MySQL (us-east-1)ã€‚
* **éœ€æ±‚ï¼š**
    1.  Make data available to Europe (æ¬§æ´²å¯ç”¨)ã€‚
    2.  **Low latency** for both US and Europe (åŒè¾¹ä½å»¶è¿Ÿ)ã€‚
    3.  **Both need to WRITE** (åŒè¾¹å†™å…¥)ã€‚
    4.  **See updates in real-time** (å®æ—¶åŒæ­¥)ã€‚
* **æ¶æ„ï¼š** Active-Active Databaseã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **Aurora Global Database:**
    * æ”¯æŒ **Write Forwarding** (å†™å…¥è½¬å‘)ã€‚
    * ä»åŒºåŸŸï¼ˆæ¬§æ´²ï¼‰çš„å‰¯æœ¬å¯ä»¥ç›´æ¥æ¥å—å†™è¯·æ±‚ï¼Œå¹¶è‡ªåŠ¨è½¬å‘ç»™ä¸»åŒºåŸŸï¼ˆç¾å›½ï¼‰çš„ä¸»èŠ‚ç‚¹ã€‚
    * è¿™ç§æ–¹å¼è®©æ¬§æ´²åº”ç”¨æ„Ÿè§‰åƒæ˜¯â€œæœ¬åœ°å†™å…¥â€ï¼Œè™½ç„¶ç‰©ç†ä¸Šè¿˜æ˜¯å†™å›ç¾å›½ï¼Œä½†åº”ç”¨é€»è¾‘ç®€åŒ–äº†ï¼Œä¸”è¯»æ˜¯æœ¬åœ°çš„ï¼ˆä½å»¶è¿Ÿï¼‰ã€‚
    * ç›¸æ¯”äºå¤šä¸»ï¼ˆMulti-Masterï¼Œä»…é™åŒåŒºåŸŸï¼‰ï¼ŒWrite Forwarding æ˜¯è·¨åŒºåŸŸå®ç°â€œä¼ªåŒæ´»å†™å…¥â€çš„æœ€ä½³æ–¹æ¡ˆã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * é€‰é¡¹ B (RDS RR Write back?): RDS Read Replica æ˜¯åªè¯»çš„ï¼Œä¸æ”¯æŒâ€œå†™å›â€ã€‚å¿…é¡»åº”ç”¨å±‚è‡ªå·±æ‹†åˆ†è¯»å†™ã€‚
    * é€‰é¡¹ C (MySQL Logic Replication): è¿ç»´æå…¶å¤æ‚ï¼Œå†²çªè§£å†³éš¾ã€‚
    * é€‰é¡¹ A vs D:
        * A: åˆ›å»º Aurora Replica -> Promote -> Add Regionã€‚è¿™æ˜¯**è¿ç§»**åˆ° Aurora Global çš„æ­£ç¡®æ­¥éª¤ï¼ˆä» RDS å¿«ç…§æˆ–å‰¯æœ¬è¿ç§»ï¼‰ã€‚
        * D: "Convert RDS to Aurora"ã€‚RDS æ§åˆ¶å°ç¡®å®æœ‰ "Create Aurora Read Replica" çš„åŠŸèƒ½ï¼ˆA çš„å‰åŠéƒ¨åˆ†ï¼‰ã€‚
        * å…³é”®æ˜¯ **Write Forwarding**ã€‚
        * A å’Œ D éƒ½æåˆ°äº† Write Forwardingã€‚
        * åŒºåˆ«åœ¨äºè¿ç§»è¿‡ç¨‹ã€‚
        * **A çš„æµç¨‹ï¼š** Create Aurora Replica from RDS -> Promote -> Add Regionã€‚è¿™æ˜¯å°† RDS æ•°æ®è¿ç§»åˆ° Aurora Global çš„**é›¶åœæœº/ä½åœæœº**æ ‡å‡†è·¯å¾„ã€‚
        * **D çš„æµç¨‹ï¼š** "Convert RDS... to Aurora"ã€‚ç›´æ¥è½¬æ¢ï¼Ÿé€šå¸¸æ˜¯é€šè¿‡å¿«ç…§æ¢å¤æˆ–åˆ›å»ºå‰¯æœ¬æå‡ã€‚A çš„æè¿°æ›´å…·æ“ä½œæ€§ç»†èŠ‚ã€‚
        * **æ›´æ­£ï¼š** RDS æ§åˆ¶å°ç°åœ¨æ”¯æŒ "Migrate to Aurora" (Snapshot based) æˆ– "Create Aurora Read Replica" (Replication based)ã€‚A é€‰é¡¹ä½¿ç”¨çš„æ˜¯åŸºäºå¤åˆ¶çš„æ–¹æ³•ï¼Œåœæœºæ—¶é—´æœ€çŸ­ã€‚
        * **ç»“è®ºï¼š** A é€‰é¡¹æè¿°äº†ä¸€ä¸ªå®Œæ•´çš„ã€ä½é£é™©çš„è¿ç§»å’Œæ¶æ„æ­å»ºè¿‡ç¨‹ã€‚
    * **é”å®š Aã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ A)**
* **Aurora Global Database:** è§£å†³è·¨åŒºåŸŸè¯»ã€‚
* **Write Forwarding:** è§£å†³è·¨åŒºåŸŸå†™ï¼ˆç®€åŒ–åº”ç”¨ï¼‰ã€‚
* **Migration via Replica:** æœ€å°åŒ–è¿ç§»åœæœºæ—¶é—´ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** RDS åˆ° Aurora Global Database çš„è¿ç§»ä¸åŒå‘è¯»å†™èƒ½åŠ›ã€‚

---

#### ğŸ“ [290/529] SFTP å›ºå®š IP è¿ç§» (Transfer Family)

*(æ³¨ï¼šè¿™é¢˜ä¸ Q249 ç±»ä¼¼ï¼Œä½†ä¾§é‡ä¸åŒ)*

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **ç°çŠ¶ï¼š** EC2 SFTP, **Elastic IP (EIP)**, Security Group (Allow List)ã€‚
* **éœ€æ±‚ï¼š**
    1.  Improve availability (æé«˜å¯ç”¨æ€§)ã€‚
    2.  Minimize management (å‡å°‘ç®¡ç†)ã€‚
    3.  **Do not change connection method** (å®¢æˆ·è¿æ¥æ–¹å¼ä¸å˜ -> **Must keep EIP**)ã€‚
* **è¿ç§»ï¼š** EC2 -> ?

**2. âš¡ ç§’æ€æ€è·¯**
* **æœåŠ¡ï¼š** **AWS Transfer Family**ã€‚
* **IP ä¿ç•™ï¼š**
    * Transfer Family æ”¯æŒ **VPC Endpoint** (Internet facing) ç±»å‹ï¼Œå¹¶ä¸”å¯ä»¥**å…³è”ç°æœ‰çš„ EIP**ã€‚
    * è¿™æ ·å®¢æˆ·ä¸éœ€è¦æ”¹ IPï¼Œç›´æ¥è¿æ—§çš„ EIP å°±èƒ½è¿åˆ°æ–°çš„ Transfer Familyã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * é€‰é¡¹ A (Public endpoint): Public Endpoint ç±»å‹æ˜¯ AWS æ‰˜ç®¡ IPï¼Œ**ä¸æ”¯æŒ** ç»‘å®šè‡ªå·±çš„ EIPã€‚å¿…é¡»ç”¨ **VPC Endpoint** ç±»å‹æ‰èƒ½ç»‘ EIPã€‚
    * é€‰é¡¹ B: "VPC hosted internet facing endpoint... Associate EIP... Attach Security Group"ã€‚è¿™å®Œç¾å¤åˆ»äº† EC2 çš„ç½‘ç»œç¯å¢ƒï¼ˆEIP + SGï¼‰ï¼Œä¸”è¿ç§»åˆ°äº†æ‰˜ç®¡æœåŠ¡ã€‚
    * é€‰é¡¹ C (EFS + Fargate + NLB): æ¶æ„å¤ªå¤æ‚ï¼Œè™½ç„¶ä¹Ÿèƒ½ç»‘ EIPï¼ˆåœ¨ NLB ä¸Šï¼‰ï¼Œä½† Transfer Family æ˜¯å¼€ç®±å³ç”¨çš„ SFTP æœåŠ¡ï¼ŒFargate è¿˜è¦è‡ªå·±ç»´æŠ¤ SFTP å®¹å™¨ã€‚
    * é€‰é¡¹ D (EBS Multi-Attach): å¤æ‚ä¸”éæ‰˜ç®¡ã€‚
* **é”å®š Bã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B)**
* **Transfer Family (VPC Endpoint):** æ”¯æŒç»‘å®š EIP å’Œå®‰å…¨ç»„ï¼Œå®ç°æ— ç¼è¿ç§»ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** ä¿ç•™ EIP çš„ SFTP è¿ç§»é…ç½®ç»†èŠ‚ã€‚

---
**å°ç»“ï¼š**
è¿™ç»„é¢˜ç›®çš„ **Aurora Write Forwarding**ã€**S3 Access Points**ã€**Transfer Family VPC Endpoint** éƒ½æ˜¯ SAP è¿›é˜¶è€ƒç‚¹ã€‚

**æ­å–œä½ ï¼Œ290 é¢˜ï¼**