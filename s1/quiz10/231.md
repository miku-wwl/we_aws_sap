è¿™ 10 é“é¢˜ç›®æ¶µç›–äº† **FSx for Windows å¤šå¯ç”¨åŒºéƒ¨ç½²**ã€**æ··åˆäº‘å¤šåŒºåŸŸç½‘ç»œæ¶æ„ (DXGW+TGW)**ã€**è·¨è´¦æˆ· IAM æˆæƒ**ã€**AWS Elastic Disaster Recovery (DRS) ä¸æ•°æ®åŒæ­¥**ã€**HPC é›†ç¾¤ä¼˜åŒ– (FSx for Lustre + EFA)**ã€**æ ‡ç­¾ç­–ç•¥æ²»ç†**ã€**IoT ç°ä»£åŒ–è¿ç§» (IoT Core)**ã€**AWS Backup è·¨åŒºåŸŸå¤åˆ¶**ã€**å¤§æ•°æ®å®æ—¶æ‘„å– (Kinesis + EMR)**ã€**DynamoDB Global Tables ç¾å¤‡**ã€‚

ç‰¹åˆ«æ˜¯ **Q234 (DRS + DataSync)** å’Œ **Q235 (HPC Optimization)** æ˜¯ SAP è€ƒè¯•ä¸­çš„é«˜æ€§èƒ½ä¸ç¾å¤‡æ ¸å¿ƒè€ƒç‚¹ã€‚

è®©æˆ‘ä»¬å¼€å¯ **é€é¢˜ç§’æ€æ¨¡å¼**ï¼

---

#### ğŸ“ [231/529] æœ¬åœ° SQL Server å¤‡ä»½åˆ°äº‘ (FSx vs Gateway)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **æºç«¯ï¼š** æœ¬åœ° SQL Serverã€‚
* **æ•°æ®ï¼š** 200 GB/night Export (æ¯æ—¥å¯¼å‡º)ã€‚
* **è¿æ¥ï¼š** 10 Gbps DXã€‚
* **ç›®æ ‡ï¼š** S3 (Cloud Storage)ã€‚
* **éœ€æ±‚ï¼š** **Most cost-effective** (æœ€å…·æˆæœ¬æ•ˆç›Š)ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **æ–¹æ¡ˆ A (File Gateway):**
    * æ–‡ä»¶ç½‘å…³æä¾› SMB å…±äº«ï¼Œåç«¯ç›´æ¥æ˜¯ **S3**ã€‚
    * æ•°æ®åº“å¯¼å‡ºå†™å…¥ SMB å…±äº« $\rightarrow$ è‡ªåŠ¨ä¸Šä¼ åˆ° S3ã€‚
    * **æˆæœ¬ï¼š** S3 æ ‡å‡†å­˜å‚¨è´¹ç”¨ + ç½‘å…³å®ä¾‹è´¹ç”¨ï¼ˆå¾ˆä½ï¼‰ã€‚è¿™æ˜¯æœ€ä¾¿å®œçš„é•¿æœŸå­˜å‚¨æ–¹æ¡ˆã€‚
* **æ–¹æ¡ˆ B/C (FSx for Windows):**
    * FSx æ˜¯æ‰˜ç®¡çš„æ–‡ä»¶ç³»ç»Ÿï¼Œè™½ç„¶ä¹Ÿèƒ½åš SMBï¼Œä½†ä¸»è¦æ˜¯ä¸ºäº†è¿è¡Œ Windows åº”ç”¨ã€‚
    * ç”¨ FSx å­˜å¤‡ä»½ï¼Ÿå¤ªè´µäº†ï¼FSx å­˜å‚¨å•ä»·æ¯” S3 è´µå¾ˆå¤šã€‚ä¸” FSx é€šå¸¸ç”¨äºçƒ­æ•°æ®ï¼Œä¸æ˜¯å½’æ¡£å¤‡ä»½ã€‚
* **æ–¹æ¡ˆ D (Volume Gateway):**
    * å·ç½‘å…³æä¾› iSCSI å—å­˜å‚¨ã€‚è™½ç„¶ä¹Ÿå¯ä»¥ï¼Œä½†ä¸å¦‚æ–‡ä»¶ç½‘å…³çš„ SMB å…±äº«ç›´è§‚ï¼ˆSQL Server ç›´æ¥æ”¯æŒå†™ UNC è·¯å¾„ï¼‰ã€‚ä¸”å·ç½‘å…³ä¸»è¦ç”¨äºå¿«ç…§å¤‡ä»½ï¼Œç®¡ç†èµ·æ¥æ¯”æ–‡ä»¶ç½‘å…³çš„æ–‡ä»¶çº§è®¿é—®éº»çƒ¦ã€‚
* **ç»“è®ºï¼š** A é€‰é¡¹åˆ©ç”¨ S3 ä½œä¸ºæœ€ç»ˆå­˜å‚¨ï¼Œé€šè¿‡ File Gateway æä¾› SMB æ¥å£ï¼Œå®Œç¾é€‚é… SQL Server å¤‡ä»½åœºæ™¯ï¼Œä¸” S3 æˆæœ¬æœ€ä½ã€‚
* **é”å®š Aã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ A)**
* **Storage Gateway (File Gateway):** SMB æ¥å£ + S3 åç«¯ï¼Œå¤‡ä»½å½’æ¡£çš„ç¥å™¨ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** æ··åˆäº‘å¤‡ä»½å­˜å‚¨é€‰å‹ (S3 File Gateway vs FSx)ã€‚

---

#### ğŸ“ [232/529] æ··åˆäº‘å¤šåŒºåŸŸç½‘ç»œ (DXGW + TGW)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **è¿æ¥ï¼š** On-prem $\rightarrow$ AWS (Regions)ã€‚
* **éœ€æ±‚ï¼š**
    1.  **Transitive routing** between VPCs (VPC é—´ä¼ é€’è·¯ç”±/äº’é€š)ã€‚
    2.  Reduce egress cost (é™ä½å‡ºç«™æˆæœ¬ï¼Ÿé¢˜ç›®è¯´ reduce network egress traffic costï¼Œé€šå¸¸æŒ‡æ•°æ®ä¼ è¾“è´¹)ã€‚
    3.  Increase bandwidth throughput (å¢åŠ å¸¦å®½)ã€‚
    4.  Consistent network experience (ä¸€è‡´ä½“éªŒ)ã€‚
* **æ¶æ„ï¼š** Direct Connectã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **æ ¸å¿ƒç»„ä»¶ï¼š**
    * **Transit Gateway (TGW):** å®ç° VPC é—´ä¼ é€’è·¯ç”±ï¼ˆAny-to-Anyï¼‰ã€‚æ¯ä¸ªåŒºåŸŸä¸€ä¸ª TGWã€‚
    * **Direct Connect Gateway (DXGW):** è¿æ¥æœ¬åœ° DX åˆ°å¤šä¸ªåŒºåŸŸçš„ TGWã€‚
    * **Transit VIF:** å°† DXGW è¿æ¥åˆ° DXã€‚
* **æ¶æ„æ‹“æ‰‘ï¼š**
    * On-prem $\rightarrow$ DX $\rightarrow$ Transit VIF $\rightarrow$ DXGW $\rightarrow$ TGW (Region 1) / TGW (Region 2)ã€‚
    * **VPC äº’é€šï¼š** åŒåŒºåŸŸ VPC è¿ TGW äº’é€šã€‚è·¨åŒºåŸŸ VPC å‘¢ï¼Ÿ
    * **é€‰é¡¹ B:** "Connect DXGW to TGWs in each region... Connect DXGW to all other VPCs using TGWs"ã€‚è¿™æè¿°äº† DXGW + TGW çš„æ ‡å‡†æ¶æ„ã€‚
    * **ä½†æ˜¯ï¼Œ** é¢˜ç›®è¦æ±‚ VPC ä¹‹é—´äº’é€šã€‚DXGW æ”¯æŒ TGW ä¹‹é—´çš„è·¯ç”±å—ï¼ŸDXGW **ä¸** æ”¯æŒ TGW ä¹‹é—´çš„ Hairpinningï¼ˆå³ VPC A -> TGW A -> DXGW -> TGW B -> VPC B æ˜¯ä¸é€šçš„ï¼‰ã€‚
    * **è¦å®ç°è·¨åŒºåŸŸ VPC äº’é€šï¼š** å¿…é¡»ä½¿ç”¨ **TGW Peering**ã€‚
    * è®©æˆ‘ä»¬çœ‹é€‰é¡¹ï¼š
        * A (VPN + Peering): æ€§èƒ½å·®ï¼Œç®¡ç†ä¹±ã€‚
        * C (VPN + TGW): VPN å¸¦å®½æœ‰é™ï¼Œä¸æ»¡è¶³ "Increase bandwidth"ã€‚
        * D (VPN between all VPCs): ç–¯äº†ã€‚
    * **å†çœ‹ B:** é€‰é¡¹ B æ²¡æœ‰æåˆ° TGW Peeringã€‚å®ƒè¯´ "Connect DXGW to all other VPCs using Transit Gateways"ã€‚è¿™å¯èƒ½éšå«äº† TGW è´Ÿè´£ VPC è¿æ¥ã€‚
    * **éš¾é“é¢˜ç›®åªæƒ³å®ç° On-prem åˆ° VPC çš„äº’é€šï¼Ÿ**
    * "Provide connectivity with transitive routing capabilities between VPC networks"ã€‚è¿™é€šå¸¸æŒ‡ VPC <-> VPCã€‚
    * å¦‚æœ B é€‰é¡¹æ²¡æœ‰ TGW Peeringï¼ŒVPC è·¨åŒºåŸŸæ˜¯ä¸é€šçš„ã€‚
    * **ä½†æ˜¯ï¼Œ** å¯¹æ¯” A/C/Dï¼Œåªæœ‰ B ä½¿ç”¨äº† **Direct Connect + Transit VIF + DXGW + TGW** è¿™ä¸€å¥—â€œé«˜å¸¦å®½ã€ç°ä»£åŒ–â€ç»„åˆã€‚åœ¨ SAP è€ƒè¯•ä¸­ï¼Œè¿™å¥—ç»„åˆé€šå¸¸æ˜¯æ­£ç¡®ç­”æ¡ˆçš„åŸºçŸ³ã€‚ä¹Ÿè®¸é¢˜ç›®å‡è®¾é€šè¿‡æœ¬åœ°è·¯ç”±æˆ–è€…éšå«äº† Peeringï¼Ÿæˆ–è€…é¢˜ç›®é‡ç‚¹æ˜¯ On-prem åˆ°æ‰€æœ‰ VPC çš„ä¼ é€’è·¯ç”±ï¼Ÿ
    * å®é™…ä¸Šï¼Œæœ€æ–°çš„ DXGW ç¡®å®å…è®¸ TGW å…³è”ã€‚è™½ç„¶ DXGW æœ¬èº«ä¸åš TGW-to-TGW è·¯ç”±ï¼Œä½†å®ƒæ˜¯æ··åˆäº‘è¿æ¥çš„æ ‡å‡†ã€‚
    * **è®©æˆ‘ä»¬ä»”ç»†çœ‹ B çš„æè¿°ï¼š** "Provision a transit VIF... connect to DXGW... Connect DXGW to all other VPCs using the Transit Gateways in each region". è¿™å¥è¯æè¿°äº†è¿æ¥è·¯å¾„ã€‚ç›¸æ¯”å…¶ä»–é€‰é¡¹ï¼ˆVPN, Peeringï¼‰ï¼ŒB æ˜¯å”¯ä¸€ç¬¦åˆâ€œé«˜å¸¦å®½ã€ä¸€è‡´ä½“éªŒâ€çš„ã€‚
    * **é”å®š Bã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B)**
* **DXGW + TGW:** ä¼ä¸šçº§å¤šåŒºåŸŸæ··åˆäº‘ç½‘ç»œæ ‡å‡†æ¶æ„ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** DXGW ä¸ TGW çš„ç»“åˆä½¿ç”¨ã€‚

---

#### ğŸ“ [233/529] è·¨è´¦æˆ·èµ„æºç®¡ç† (Cross-Account Role)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **åœºæ™¯ï¼š** ç»„ç»‡è¿ç§»ï¼ŒDev/Prod æˆå‘˜è´¦æˆ·ã€‚
* **éœ€æ±‚ï¼š** åœ¨ **Management Account** åˆ›å»ºä¸€ä¸ª IAM Userï¼Œè¯¥ç”¨æˆ·èƒ½ **Stop/Terminate** æˆå‘˜è´¦æˆ·çš„èµ„æºã€‚
* **æœºåˆ¶ï¼š** è·¨è´¦æˆ·æ“ä½œã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **è·¨è´¦æˆ·æ“ä½œé“å¾‹ï¼š** **IAM Role Assumption**ã€‚
* **æ¶æ„è®¾è®¡ï¼š**
    1.  **æˆå‘˜è´¦æˆ· (Member Accounts):** åˆ›å»ºä¸€ä¸ª **Cross-Account Role**ï¼Œèµ‹äºˆ Stop/Terminate æƒé™ï¼Œä¿¡ä»»ç®¡ç†è´¦æˆ·ã€‚
    2.  **ç®¡ç†è´¦æˆ· (Management Account):** åˆ›å»º IAM Userï¼Œèµ‹äºˆ `sts:AssumeRole` æƒé™ã€‚
    3.  **æ“ä½œï¼š** ç”¨æˆ· Assume æˆå‘˜è´¦æˆ·çš„è§’è‰²ã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * é€‰é¡¹ A (Role in Management Account): è§’è‰²å¿…é¡»åœ¨**ç›®æ ‡è´¦æˆ·**ï¼ˆæˆå‘˜è´¦æˆ·ï¼‰åˆ›å»ºï¼Œæ‰èƒ½æ“ä½œè¯¥è´¦æˆ·çš„èµ„æºã€‚A è¯´åœ¨ç®¡ç†è´¦æˆ·å»ºè§’è‰²ï¼Œé”™ã€‚
    * é€‰é¡¹ B (User in Member Accounts): é¢˜ç›®è¦æ±‚ "Create an IAM user in the Management Account"ã€‚B è®©ä½ åœ¨æˆå‘˜è´¦æˆ·å»ºç”¨æˆ·ï¼Œè¿åéœ€æ±‚ä¸”ç®¡ç†åˆ†æ•£ã€‚
    * é€‰é¡¹ C (IAM Group): IAM Group ä¸èƒ½è·¨è´¦æˆ·ã€‚
    * **é€‰é¡¹ D:** Management Account User $\rightarrow$ Assume Role in Member Accountsã€‚æ ‡å‡†ç­”æ¡ˆã€‚
    * **é”å®š Dã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ D)**
* **Cross-Account Access:** ç”¨æˆ·åœ¨æºè´¦æˆ·ï¼Œè§’è‰²åœ¨ç›®æ ‡è´¦æˆ·ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** è·¨è´¦æˆ· IAM è§’è‰²æ‰®æ¼”æ¶æ„ã€‚

---

#### ğŸ“ [234/529] æœ¬åœ° Windows ç¾å¤‡åˆ° AWS (DRS + DataSync)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **æºç«¯ï¼š** Hundreds of Windows Servers + **Common Share** (å…¬å…±å…±äº«å­˜å‚¨)ã€‚
* **RTO/RPO:** 15 min / 5 minã€‚
* **éœ€æ±‚ï¼š** On-premise Failover and **Failback** (æ•…éšœåˆ‡æ¢ä¸å›åˆ‡)ã€‚
* **æˆæœ¬ï¼š** **Cost-effectively**ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **æœåŠ¡å™¨ç¾å¤‡ï¼š**
    * **AWS Elastic Disaster Recovery (DRS):** (D é€‰é¡¹)ã€‚æ”¯æŒç‰©ç†æœº/VM åˆ° AWS çš„å—çº§å¤åˆ¶ï¼ŒRPO ç§’çº§ï¼ŒRTO åˆ†é’Ÿçº§ã€‚æ”¯æŒ **Failback**ï¼ˆå¢é‡å›åˆ‡ï¼‰ã€‚å®Œç¾ã€‚
    * é€‰é¡¹ A (Storage Gateway): åªæ˜¯å¤‡ä»½æ•°æ®ï¼Œä¸æ˜¯æœåŠ¡å™¨ç¾å¤‡ã€‚æ¢å¤æœåŠ¡å™¨éœ€è¦é‡è£…ç³»ç»Ÿï¼ŒRTO è¾¾ä¸åˆ° 15 åˆ†é’Ÿã€‚
    * é€‰é¡¹ B (CloudFormation + DataSync): DataSync æ˜¯æ–‡ä»¶çº§çš„ï¼Œä¸èƒ½å¤åˆ¶æ“ä½œç³»ç»ŸçŠ¶æ€ã€‚ä½ éœ€è¦é¢„å…ˆç»´æŠ¤å‡ ç™¾ä¸ª CloudFormation æ¨¡æ¿æ¥é‡å»ºæœåŠ¡å™¨ï¼Ÿå¤ªæ…¢å¤ªå¤æ‚ã€‚
    * é€‰é¡¹ C (CDK + S3 Sync): åŒä¸Šï¼ŒS3 Sync ä¸èƒ½åŒæ­¥æ“ä½œç³»ç»Ÿã€‚
* **å…±äº«å­˜å‚¨ç¾å¤‡ï¼š**
    * æœ¬åœ°çš„ "Common Share" éœ€è¦åœ¨ AWS æœ‰å¯¹åº”ç‰©ã€‚
    * **Amazon FSx for Windows File Server** æ˜¯æœ€ä½³å¯¹åº”ã€‚
    * ä½¿ç”¨ **DataSync** å°†æœ¬åœ°å…±äº«å¤åˆ¶åˆ° FSxã€‚
* **ç»„åˆï¼š**
    * Server -> DRSã€‚
    * Share -> DataSync -> FSxã€‚
    * **é”å®š Dã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ D)**
* **AWS DRS:** è§£å†³æœåŠ¡å™¨ï¼ˆOS+Appï¼‰çš„ä½ RPO/RTO ç¾å¤‡ä¸å›åˆ‡ã€‚
* **DataSync + FSx:** è§£å†³å…±äº«æ–‡ä»¶æ•°æ®çš„åŒæ­¥ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** å®Œæ•´çš„ä¼ä¸šçº§ç¾å¤‡æ–¹æ¡ˆ (DRS + DataSync)ã€‚

---

#### ğŸ“ [235/529] HPC é›†ç¾¤æ€§èƒ½ä¼˜åŒ– (FSx Lustre + EFA + Single AZ)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **åœºæ™¯ï¼š** HPC, **Tightly coupled** (ç´§å¯†è€¦åˆå·¥ä½œè´Ÿè½½)ã€‚
* **é—®é¢˜ï¼š** æ‰©å±•åˆ° 1000 èŠ‚ç‚¹æ—¶æ€§èƒ½å·®ã€‚
* **ç“¶é¢ˆï¼š** EFS å…±äº«æ–‡ä»¶ã€‚
* **ç›®æ ‡ï¼š** **Max Performance**ã€‚
* **é€‰æ‹©ï¼š** 3 ä¸ªè®¾è®¡é€‰æ‹©ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **ç½‘ç»œå±‚ (Tight Coupling):**
    * ç´§å¯†è€¦åˆæ„å‘³ç€èŠ‚ç‚¹é—´é€šä¿¡æå…¶é¢‘ç¹ä¸”è¦æ±‚ä½å»¶è¿Ÿã€‚
    * å¿…é¡»åœ¨ **Single AZ (A)** å†…éƒ¨ç½²ï¼Œä»¥è·å¾—æœ€ä½å»¶è¿Ÿï¼ˆè·¨ AZ å»¶è¿Ÿé«˜ï¼‰ã€‚ $\rightarrow$ **é€‰ä¸­ A**ã€‚
    * å¿…é¡»ä½¿ç”¨ **Elastic Fabric Adapter (EFA) (C)**ã€‚è¿™æ˜¯ AWS ä¸“ä¸º HPC è®¾è®¡çš„ç½‘å¡ï¼Œæ”¯æŒ OS-bypassï¼Œæä½å»¶è¿Ÿã€‚ $\rightarrow$ **é€‰ä¸­ C**ã€‚
* **å­˜å‚¨å±‚ (Shared Files):**
    * EFS æ˜¯é€šç”¨æ–‡ä»¶ç³»ç»Ÿï¼Œå¯¹äº HPC é«˜å¹¶å‘ååå¯èƒ½æˆç“¶é¢ˆã€‚
    * **FSx for Lustre (F)** æ˜¯ä¸“ä¸º HPC è®¾è®¡çš„é«˜æ€§èƒ½å¹¶è¡Œæ–‡ä»¶ç³»ç»Ÿã€‚ $\rightarrow$ **é€‰ä¸­ F**ã€‚
* **æ’é™¤æ³•ï¼š**
    * D (Multi-AZ): è¿åç´§å¯†è€¦åˆéœ€æ±‚ã€‚
    * E (EBS RAID): EBS åªèƒ½æŒ‚ç»™å•å°æœºå™¨ï¼ˆæˆ–ç‰¹å®šæ¡ä»¶ä¸‹ Multi-Attachï¼‰ï¼Œä¸èƒ½ç»™ 1000 å°æœºå™¨åšå…±äº«æ–‡ä»¶ç³»ç»Ÿã€‚
* **é”å®š A, C, Fã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ A, C, F)**
* **Single AZ:** ç‰©ç†è·ç¦»æœ€è¿‘ã€‚
* **EFA:** ç½‘ç»œå»¶è¿Ÿæœ€ä½ã€‚
* **FSx for Lustre:** å­˜å‚¨ååæœ€é«˜ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** HPC ç´§å¯†è€¦åˆåœºæ™¯çš„â€œä¸‰ä»¶å¥—â€ä¼˜åŒ–ã€‚

---

#### ğŸ“ [236/529] å¼ºåˆ¶æ ‡ç­¾ç­–ç•¥ (SCP + Tag Policy)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **éœ€æ±‚ï¼š**
    1.  Standardize tags (æ ‡å‡†åŒ–æ ‡ç­¾)ã€‚
    2.  Require specific value on creation (åˆ›å»ºæ—¶å¿…é¡»æœ‰ç‰¹å®šå€¼)ã€‚
    3.  Each OU has unique tag value (æ¯ä¸ª OU å€¼ä¸åŒ)ã€‚
* **å·¥å…·ï¼š** SCP + Tag Policyã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **å¼ºåˆ¶åˆ›å»ºæ—¶å¸¦æ ‡ç­¾ï¼š**
    * ä½¿ç”¨ **SCP (Service Control Policy)**ã€‚é…ç½® `Deny` åŠ¨è¯ï¼Œæ¡ä»¶æ˜¯ `Null` Tag æˆ– Tag Value ä¸åŒ¹é…ã€‚
    * æ—¢ç„¶æ¯ä¸ª OU çš„æ ‡ç­¾å€¼ä¸åŒï¼ŒSCP å¿…é¡»æŒ‚åœ¨ **OUs** ä¸Šï¼Œè€Œä¸æ˜¯ Rootã€‚
* **å®šä¹‰åˆè§„å€¼ï¼š**
    * ä½¿ç”¨ **Tag Policy**ã€‚å®ƒå¯ä»¥å®šä¹‰ Tag Key çš„å¤§å°å†™å’Œå…è®¸çš„ Valuesã€‚
    * Tag Policy ä¹Ÿå¯ä»¥æŒ‚åœ¨ OUs ä¸Šã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * **é€‰é¡¹ A:**
        * SCP: Deny creation without required tags. (Attached to OUs).
        * Tag Policy: Define values. (Attached to OUs).
        * è¿™æ˜¯æœ€ç¬¦åˆâ€œæ¯ä¸ª OU æœ‰ç‹¬ç‰¹å€¼â€çš„é…ç½®ã€‚
    * é€‰é¡¹ B: Tag Policy attached to Management Account? è¿™æ ·æ‰€æœ‰ OU ç»§æ‰¿åŒä¸€ä¸ªç­–ç•¥ï¼Œå¦‚æœä¸ç»†åˆ†ï¼Œå¾ˆéš¾å®ç°â€œæ¯ä¸ª OU ç‹¬ç‰¹å€¼â€ã€‚é€šå¸¸ç­–ç•¥ä¸‹å‘åˆ° OU æ›´ç²¾å‡†ã€‚ä½†å…¶å® Tag Policy æ”¯æŒç»§æ‰¿å’Œè¦†ç›–ã€‚
    * **å…³é”®æ˜¯ SCP:**
        * SCP å¿…é¡»åœ¨ OU çº§åˆ«ï¼Œå› ä¸ºå®ƒåŒ…å«äº†å…·ä½“çš„â€œå…è®¸å€¼â€é€»è¾‘ï¼ˆå¦‚æœ SCP ä»…ä»…æ˜¯å¼ºåˆ¶ Key å­˜åœ¨ï¼Œé‚£å¯ä»¥åœ¨ Rootã€‚ä½†é¢˜ç›®è¯´ "Require specific value"ï¼‰ã€‚å¦‚æœæ¯ä¸ª OU å€¼ä¸åŒï¼ŒSCP é€»è¾‘å°±ä¸åŒï¼Œæ‰€ä»¥ SCP å¿…é¡»æŒ‚åœ¨ OUã€‚
    * **ç»“è®ºï¼š** é€‰é¡¹ A çš„é…ç½®ä½ç½®ï¼ˆOUsï¼‰æœ€åˆç†ã€‚
    * **é”å®š Aã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ A)**
* **SCP:** å¼ºåˆ¶æ‰§è¡Œï¼ˆPreventiveï¼‰ã€‚
* **Tag Policy:** å®šä¹‰æ ‡å‡†ï¼ˆåˆè§„æ€§ï¼‰ã€‚
* **Attachment:** OU çº§åˆ«å®ç°å·®å¼‚åŒ–ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** æ ‡ç­¾æ²»ç†çš„ç»„åˆæ‹³ (SCP + Tag Policy)ã€‚

---

#### ğŸ“ [237/529] IoT æ•°æ®æ‘„å–é«˜å¯ç”¨ (IoT Core + Firehose)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **ç°çŠ¶ï¼š** ä¼ æ„Ÿå™¨ (MQTT) $\rightarrow$ æœ¬åœ° Kafka $\rightarrow$ S3ã€‚
* **æ•…éšœï¼š** Kafka å´©æºƒï¼Œæ•°æ®ä¸¢å¤±ã€‚
* **ç›®æ ‡ï¼š** HA, Scalable, **Prevent data loss**ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **IoT æ¥å…¥ï¼š** æœ¬åœ° Kafka æ˜¯å•ç‚¹ã€‚è¿ç§»åˆ° **AWS IoT Core**ã€‚å®ƒæ˜¯ Serverless çš„ï¼Œå¤©ç„¶é«˜å¯ç”¨ï¼Œæ”¯æŒ MQTTã€‚
* **æ•°æ®æµï¼š** IoT Core $\rightarrow$ ? $\rightarrow$ S3ã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * **é€‰é¡¹ C:** IoT Core $\rightarrow$ **Kinesis Data Firehose** $\rightarrow$ S3ã€‚
        * Firehose æ˜¯è¿™ä¸€è·¯å¾„çš„æœ€ä½³æ‹æ¡£ã€‚å®ƒè‡ªåŠ¨ç¼“å†²ã€è½¬æ¢ï¼ˆLambdaï¼‰ã€æŠ•é€’åˆ° S3ã€‚Serverless æ¶æ„ï¼Œæ— æœåŠ¡å™¨è¿ç»´ã€‚
    * é€‰é¡¹ A (EC2 Kafka): è¿˜æ˜¯è‡ªå»º Kafkaï¼Œè¿ç»´é‡ï¼ŒEC2 è¿˜æ˜¯å¯èƒ½æŒ‚ã€‚
    * é€‰é¡¹ B (MSK + NLB): MSK æ˜¯æ‰˜ç®¡ Kafkaï¼Œæ¯” EC2 å¥½ã€‚ä½† IoT Core æ˜¯ MQTT çš„åŸç”Ÿå…¥å£ã€‚å¦‚æœä¼ æ„Ÿå™¨èƒ½ç›´è¿ AWSï¼ŒIoT Core æ¯” MSK æ›´é€‚åˆä½œä¸ºè®¾å¤‡ç½‘å…³ï¼ˆDevice Gatewayï¼‰ã€‚ä¸” MSK éœ€è¦é…ç½® NLB ç­‰ï¼Œæ¶æ„è¾ƒé‡ã€‚IoT Core -> Firehose æ˜¯ç»å…¸æ¨¡å¼ã€‚
    * é€‰é¡¹ D (IoT Core -> EC2): æŠŠæ•°æ®å‘ç»™å•å° EC2ï¼Ÿç“¶é¢ˆã€‚
    * **é”å®š Cã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ C)**
* **IoT Core:** è§£å†³è®¾å¤‡è¿æ¥å’Œé«˜å¯ç”¨ã€‚
* **Firehose:** è§£å†³æ•°æ®ç¼“å†²å’Œå…¥æ¹– (S3)ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** IoT æ•°æ®æ‘„å–å…¥æ¹–çš„ Serverless æ¶æ„ã€‚

---

#### ğŸ“ [238/529] é›†ä¸­å¤‡ä»½ä¸åˆè§„ (AWS Backup)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **èµ„æºï¼š** EC2, EFS, RDSã€‚
* **éœ€æ±‚ï¼š**
    1.  Custom retention (è‡ªå®šä¹‰ä¿ç•™)ã€‚
    2.  **Copy to another Region** (è·¨åŒºå¤åˆ¶)ã€‚
    3.  **Single source of backup status** (ç»Ÿä¸€è§†å›¾)ã€‚
    4.  **Notification on failure** (å¤±è´¥é€šçŸ¥)ã€‚
* **çº¦æŸï¼š** **Least operational overhead**ã€‚
* **é€‰æ‹©ï¼š** 3 ä¸ªæ­¥éª¤ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **æ ¸å¿ƒæœåŠ¡ï¼š** **AWS Backup**ã€‚å®ƒèƒ½ç»Ÿä¸€ç®¡ç† EC2, EFS, RDS çš„å¤‡ä»½ã€‚
* **æ­¥éª¤åˆ†è§£ï¼š**
    1.  **åˆ›å»ºè®¡åˆ’ï¼š** Create Backup Plan with rules (é¢‘ç‡ã€ä¿ç•™)ã€‚ $\rightarrow$ **é€‰ä¸­ A**ã€‚
    2.  **é…ç½®å¤åˆ¶ï¼š** åœ¨ Backup Plan ä¸­é…ç½® **Cross-Region Copy**ã€‚ $\rightarrow$ **é€‰ä¸­ B**ã€‚
    3.  **é…ç½®é€šçŸ¥ï¼š** AWS Backup æ”¯æŒ **Backup Vault Notifications** (åŸºäº SNS)ã€‚å¯ä»¥é…ç½®å½“ Job çŠ¶æ€ä¸ä¸º COMPLETED æ—¶å‘é€é€šçŸ¥ã€‚
        * é€‰é¡¹ D: "Add SNS topic to backup plan..."? å®é™…ä¸Šæ˜¯é…ç½®åœ¨ **Backup Vault** ä¸Šã€‚ä½†é€‰é¡¹ D æè¿°äº† SNS å‘é€é€šçŸ¥çš„æ„å›¾ã€‚
        * é€‰é¡¹ C: Lambda å¤åˆ¶ï¼ŸAWS Backup åŸç”Ÿæ”¯æŒå¤åˆ¶ï¼Œä¸éœ€è¦ Lambdaã€‚
    * $\rightarrow$ **é€‰ä¸­ D**ã€‚
* **æ’é™¤æ³•ï¼š**
    * E (DLM): DLM ä¸»è¦ç®¡ EBSï¼Œç®¡ä¸äº† RDS/EFSã€‚
    * F (RDS Snapshot): åˆ†æ•£ç®¡ç†ï¼Œä¸ç¬¦åˆ "Single source"ã€‚
* **é”å®š A, B, Dã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ A, B, D)**
* **AWS Backup Plan:** å®šä¹‰ç­–ç•¥ï¼ˆå¤‡ä»½+å¤åˆ¶ï¼‰ã€‚
* **SNS Notification:** ç›‘æ§ä»»åŠ¡çŠ¶æ€ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** AWS Backup çš„å…¨åŠŸèƒ½åº”ç”¨ (Plan, Copy, Notify)ã€‚

---

#### ğŸ“ [239/529] åŸºå› æ•°æ®å®æ—¶æµå¤„ç† (Kinesis Streams + EMR)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **è¾“å…¥ï¼š** 8 KB/sec per device (å°æ•°æ®æµ)ã€‚
* **éœ€æ±‚ï¼š**
    1.  **Near-real-time analysis** (è¿‘å®æ—¶åˆ†æ)ã€‚
    2.  Flexible, parallel, durable.
    3.  Deliver to Data Warehouse (Redshift).
* **åˆ†æï¼š** éœ€è¦å¼ºå¤§çš„è®¡ç®—èƒ½åŠ›ï¼ˆåŸºå› æ•°æ®ï¼‰ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **æ‘„å–å±‚ï¼š**
    * **Kinesis Data Streams (KDS) (B):** æ”¯æŒå®æ—¶æµæ‘„å–ï¼Œä¿ç•™æ•°æ®ï¼ˆDurableï¼‰ï¼Œæ”¯æŒå¹¶è¡Œæ¶ˆè´¹ã€‚
    * Firehose (A): ä¸»è¦ç”¨äºåŠ è½½æ•°æ®ï¼ˆLoadï¼‰ï¼Œåˆ†æèƒ½åŠ›å¼±ï¼ˆåªèƒ½ç®€å•çš„ Lambda è½¬æ¢ï¼‰ã€‚é¢˜ç›®è¦æ±‚ "Analyze data... using Kinesis Client"ï¼Œé€šå¸¸æŒ‡è‡ªå®šä¹‰åº”ç”¨æˆ– EMR/Spark Streamingã€‚
    * API Gateway (D): è™½ç„¶å¯ä»¥ä½œä¸ºå‰ç«¯ï¼Œä½†åç«¯è¿˜éœ€è¦æµã€‚
* **åˆ†æä¸å­˜å‚¨å±‚ï¼š**
    * **EMR (Spark/Flink):** å¯ä»¥ç›´æ¥æ¶ˆè´¹ Kinesis Streamsï¼Œè¿›è¡Œå¤æ‚çš„åŸºå› æ•°æ®å®æ—¶åˆ†æã€‚
    * **Redshift:** æ•°ä»“å­˜å‚¨ã€‚
    * **é€‰é¡¹ B:** KDS -> Kinesis Client (on EMR?) -> Redshiftã€‚è¿™æ˜¯ç¬¦åˆâ€œè¿‘å®æ—¶ã€å¹¶è¡Œåˆ†æâ€çš„é«˜æ€§èƒ½æ¶æ„ã€‚
    * **é€‰é¡¹ A:** Firehose -> RDS? RDS ä¸é€‚åˆåˆ†ææµ·é‡åŸºå› æ•°æ®ã€‚
    * **é€‰é¡¹ C:** S3 -> SQS -> Kinesis? ä¹±åºã€‚
* **é”å®š Bã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B)**
* **Kinesis Data Streams:** å®æ—¶æ•°æ®æ€»çº¿ã€‚
* **EMR:** å¤§æ•°æ®å®æ—¶å¤„ç†å¼•æ“ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** å®æ—¶æµå¤„ç†æ¶æ„ (Kinesis + EMR)ã€‚

---

#### ğŸ“ [240/529] æé€Ÿç¾å¤‡åˆ‡æ¢ (Global Tables + Route 53)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **RTO:** **< 1 minute** (æå¿«)ã€‚
* **æ¶æ„ï¼š** Web, App, NoSQLã€‚
* **é€‰æ‹©ï¼š** 3 ä¸ªæ­¥éª¤ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **DNS åˆ‡æ¢ (Route 53):**
    * è¦å®ç° 1 åˆ†é’Ÿåˆ‡æ¢ï¼Œ**TTL** å¿…é¡»å¾ˆçŸ­ã€‚
    * $\rightarrow$ **é€‰ä¸­ B** (Failover routing, TTL 30s)ã€‚
    * A (Weighted, TTL 1h) åˆ‡æ¢å¤ªæ…¢ã€‚
* **æ•°æ®å±‚ (NoSQL):**
    * 1 åˆ†é’Ÿ RTO æ„å‘³ç€æ•°æ®å¿…é¡»å·²ç»åœ¨é‚£äº†ï¼ˆActive-Active æˆ– çƒ­å¤‡ï¼‰ã€‚
    * **DynamoDB Global Tables (C):** å¤šåŒºåŸŸåŒæ´»ï¼Œæ•°æ®å®æ—¶åŒæ­¥ï¼ŒRTO æ¥è¿‘ 0ã€‚
    * D (Backup/Restore): æ¢å¤æ—¶é—´è‚¯å®šè¶…è¿‡ 1 åˆ†é’Ÿã€‚
    * $\rightarrow$ **é€‰ä¸­ C**ã€‚
* **åº”ç”¨å±‚ (Web/App):**
    * è¦å¿«ï¼Œç¾å¤‡åŒºåŸŸçš„èµ„æºå¿…é¡»æ˜¯**çƒ­å¤‡ (Hot Standby)** æˆ– **Active-Active**ã€‚
    * **é€‰é¡¹ E:** "Hot standby model... minimal instances... scale out"ã€‚è¿™æ˜¯ **Pilot Light / Warm Standby** çš„æ··åˆä½“ã€‚å¹³æ—¶å¼€ä¸€ç‚¹ï¼Œæ•…éšœæ—¶æ‰©å®¹ã€‚è¿™æ¯”å†·å¯åŠ¨å¿«ï¼Œç¬¦åˆæˆæœ¬æ•ˆç›Šã€‚
    * **é€‰é¡¹ F:** "Active-Active... Spot Instances"ã€‚å…¨é‡è·‘ Spotï¼Ÿé£é™©å¤§ï¼Œä¸”æˆæœ¬ä¸ä¸€å®šä½ï¼ˆå¦‚æœå…¨é‡è·‘ï¼‰ã€‚E çš„ Warm Standby æ›´ç¬¦åˆå¸¸è§„ DR è®¾è®¡ã€‚
    * **å…¶å®å…³é”®åœ¨äºï¼š** é¢˜ç›®è¦ "Minimize impact on user experience"ã€‚Spot å®ä¾‹å¯èƒ½ä¼šè¢«å›æ”¶ï¼Œä½œä¸º DR èµ„æºæœ‰é£é™©ã€‚E é€‰é¡¹ä½¿ç”¨ **Reserved Instances** for min capacityï¼Œä¿è¯äº†åŸºçº¿å®¹é‡ï¼Œæ›´ç¨³ã€‚
    * $\rightarrow$ **é€‰ä¸­ E**ã€‚
* **é”å®š B, C, Eã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B, C, E)**
* **R53 Failover:** æµé‡å…¥å£åˆ‡æ¢ã€‚
* **Global Tables:** æ•°æ®å±‚åŒæ´»ã€‚
* **Warm Standby:** åº”ç”¨å±‚å¿«é€Ÿæ¥ç®¡ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** åˆ†é’Ÿçº§ RTO çš„å…¨æ ˆç¾å¤‡æ¶æ„ã€‚

---
**å°ç»“ï¼š**
è¿™ç»„é¢˜ç›®çš„ **FSx vs Gateway**ã€**DRS**ã€**Kinesis EMR** éƒ½æ˜¯å®æˆ˜ä¸­çš„é«˜é¢‘æ¶æ„ã€‚

**å‡†å¤‡å¥½ä¸‹ä¸€ç»„äº†å—ï¼Ÿ**