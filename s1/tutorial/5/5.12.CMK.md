# 真题辨析：AWS托管CMK vs 用户托管CMK（SAP高频考点）
以下通过 **5道SAP考试真题（含单选、多选、判断）** ，聚焦两者的核心差异（管控能力、轮换、权限、成本、适用场景），每道题附详细解析，帮你精准区分选型逻辑：

## 核心差异前置（做题快速对照）
| 对比维度                | AWS托管CMK（aws/xxx）                          | 用户托管CMK（自定义）                          |
|-------------------------|-----------------------------------------------|-----------------------------------------------|
| 密钥材料生成            | AWS自动生成（用户不可见）                      | AWS自动生成（用户不可导出，但可管控）          |
| 轮换方式                | 自动轮换（1年1次，用户无法修改/触发）          | 手动轮换（立即）/自动轮换（1-365天，用户配置） |
| 管控能力                | 无法禁用、删除、自定义密钥策略                | 可禁用、计划删除（30天冷却期）、自定义密钥策略 |
| 权限配置                | 仅通过IAM策略控制“谁能使用”                    | 支持密钥策略（细粒度控制，如IP限制）+ IAM策略  |
| 成本                    | 无CMK存储费（仅收加密/解密操作费）             | 有CMK存储费（1美元/月/把）+ 操作费            |
| 适用场景                | 无需管控、低成本、默认加密需求                | 需密钥管控、自定义轮换、紧急禁用场景          |


## 真题1：单选题（轮换方式差异）
**题目**：某公司需要加密RDS数据库数据，要求“密钥自动轮换，无需手动干预，且成本最低”，应选择哪种CMK？  
A. AWS托管CMK（aws/rds）  
B. 用户托管CMK（自定义，开启自动轮换）  
C. BYOK（客户自有密钥）  
D. 多区域CMK（MRK）  

**答案**：A  
**解析**：  
- 核心关键词：“自动轮换+无需手动干预+成本最低”；  
- 选项A：AWS托管CMK默认自动轮换（1年1次），无存储费，成本最低，完全符合需求；  
- 选项B：用户托管CMK虽支持自动轮换，但需手动配置周期，且有1美元/月的存储费，成本高于A，不符合“成本最低”；  
- 选项C：BYOK需用户自己生成密钥材料，无自动轮换（需手动替换密钥材料），排除；  
- 选项D：多区域CMK适用于跨区域场景，题干无跨区域需求，且成本更高，排除。  

**考点**：AWS托管CMK的“自动轮换+低成本+免管理”是核心选型依据。


## 真题2：单选题（管控能力差异）
**题目**：某公司员工离职后，需要立即禁止其负责的加密密钥继续被使用，以下哪种CMK支持该操作？  
A. AWS托管CMK（aws/s3）  
B. 用户托管CMK（自定义）  
C. 多区域CMK（MRK，AWS托管）  
D. BYOK（客户自有密钥，本质是用户托管CMK的子集）  

**答案**：B  
**解析**：  
- 核心关键词：“立即禁止使用”→ 需支持“禁用密钥”；  
- 选项A：AWS托管CMK无法禁用、删除，即使员工离职，密钥仍可正常使用，排除；  
- 选项B：用户托管CMK支持“禁用”操作（控制台/API一键禁用），禁用后无法再用该密钥加密/解密，符合需求；  
- 选项C：多区域CMK的“AWS托管版”仍属于AWS托管CMK，无法禁用，排除；  
- 选项D：BYOK虽支持禁用，但题干未提“密钥材料自主生成”，且BYOK是用户托管CMK的子集，题干问“哪种CMK支持”，B是更通用、直接的答案，排除D。  

**考点**：用户托管CMK的“禁用/删除”管控能力是与AWS托管CMK的核心区别。


## 真题3：多选题（权限配置差异）
**题目**：某公司需要加密S3桶数据，要求“仅允许公司办公IP段（192.168.0.0/24）的用户使用密钥加密/解密”，以下说法正确的是？（多选）  
A. 选择AWS托管CMK（aws/s3），通过IAM策略限制IP段即可实现  
B. 选择用户托管CMK（自定义），通过密钥策略限制IP段即可实现  
C. 选择AWS托管CMK（aws/s3），无法实现IP段限制  
D. 选择用户托管CMK（自定义），需结合密钥策略和IAM策略实现  

**答案**：BC  
**解析**：  
- 核心关键词：“仅允许特定IP段访问密钥”→ 需细粒度权限控制（IP限制）；  
- 选项A错误、C正确：AWS托管CMK的密钥策略由AWS管理，用户无法自定义（如IP限制），仅能通过IAM策略控制“谁能使用”，但IAM策略无法限制IP段（IP限制需在密钥策略中配置`Condition`）；  
- 选项B正确、D错误：用户托管CMK支持自定义密钥策略，可在密钥策略中添加IP限制条件（如下），无需额外IAM策略（密钥策略直接授权IP段+操作）：  
  ```json
  {
    "Sid": "AllowOnlyOfficeIP",
    "Effect": "Allow",
    "Principal": "*",
    "Action": ["kms:Encrypt", "kms:Decrypt"],
    "Resource": "*",
    "Condition": {
      "IpAddress": { "aws:SourceIp": "192.168.0.0/24" }
    }
  }
  ```  

**考点**：用户托管CMK支持自定义密钥策略（细粒度控制如IP、时间限制），AWS托管CMK无此能力。


## 真题4：判断题（成本+管控综合差异）
**题目**：“AWS托管CMK的成本比用户托管CMK低，因此所有加密场景都应优先选择AWS托管CMK”（ ）  
A. 正确  
B. 错误  

**答案**：B  
**解析**：  
- 成本角度：AWS托管CMK无存储费，确实比用户托管CMK（1美元/月/把）成本低；  
- 但选型需结合“管控需求”：若场景需要“禁用密钥、自定义轮换周期、细粒度权限控制”，则必须选择用户托管CMK，即使成本更高；  
- 反例：员工离职后需禁用密钥、金融行业需自定义密钥轮换周期（如3个月1次），这些场景无法使用AWS托管CMK。  

**考点**：成本不是唯一选型依据，需结合“管控需求”判断——无管控需求选AWS托管，有管控需求选用户托管。


## 真题5：场景单选题（综合选型）
**题目**：某电商公司使用S3存储商品图片，要求：① 数据静态加密；② 密钥可在紧急情况下（如密钥泄露）立即停止使用；③ 可自定义密钥轮换周期（6个月1次）；④ 支持限制仅公司EC2实例访问密钥。以下哪种方案符合要求？  
A. S3 SSE-S3加密（非KMS）  
B. S3 SSE-KMS + AWS托管CMK（aws/s3）  
C. S3 SSE-KMS + 用户托管CMK（自定义）  
D. S3 SSE-C（客户提供密钥）  

**答案**：C  
**解析**：  
- 核心需求拆解：  
  ① 数据加密→ 排除A（SSE-S3无KMS，不符合“CMK”选型）；  
  ② 紧急停止使用→ 需支持“禁用密钥”→ 排除B（AWS托管CMK无法禁用）；  
  ③ 自定义轮换周期（6个月）→ 排除B（AWS托管CMK固定1年轮换）、D（SSE-C需用户自己管理密钥轮换，无CMK）；  
  ④ 限制仅EC2实例访问→ 用户托管CMK可通过密钥策略配置“允许EC2实例的IAM角色访问”，符合要求；  
- 选项C：用户托管CMK支持禁用、自定义6个月轮换周期、密钥策略限制EC2访问，完全满足所有需求。  

**考点**：多需求场景下，用户托管CMK的“多维度管控能力”是选型核心。


## 真题总结：选型口诀（SAP考试快速秒杀）
1. 看到“自动轮换、成本最低、无需管控”→ 选AWS托管CMK；  
2. 看到“禁用、删除、自定义轮换周期、细粒度控制（IP/角色限制）”→ 选用户托管CMK；  
3. 题干无“密钥材料自主生成”（BYOK关键词），仅提管控→ 优先用户托管CMK；  
4. 成本敏感且无管控需求→ AWS托管CMK；有管控需求，成本可接受→ 用户托管CMK。