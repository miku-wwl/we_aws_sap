# 为什么“DataSync直接迁移本地块存储到S3”是错误的？（SAP考点+概念拆解）
这个问题的核心是 **DataSync的“协议限制”+“块存储vs文件存储的本质差异”** —— 新手容易混淆“硬盘（块存储）”和“文件服务器（文件存储）”，咱们用“通俗比喻+技术原理+考试关联”，把这个错误点彻底讲透：


## 一、先分清两个关键概念：块存储 vs 文件存储（新手必懂）
要理解为什么错，首先得明白“DataSync只认文件存储，不认块存储”，这俩的区别就像“裸硬盘”和“带文件夹的文件柜”：

| 存储类型       | 通俗比喻                          | 数据组织方式                          | 访问方式                          | 常见例子                          |
|----------------|-----------------------------------|---------------------------------------|-----------------------------------|-----------------------------------|
| **块存储**     | 「没有标签的裸硬盘/U盘」          | 数据按“块”（Block）存储，比如1KB/4KB一个块，没有文件系统、没有文件名、没有文件夹 | 必须先格式化（创建文件系统，如NTFS/EXT4），才能存文件 | 本地电脑硬盘、移动硬盘（未格式化）、服务器本地磁盘 |
| **文件存储**   | 「带标签的文件柜」                | 数据按“文件/文件夹”组织，有文件名、目录结构、元数据（修改时间、大小） | 通过网络协议（NFS/SMB）或本地文件系统访问 | 本地文件服务器、NAS存储（如Synology）、共享文件夹 |

### 核心结论：
DataSync 是「文件级迁移工具」，它只能识别“文件柜里的文件”（文件存储），没法直接读取“裸硬盘里的块数据”（块存储）—— 这是它的设计初衷，也是SAP考试的核心考点。


## 二、DataSync的“协议依赖”：为什么只支持NFS/SMB？
DataSync 要访问源存储，必须通过「网络文件协议」，就像快递员要收包裹，必须按“快递规则”来（比如要填地址、贴标签）：
- DataSync 的 Agent（本地“快递员”），只能理解 **NFS（Linux/Unix常用）** 和 **SMB（Windows常用）** 这两种“网络文件协议”；
- 本地块存储（如裸硬盘）没有“网络文件协议接口”—— 它就像“一堆零散的零件”，没有包装（文件系统）、没有地址（共享路径），Agent 根本不知道怎么“读取”和“打包”这些数据；
- 即使你把块存储格式化了（比如给硬盘装了NTFS文件系统），如果没通过NFS/SMB共享（比如没把硬盘设为“共享文件夹”），DataSync Agent 也访问不到—— 因为它不支持“直接挂载本地硬盘”，只能通过网络协议访问共享的文件。

### 通俗例子：
你有一个裸硬盘（块存储），里面存了100个文件，但没格式化、没共享—— DataSync Agent 看不到这些文件，只能看到“一块空白的存储”；  
只有你把硬盘格式化（创建文件系统），再通过NFS/SMB共享成“网络文件夹”（变成文件存储），Agent 才能通过共享路径访问到里面的文件，进而迁移。


## 三、错误选项的本质：混淆了“迁移对象”
“DataSync支持将本地块存储直接迁移到S3”这句话的错误，在于「迁移对象不匹配」：
- DataSync 的迁移对象是「文件/文件夹」（基于NFS/SMB协议的文件数据）；
- 块存储的迁移对象是「块数据」（比如裸硬盘里的原始数据、数据库的块设备），需要专门的“块级迁移工具”（如AWS DMS用于数据库块数据、VMware vMotion用于虚拟机块数据），而不是DataSync。

### 正确做法（如果要迁移块存储数据）：
1. 把块存储格式化，创建文件系统（如NTFS/EXT4）；
2. 通过NFS/SMB协议共享成网络文件夹（变成文件存储）；
3. 用DataSync 迁移这个共享文件夹里的文件到S3—— 此时迁移的是“文件”，不是“块数据”。


## 四、SAP考试考点强化（必记！）
1. 核心陷阱：真题会故意混淆“块存储”和“文件存储”，比如选项“DataSync可直接迁移本地硬盘数据到EFS”（错误，因为本地硬盘是块存储，需先共享）；
2. 正确表述：“DataSync仅支持通过NFS/SMB协议访问文件存储，不支持直接访问块存储”；
3. 延伸考点：如果题目中说“要迁移本地裸硬盘的块数据到AWS”，答案绝对不是DataSync，而是其他工具（如Snow Family用于离线块数据、DMS用于数据库块数据）。


## 总结（新手必背）
- 口诀：“DataSync认文件，不认块，NFS/SMB是门槛”；
- 关键：块存储需要先“变成”文件存储（格式化+共享），才能用DataSync迁移；
- 考试：看到选项中“DataSync直接迁移块存储”“DataSync访问本地硬盘”，直接排除！
