
---

#### 📝 [56/529] BYOIP 迁移白名单问题

**1. 🕵️‍♂️ 题眼与约束分析**
* **痛点：** 第三方 API 只信任 **One Public CIDR** (客户现有的 IP)。
* **迁移：** App 搬到 AWS (Private Subnet + NAT Gateway)。
* **需求：** 保持出口 IP 不变（即使用客户原来的 IP）。
* **核心技术：** **BYOIP (Bring Your Own IP)**。

**2. ⚡ 秒杀思路**
* **原理：** 你可以把自己的公网 IP 段 (CIDR) 广播到 AWS，然后从中分配 **Elastic IP (EIP)**。
* **架构：** 私有子网的 EC2 访问公网，出口 IP 是 **NAT Gateway** 的 EIP。
* **操作步骤：**
    1.  **Register** CIDR to AWS (BYOIP)。
    2.  Create **EIP** from that pool。
    3.  Assign EIP to **NAT Gateway**。
* **秒杀动作：**
    * 选项 A: VGW/VPN 里的公共 IP？逻辑混乱。
    * 选项 C: 分配给 ALB？ALB 是**入口**负载均衡，题目问的是 EC2 **调用** 第三方 API（出口流量）。出口流量走 NAT，不走 ALB。
    * 选项 D (Global Accelerator): GA 是做入口加速的，且这里不需要 GA。
    * **选项 B:** 注册 BYOIP -> 创建 EIP -> 绑定 NAT GW。逻辑完美。
    * **锁定 B。**

**3. ✅ 正确选项解析 (选项 B)**
* **BYOIP + NAT Gateway:** 这是保留原有出口 IP 信誉/白名单的标准迁移方案。

**5. 📚 核心考点:** BYOIP 的使用场景（保留白名单 IP）。
