
---

#### 📝 [60/529] Lambda 金丝雀发布 (Canary Deployment)

**1. 🕵️‍♂️ 题眼与约束分析**
* **痛点：** 上次发布导致中断。
* **目标：** **Canary Release** (金丝雀发布/逐步切流量)。
* **核心工具：** **Lambda Alias** + **Routing Config**。

**2. ⚡ 秒杀思路**
* **Lambda 原生金丝雀：**
    * Lambda 支持 **Alias Traffic Shifting**（别名流量切换）。你可以让一个别名（如 `PROD`）同时指向两个版本（V1: 90%, V2: 10%）。
* **选项对比：**
    * 选项 B (Route 53 Weighted): R53 是 DNS 级的，不仅有缓存延迟，而且它指向的是 API Gateway 或 ALB，很难直接控制 Lambda 版本的权重。
    * 选项 C (Update Function Config): 这是一个全量更新配置，没有 traffic shifting 参数。
    * 选项 D (CodeDeploy): CodeDeploy 确实可以做金丝雀，但题目似乎倾向于更底层的机制或命令。不过，CodeDeploy 是实现此功能的最佳自动化工具。
    * **细看 A vs D:**
        * 选项 A: `update-alias` 命令确实有 `--routing-config` 参数，允许你指定 `AdditionalVersionWeights`。这是实现金丝雀的底层 API。
        * 选项 D: `CodeDeployDefault.OneAtATime` 不是金丝雀，是**线性**部署（Linear），或者说是滚动更新的一种（一次一台，但 Lambda 不是台）。Lambda 的 CodeDeploy 模式通常是 `Canary10Percent5Minutes` 或 `Linear10PercentEvery1Minute`。`OneAtATime` 是 EC2/On-prem 的模式。D 的参数名不对。
    * **锁定 A。**

**3. ✅ 正确选项解析 (选项 A)**
* **Lambda Alias Routing:** 原生的流量加权功能，通过 CLI `update-alias` 配置。

**5. 📚 核心考点:** Lambda 版本别名与流量加权。
