#### 📝 [260/529] CORS 故障排查 (API Gateway)

**1. 🕵️‍♂️ 题眼与约束分析**
* **架构：** S3/CloudFront (Static Site) $→$ API Gateway $→$ Lambda。
* **故障：** **CORS error** (跨域错误)。
* **排查：** CloudFront 已配置 `Access-Control-Allow-Origin: www.example.com`。
* **问题点：** 浏览器请求的是 **API Gateway**。CORS 是浏览器对**目标服务器**（API Gateway）的检查。如果 API Gateway 的响应头里没有 CORS 头，浏览器就会报错。CloudFront 的头是给静态资源的，管不到 API 请求（除非 API 也走 CloudFront，但题目说"Website calls API Gateway endpoint"，通常指直接调用）。即使 API 走 CF，源站（API GW）也必须返回正确的 CORS 头。

**2. ⚡ 秒杀思路**
* **CORS 配置位置：**
    * 必须在 **API Gateway** 上启用 CORS。它会添加 OPTIONS 方法，并配置响应头。
    * **选项 C:** Enable CORS on API Gateway... return `Access-Control-Allow-Origin: www.example.com`。这是正解。
* **排除法：**
    * A (S3 CORS): S3 是托管前端代码的，前端代码加载没问题。问题是前端代码发起的 **API 请求** 被浏览器拦截了。这需要 API 服务端配合。
    * B (WAF): WAF 是防火墙，不负责添加 CORS 响应头（虽然可以 hack，但不是标准做法）。
    * D (Lambda): 虽然 Lambda 代码也可以返回 CORS 头（Proxy Integration），但 API Gateway 层面的 "Enable CORS" 功能更常用，且能自动处理 OPTIONS 预检请求。如果 Lambda 也要做，通常是配合 API Gateway。但 C 选项明确说了在 API 端点启用，这是最直接的配置。**更重要的是**，如果 OPTIONS 请求没处理（Lambda 通常只处理 GET/POST），预检就会失败。API Gateway 的 CORS 配置会自动处理 OPTIONS。
    * **锁定 C。**

**3. ✅ 正确选项解析 (选项 C)**
* **API Gateway CORS:** 自动处理 OPTIONS 预检请求并注入 CORS 头。

**5. 📚 核心考点:** Serverless 架构中的 CORS 配置位置。