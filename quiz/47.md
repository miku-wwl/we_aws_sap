
---

#### 📝 [47/529] Lambda 静态公网 IP

**1. 🕵️‍♂️ 题眼与约束分析**
* **场景：** Lambda 需要访问第三方服务。
* **限制：** 第三方服务有 **Allow list** (白名单)，只接受 **Single Public IPv4 Address**。
* **目标：** 让 Lambda 出去的流量带上固定的公网 IP。

**2. ⚡ 秒杀思路**
* **Lambda 网络原理：**
    * Lambda 默认在 VPC 外（有公网 IP 但动态）。
    * Lambda 在 VPC 内（默认无公网访问）。
    * 要让 VPC 内的 Lambda 访问公网且固定 IP，标准架构是：**Lambda (Private Subnet) $\rightarrow$ NAT Gateway (Public Subnet) $\rightarrow$ Internet Gateway**。
    * **NAT Gateway** 必须要绑定一个 **Elastic IP (EIP)**。这个 EIP 就是给第三方加白名单的 IP。
* **秒杀动作：**
    * 选项 B (Egress-only IGW): 仅支持 IPv6。
    * 选项 C (IGW 直接连 Lambda): Lambda ENI 是私有的，不能直接挂 IGW，也不支持直接绑定 EIP（除非通过 NAT）。
    * 选项 D (Default Route to IGW): 私有子网的路由表指向 IGW 是无效的（因为没有公网 IP 进行 NAT 转换）。
    * **选项 A:** 部署 NAT Gateway + 关联 EIP。标准答案。
    * **锁定 A。**

**3. ✅ 正确选项解析 (选项 A)**
* **NAT Gateway + EIP:** 也就是企业级出网流量的标准出口。

**5. 📚 核心考点:** VPC Lambda 的公网访问架构。
