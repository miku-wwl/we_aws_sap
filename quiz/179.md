#### ğŸ“ [179/529] å¼‚æ­¥å¤„ç†ä¸æ­»ä¿¡é˜Ÿåˆ— (Lambda DLQ)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **éœ€æ±‚ï¼š**
    1.  Scale based on number of events (æŒ‰äº‹ä»¶æ•°æ‰©å±•)ã€‚
    2.  Processing errors -> **Separate queue for audit** (é”™è¯¯å»æ­»ä¿¡é˜Ÿåˆ—)ã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * **A (SNS -> Lambda -> SQS DLQ):**
        * SNS è§¦å‘ Lambda æ˜¯å¼‚æ­¥çš„ã€‚Lambda æ”¯æŒ **Destinations (On Failure)**ï¼Œå¯ä»¥å°†å¤±è´¥äº‹ä»¶å‘é€åˆ° SQSã€‚
        * Lambda è‡ªåŠ¨æ‰©å±•ï¼ˆå¹¶å‘ï¼‰ã€‚
        * ç¬¦åˆæ‰€æœ‰è¦æ±‚ã€‚ $\\rightarrow$ **å€™é€‰ A**ã€‚
    * **B (SQS -> EC2 ASG):** éœ€è¦ç»´æŠ¤ EC2 å’Œ ASG æ‰©å±•ç­–ç•¥ï¼Œè¿ç»´æ¯” Lambda é‡ã€‚
    * **C (DynamoDB Streams):** æ²¡æé”™è¯¯å¤„ç†æœºåˆ¶ï¼ˆLambda DLQ é…ç½®åœ¨ C é‡Œæ²¡æ˜è¯´ï¼Œè™½ç„¶å¯ä»¥é…ï¼‰ã€‚
    * **D (EventBridge -> EC2):** å¤æ‚ã€‚
    * **A vs B:** é¢˜ç›®æ²¡è¯´ä¸€å®šè¦ Serverlessï¼Œä½† "Scale based on events" å¯¹äº Lambda æ˜¯åŸç”Ÿçš„ï¼Œå¯¹äº EC2 éœ€è¦é… CloudWatch Metricã€‚ä¸” Lambda çš„ **On-failure Destination** æ˜¯å¤„ç†å¼‚æ­¥é”™è¯¯çš„æ ‡å‡†æ¨¡å¼ã€‚A æ›´ç®€æ´ã€‚
    * **å…³é”®ç¡®è®¤ï¼š** A é€‰é¡¹è¯´ "Add a failure destination to the function... SQS queue as target"ã€‚è¿™æ˜¯ Lambda å¼‚æ­¥è°ƒç”¨çš„åŸç”ŸåŠŸèƒ½ã€‚
    * **é”å®š Aã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ A)**
* **Lambda Asynchronous Invocation:** è‡ªå¸¦é‡è¯•å’Œ DLQ (Destinations) æœºåˆ¶ã€‚
* **SNS:** ä½œä¸ºå…¥å£è§¦å‘å™¨ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** Lambda å¼‚æ­¥è°ƒç”¨é”™è¯¯å¤„ç† (Destinations)ã€‚