#### 📝 [197/529] S3 审计与敏感操作通知 (CloudTrail + EventBridge)

**1. 🕵️‍♂️ 题眼与约束分析**
* **需求：**
    1. Log ALL activity (记录所有活动) -> Retain 5 years。
    2. **Email notification** on **Delete Object** (删除数据时发邮件)。
* **目标：** **Most cost-effective**。
* **选择：** 3 个步骤。

**2. ⚡ 秒杀思路**
* **日志记录：**
    * **CloudTrail Data Events (A):** 是记录 S3 对象级操作（如 Get, Put, Delete）的标准方式。
    * **Server Access Logs (B):** 也可以，但 CloudTrail 更易于集成 EventBridge 做后续的通知。题目要求通知，CloudTrail 是事件源。但 A 选项说 "Configure CloudTrail to log S3 data events"。这是对的。
    * **存储日志：**
        * CloudTrail 日志存 S3。
        * 需要保留 5 年 $→$ **Lifecycle Policy** (转 Glacier)。
        * $→$ **选中 F** (New bucket for logs + Lifecycle)。
* **删除通知：**
    * 既然开了 CloudTrail，CloudTrail 会把 API 调用发给 **EventBridge**。
    * 可以在 EventBridge 上建一个规则，匹配 `eventName: DeleteObject`。
    * 目标指向 **SNS** (发邮件)。
    * $→$ **选中 D** (EventBridge -> SNS)。
* **排除法：**
    * B: Access Logs 延迟高，且不好触发实时通知。
    * C: S3 直接发 SES？S3 Event Notification 不支持直接发 SES（支持 SNS/SQS/Lambda）。
    * E: Timestream 存日志太贵。
* **锁定 A, D, F。**

**3. ✅ 正确选项解析 (选项 A, D, F)**
* **CloudTrail Data Events:** 审计核心。
* **EventBridge:** 实时过滤敏感操作。
* **S3 Lifecycle:** 长期低成本存储日志。

**5. 📚 核心考点:** S3 数据操作审计与实时告警架构。