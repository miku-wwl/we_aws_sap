
#### 📝 [22/529] API Gateway 写入节流 (Throttling)

**1. 🕵️‍♂️ 题眼与约束分析**
* **现象：** PUT 请求报错增加，错误显示给客户，损害声誉。
* **原因：** 单个客户端发起了大量 PUT 请求（Bad Actor/Heavy User）。
* **业务特征：** "API is not critical" (非关键)，"Clients can tolerate retries" (可容忍重试)。
* **目标：** **Improve customer experience** (改善体验，即让其他正常客户不受影响)。

**2. ⚡ 秒杀思路**
* **关键词匹配：**
    * "Single client causing high load" + "Throttling" $\rightarrow$ **Usage Plans & Throttling (使用计划与限流)**。
    * "Errors showing to customers" $\rightarrow$ 需要在客户端处理 **429 Too Many Requests**。
* **排除法：**
    * 选项 A (Client Retry): 只是让客户端重试，不能解决服务器端被压垮的问题，甚至可能加剧风暴。
    * 选项 C (Caching): 缓存只对 GET 有效，题目说的是 **PUT** 请求（写入），缓存无效。
    * 选项 D (Lambda Reserved Concurrency): 这会限制并发，导致更多请求直接报错（Throttling），虽然保护了下游，但没解决“谁导致的问题”。且 Usage Plan 能针对 API Key 限流，更精准地限制那个捣乱的客户端。
    * **选项 B:** 通过 Usage Plan 限制特定 API Key 的速率，直接把那个刷接口的客户端限制住，保护其他人。同时让客户端处理 429 错误（不要报错给用户看，而是静默重试或提示忙），符合“改善体验”。
    * **锁定 B。**

**3. ✅ 正确选项解析 (选项 B)**
* **API Gateway Usage Plans:** 可以针对每个 API Key 设置 Rate Limit (RPS) 和 Burst。这是隔离“吵闹邻居”的标准做法。

**5. 📚 核心考点:** API Gateway 的多租户限流策略 (Usage Plans)。
