#### ğŸ“ [443/529] IoT æ•°æ®è½¬æ¢ä¸å…¥æ¹– (IoT Core + Kinesis + Lambda)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **æºï¼š** 10,000 sensors, continuous updatesã€‚
* **ç°çŠ¶ï¼š** On-prem app servers convert data -> DBã€‚ç»´æŠ¤å¯¼è‡´åœæœºä¸¢æ•°æ®ã€‚
* **ç›®æ ‡ï¼š** **Optimize operational overhead and cost**, Increase availabilityã€‚
* **æ–¹æ¡ˆï¼š** IoT Core + ?

**2. âš¡ ç§’æ€æ€è·¯**
* **æ•°æ®æµï¼š** IoT Core $â†’$ Kinesis Firehose $â†’$ S3ã€‚
* **æ•°æ®è½¬æ¢ (Raw to CSV/Parquet):**
    * **Lambda (B):** Kinesis Firehose æ”¯æŒè°ƒç”¨ Lambda è¿›è¡Œæ•°æ®è½¬æ¢ï¼ˆTransform Source Recordsï¼‰ã€‚
    * **Parquet vs CSV:** Parquet æ˜¯åˆ—å¼å­˜å‚¨ï¼Œé…åˆ Athena æŸ¥è¯¢æ€§èƒ½æ›´å¥½ã€æˆæœ¬æ›´ä½ï¼ˆæ‰«æé‡å°‘ï¼‰ã€‚CSV ä¹Ÿå¯ä»¥ï¼Œä½† Parquet æ˜¯æœ€ä½³å®è·µã€‚
* **æŸ¥è¯¢ï¼š**
    * **Athena (B/D):** Serverless æŸ¥è¯¢ S3 æ•°æ®ï¼Œæ— éœ€ç»´æŠ¤ DB å®ä¾‹ã€‚
    * Aurora (A/C): éœ€è¦ç»´æŠ¤ DBï¼Œä¸” Firehose å†™å…¥ Aurora æ¯”è¾ƒéº»çƒ¦ï¼ˆé€šå¸¸é€šè¿‡ Lambda æˆ– S3 Importï¼‰ã€‚Athena æ›´ç¬¦åˆ "Optimize overhead"ã€‚
* **B vs D:**
    * B ä½¿ç”¨ Firehose + Lambda è½¬æ¢ã€‚è¿™æ˜¯ Firehose çš„åŸç”ŸåŠŸèƒ½ã€‚
    * D ä½¿ç”¨ Kinesis Data Analytics (Managed Service for Apache Flink)ã€‚è™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†å¯¹äºç®€å•çš„æ ¼å¼è½¬æ¢ï¼ˆRaw to Parquetï¼‰ï¼ŒFirehose å†…ç½®çš„è½¬æ¢ï¼ˆæˆ– Glue è½¬æ¢ï¼‰æ›´è½»é‡ã€‚ä½† D é€‰é¡¹è¯´ "Use Managed Service for Apache Flink app to convert... store in S3"ã€‚è¿™å¼•å…¥äº† Flink åº”ç”¨çš„ç»´æŠ¤ã€‚Firehose æ˜¯å…¨æ‰˜ç®¡çš„"å‚»ç“œå¼"ç®¡é“ã€‚
    * æ›´é‡è¦çš„æ˜¯ï¼ŒFirehose æœ‰ä¸€ä¸ªç›´æ¥å°† JSON è½¬ Parquet çš„åŠŸèƒ½ï¼ˆæ— éœ€å†™ Lambda ä»£ç ï¼Œåªéœ€å®šä¹‰ Schemaï¼‰ã€‚ä½†é€‰é¡¹ B æåˆ°äº† Lambdaã€‚å¦‚æœéœ€è¦è‡ªå®šä¹‰é€»è¾‘ï¼ŒLambda ä¹Ÿå¯ä»¥ã€‚
    * **Parquet (B/D)** ä¼˜äº **CSV (A/C)**ã€‚
    * **Firehose (B)** vs **Flink (D)**: Firehose æ˜¯æ•°æ®ä¼ è¾“å·¥å…·ï¼ŒFlink æ˜¯æµè®¡ç®—å·¥å…·ã€‚é¢˜ç›®åªæ˜¯"è½¬æ¢æ ¼å¼å¹¶å­˜å‚¨"ï¼ŒFirehose æ›´å¯¹å£ã€‚
    * **é”å®š Bã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B)**
* **Kinesis Firehose:** ç¼“å†²å¹¶æŠ•é€’æ•°æ®åˆ° S3ã€‚
* **Lambda Transformation:** æ ¼å¼è½¬æ¢ã€‚
* **Parquet + Athena:** ä½æˆæœ¬æ•°æ®æ¹–æŸ¥è¯¢ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** IoT æ•°æ® ETL å…¥æ¹–çš„ Serverless æ¶æ„ã€‚