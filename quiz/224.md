#### ğŸ“ [224/529] ECR é•œåƒæ‰«æä¸è‡ªåŠ¨ä¿®å¤ (EventBridge)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **åœºæ™¯ï¼š** ECR å­˜å‚¨å®¹å™¨é•œåƒã€‚
* **è§¦å‘ï¼š** ä¸Šä¼ æ–°é•œåƒ (Push)ã€‚
* **éœ€æ±‚ï¼š**
    1.  Check for vulnerabilities (CVE) -> **Image Scanning**ã€‚
    2.  **Automatically delete** tags if Critical/High severity (è‡ªåŠ¨åˆ é™¤æ ‡ç­¾)ã€‚
    3.  **Notify** dev team (é€šçŸ¥)ã€‚
* **å·¥å…·ï¼š** ECR Image Scanningã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **äº‹ä»¶é©±åŠ¨æµç¨‹ï¼š**
    * ECR æ‰«æå®Œæˆä¼šäº§ç”Ÿ **EventBridge** äº‹ä»¶ (`ECR Image Scan` with status `COMPLETE`)ã€‚
    * $\\rightarrow$ **é€‰ä¸­ A æˆ– C** (C è¯´ Lambda å®šæ—¶æ‰«æï¼Œé”™ï¼Œåº”è¯¥æ˜¯ Push è§¦å‘)ã€‚
* **å¤„ç†é€»è¾‘ï¼š**
    * EventBridge è§¦å‘ **Step Functions (A)** æˆ– **Lambda (C)**ã€‚
    * é¢˜ç›®è¦æ±‚ "Scan on push"ã€‚ECR é…ç½® "Scan on push" æ˜¯åŸç”ŸåŠŸèƒ½ã€‚
    * é€‰é¡¹ A: "Configure scan on push... EventBridge invokes Step Functions... Delete tag... Notify via SNS"ã€‚æµç¨‹å®Œç¾ã€‚
    * é€‰é¡¹ B: "Push scan results to SQS"? ECR æ‰«æç»“æœä¸ä¼šè‡ªåŠ¨è¿› SQSï¼Œæ˜¯å‘ EventBridgeã€‚
    * é€‰é¡¹ D: "Scheduled image scanning"? é¢˜ç›®æ˜¯ "When new image is uploaded"ã€‚
* **é”å®š Aã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ A)**
* **Scan on Push:** ECR åŸç”ŸåŠŸèƒ½ã€‚
* **EventBridge Rule:** ç›‘å¬æ‰«æå®Œæˆäº‹ä»¶ã€‚
* **Step Functions:** ç¼–æ’åˆ é™¤å’Œé€šçŸ¥é€»è¾‘ï¼ˆæ¯”å•ä½“ Lambda æ›´æ¸…æ™°ï¼Œæ˜“äºé‡è¯•ï¼‰ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** ECR æ‰«æç»“æœçš„è‡ªåŠ¨åŒ–å“åº” (EventBridge)ã€‚