
---

#### 📝 [32/529] SCP 策略生效机制 (图片题)

**1. 🕵️‍♂️ 题眼与约束分析**
* **图片内容：** 一个 SCP，里面显式允许了 EC2, DynamoDB, S3 (`Allow` Effect)。
* **问题：** 部署后，开发人员**仍然可以使用**其他服务（如 Lambda, RDS）。为什么？怎么解决？
* **核心原理：** AWS Organizations 默认会在所有 OU/账户上绑定一个名为 **`FullAWSAccess`** 的 SCP（允许所有操作）。

**2. ⚡ 秒杀思路**
* **SCP 评估逻辑：** SCP 是过滤器。最终权限 = `FullAWSAccess` (Allow *) **+** `New_SCP` (Allow X,Y,Z)。
    * **并集结果：** 依然是 Allow *。因为新的 SCP 只是增加了一个“允许”，并没有“拒绝”其他服务（SCP 中没有隐式拒绝，隐式拒绝是 IAM 的概念。SCP 如果不写 Deny，且存在其他 Allow，则通过）。
    * **修正概念：** 准确说是“交集”逻辑，但在 SCP 层面，只有当**没有任何 SCP 允许**时，才是拒绝。只要有一个 SCP 说 Allow *，你就拥有全权限。
* **秒杀动作：**
    * 要让“只允许 X, Y, Z”生效，必须**移除**那个默认的“允许所有”的 SCP。
    * 一旦移除 `FullAWSAccess`，剩下的只有你的自定义 SCP。此时，没写在自定义 SCP 里的服务（如 Lambda）就没有被显式允许，从而被拒绝。
    * **锁定 B。**

**3. ✅ 正确选项解析 (选项 B)**
* **白名单模式：** 在 Organizations 中实施白名单的唯一方法是：1. 绑定自定义的 Allow List SCP；2. **解绑 (Detach)** 默认的 `FullAWSAccess` SCP。

**4. ❌ 错误选项排查**
* **选项 A (显式拒绝):** 虽然可行，但你要列出成百上千个“其他服务”来拒绝，维护成本极高。
* **选项 C (修改 FullAccess):** 这是一个 AWS 托管策略，你改不了。
* **选项 D (通配符拒绝):** 如果你在末尾加 `Deny *`，那前面的 Allow 也全废了（Explicit Deny wins）。

**5. 📚 核心考点：** SCP 的 Allow List 实现步骤（必须 Detach 默认策略）。
