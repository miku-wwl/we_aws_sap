#### 📝 [440/529] 大规模 VPC 全互联 (TGW)

**1. 🕵️‍♂️ 题眼与约束分析**
* **规模：** 50 VPCs (Growing)。
* **需求：**
    1.  All 50 VPCs talk to each other (全互联)。
    2.  Each Customer VPC -> Management VPC (单向/受控访问)。
* **选择：** 2 个步骤。

**2. ⚡ 秒杀思路**
* **全互联架构：**
    * 50 个 VPC 全互联，Peering (B) 是 $N*(N-1)/2$，几千个连接，不可行。
    * **Transit Gateway (A):** 专门解决大规模 VPC 互联。一个 TGW，所有 VPC 连上来，默认路由表就能实现全互联。 $→$ **选中 A**。
* **管理 VPC 访问：**
    * TGW 本身解决了连通性。
    * 具体的访问控制（单向访问）可以通过 **Security Groups** 或 **NACL** 或 TGW 路由表来实现。
    * 选项 C (PrivateLink): "Create NLB... PrivateLink Endpoint Service... for Management VPC"。
        * 如果管理 VPC 只是提供"许可证验证"服务，且只需要单向访问（客户 -> 管理），**PrivateLink** 是最佳选择。它避免了网络层面的完全打通（重叠 IP 也不怕），且安全性更高（服务发布）。
        * 题目说 "New feature requires ALL 50 VPCs to communicate with EACH OTHER"。这必须用 **TGW**。
        * 题目还说 "Also requires access from each customer VPC to Management VPC"。如果 TGW 已经全互联了，这一步自然满足。
        * **但是，** 选项 A 只是建了 TGW。选项 B 是 Peering。选项 D 是 VPN。选项 E 是 Peering。
        * 必须选 A。
    * **第二个选项选什么？**
    * 如果 TGW 解决了全互联。那么 "Access to Management VPC" 怎么做？
    * 选项 C 提到了 **PrivateLink**。
    * "Management VPC hosts a compute resource for license validation"。这是一个典型的 **Shared Service** 场景。
    * 虽然 TGW 能通，但如果为了解耦和安全（或者管理 VPC 是独立的），PrivateLink 也是一种很好的模式。
    * **但是，** 题目说 "All 50 VPCs communicate with EACH OTHER"。这意味着 TGW 是必须的。
    * 如果选了 A，VPC 已经互通了。
    * 难道是 A + C？
    * 如果选 A，所有 VPC 连到 TGW，路由表配好，就能互通。
    * 如果选 C，用 PrivateLink 连管理服务。
    * 这两个并不冲突，可能是混合架构？
    * **或者，** 题目中的 "All 50 VPCs communicate with each other" 是指 Customer VPCs 之间？是的。
    * 而 "Customer -> Management" 是另一条线。
    * **让我们再看选项：**
    * A: Create TGW, attach all VPCs. (解决全互联)。
    * B: Peering. (错)。
    * C: PrivateLink for License Service. (解决管理访问，且 Least Overhead，无需处理路由冲突和安全组复杂性)。
    * D/E: VPN/Peering. (错)。
    * **结论：** **A + C** 是最合理的组合。TGW 处理多对多流量，PrivateLink 处理指向共享服务的流量（最佳实践）。
    * **锁定 A, C。**

**3. ✅ 正确选项解析 (选项 A, C)**
* **TGW:** 解决 VPC 间全互联。
* **PrivateLink:** 解决对共享服务的安全、单向访问。

**5. 📚 核心考点:** TGW 与 PrivateLink 的混合组网策略。