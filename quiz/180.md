#### 📝 [180/529] REST API 缓冲 (API Gateway + SQS)

**1. 🕵️‍♂️ 题眼与约束分析**
* **输入：** RESTful API (Millions of devices)。
* **流量：** **Unpredictable bursts** (不可预测的突发)。
* **约束：** **Data loss is unacceptable** (不能丢数据) -> 必须缓冲。
* **目标：** Process all data。

**2. ⚡ 秒杀思路**
* **架构模式：** 面对突发流量且不能丢数据，必须在 API 和处理逻辑之间加 **Queue (SQS)**。
* **实现方式：**
    * **API Gateway** 可以直接集成 **SQS** (Service Integration)，无需中间 Lambda。这是最稳健的"削峰填谷"模式。
* **选项对比：**
    * 选项 A (ALB -> SQS?): ALB 目标组不支持 SQS。ALB 只能指 EC2/Lambda/IP。错。
    * 选项 C (EC2 ASG): EC2 处理突发流量启动慢，可能会丢请求（如果队列表满或连接超时）。不如 SQS 缓冲稳。
    * 选项 D (Kinesis + CloudFront): CloudFront 不能直接写 Kinesis（需要 Lambda@Edge 或 API Gateway）。且 Kinesis 虽然也能缓冲，但 HTTP API + SQS 是更标准的 REST 接口实现。
    * **选项 B:** API Gateway HTTP API (便宜) $\\rightarrow$ 集成 SQS $\\rightarrow$ Lambda 消费。这是处理 REST 突发流量的黄金标准。
    * **锁定 B。**

**3. ✅ 正确选项解析 (选项 B)**
* **API Gateway + SQS Integration:** 高可用缓冲层，保护后端，防止数据丢失。

**5. 📚 核心考点:** API Gateway 直接集成 AWS 服务 (SQS) 的模式。