
---

#### 📝 [27/529] DynamoDB 无服务器 API (双选)

**1. 🕵️‍♂️ 题眼与约束分析**
* **目标：** 公开 API 访问 DynamoDB。
* **架构：** Serverless + Auto Scaling + HTTPS。
* **选择：** 两个选项。

**2. ⚡ 秒杀思路**
* **模式 1 (直连):** API Gateway 可以直接集成 AWS 服务（DynamoDB），不需要中间的 Lambda。这减少了延迟和成本。
    * **选项 A (REST API + AWS Integration):** 支持 VTL 转换，是很成熟的直连方案。
    * **选项 B (HTTP API + AWS Integration):** HTTP API 也可以直连，但在早期的考试题库中，REST API 的 AWS 集成被视为“标准答案”。不过现在两者都行。但让我们看其他选项。
* **模式 2 (代理):** API Gateway $\rightarrow$ Lambda $\rightarrow$ DynamoDB。这是最通用的模式，逻辑处理灵活。
    * **选项 C (HTTP API + Lambda):** 完全合法的 Serverless 架构，且 HTTP API 比 REST API 便宜。
* **排除法：**
    * 选项 D (Global Accelerator + Lambda@Edge): GA 不能直接触发 Lambda@Edge（L@E 只能由 CloudFront 触发），且 L@E 访问 DDB 网络延迟较高（通常不推荐作为主要 API 后端）。
    * 选项 E (NLB): NLB 转发 Lambda 需要复杂的 Target Group 配置，且 NLB 本身不是纯 Serverless（有每小时固定费），通常用于高性能 TCP/UDP，不是 HTTPS API 的首选。
* **争议点 A vs B vs C:**
    * 题目问 "Which solutions" (复数)。通常一个是直连，一个是代理。
    * **选项 C** (HTTP API + Lambda) 肯定对。
    * **选项 A** (REST API + AWS Integration) 肯定对。
    * **选项 B** (HTTP API + AWS Integration) HTTP API 的 AWS 集成功能较弱（不支持 VTL 转换），如果你需要把 API 请求体转换成 DynamoDB 的 JSON 格式，HTTP API 很难做（通常只能直通）。REST API 有强大的 Mapping Template。所以 **A 比 B 更好**。
    * **结论：** 选 A 和 C。

**3. ✅ 正确选项解析 (选项 A, C)**
* **A:** 利用 API Gateway (REST) 的 VTL 模板直接转换请求到 DynamoDB，去掉了 Lambda 层，极致 Serverless。
* **C:** 标准的 API Gateway (HTTP) + Lambda 模式，简单通用。

**5. 📚 核心考点:** API Gateway 集成模式 (Service Proxy vs Lambda Proxy)。
