#### ğŸ“ [216/529] é›†ä¸­å¼å‡ºç«™æµé‡è¿‡æ»¤ (Network Firewall + TGW)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **è§„æ¨¡ï¼š** > 100 Accounts, TGW routingã€‚
* **éœ€æ±‚ï¼š** Centralized management of outbound filtering (é›†ä¸­ç®¡ç†å‡ºç«™è¿‡æ»¤)ã€‚
* **æµé‡ï¼š** < 25 Gbps per AZã€‚
* **å·¥å…·ï¼š** Rule-based filtering (åŸºäºè§„åˆ™çš„è¿‡æ»¤)ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **é›†ä¸­å¼æ¶æ„ï¼š**
    * åˆ›å»ºä¸€ä¸ªä¸“é—¨çš„ **Egress VPC** (å‡ºç«™ VPC)ã€‚
    * å°† TGW è¿æ¥åˆ°è¿™ä¸ª Egress VPCã€‚
    * æ‰€æœ‰ä¸šåŠ¡ VPC çš„ `0.0.0.0/0` æŒ‡å‘ TGWï¼ŒTGW æŒ‡å‘ Egress VPCã€‚
* **è¿‡æ»¤å·¥å…·ï¼š**
    * **AWS Network Firewall (B):** AWS æ‰˜ç®¡çš„ç½‘ç»œé˜²ç«å¢™ï¼Œæ”¯æŒ Suricata è§„åˆ™ï¼Œæ”¯æŒåŸŸåè¿‡æ»¤ï¼Œæ€§èƒ½å¥½ï¼ˆè‡ªåŠ¨æ‰©å±•ï¼Œæ”¯æŒ 100Gbps+ï¼‰ã€‚
    * **EC2 Proxy/Squid (A/D):** éœ€è¦ç»´æŠ¤ EC2 ASGï¼Œæ‰“è¡¥ä¸ï¼Œé«˜å¯ç”¨é…ç½®å¤æ‚ã€‚Network Firewall æ˜¯æ‰˜ç®¡çš„ï¼Œè¿ç»´æ›´å°‘ã€‚
    * **åˆ†å¸ƒå¼éƒ¨ç½² (C/D):** "In each AWS account"ã€‚100ä¸ªè´¦æˆ·éƒ¨ç½²100ä¸ªé˜²ç«å¢™ï¼Ÿç®¡ç†å’Œæˆæœ¬éƒ½æ˜¯ç¾éš¾ã€‚é¢˜ç›®è¦æ±‚ "Centrally manage"ã€‚
* **è·¯ç”±é…ç½®ï¼š**
    * åœ¨ Egress VPC ä¸­ï¼Œé€šè¿‡ **Gateway Load Balancer Endpoint** (Network Firewall åº•å±‚æ˜¯ GWLB) æˆ–è€…ç›´æ¥è·¯ç”±åˆ° Firewall Endpoint æ¥æ¸…æ´—æµé‡ã€‚
    * é€‰é¡¹ B æè¿°äº†ï¼šNew VPC + TGW + NAT GW + **AWS Network Firewall**ã€‚è¿™æ˜¯æ ‡å‡†çš„é›†ä¸­å¼å‡ºå£æ¶æ„ã€‚
    * **é”å®š Bã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B)**
* **Centralized Egress VPC:** æµé‡æ±‡èšç‚¹ã€‚
* **AWS Network Firewall:** æ‰˜ç®¡çš„ä¸‹ä¸€ä»£é˜²ç«å¢™ (NGFW)ï¼Œæä¾›æ·±åŒ…æ£€æµ‹å’ŒåŸŸåè¿‡æ»¤ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** ä¼ä¸šçº§é›†ä¸­å¼äº’è”ç½‘å‡ºå£æ¶æ„ (TGW + Network Firewall)ã€‚