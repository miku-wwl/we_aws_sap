
---

#### 📝 [40/529] S3 流量成本优化 (Gateway Endpoint)

**1. 🕵️‍♂️ 题眼与约束分析**
* **架构：** 私有子网 EC2 $\rightarrow$ NAT Gateway $\rightarrow$ S3。
* **流量：** 每天 1 TB。
* **痛点：** 成本高（NAT Gateway 处理流量费很贵，$0.045/GB * 1000GB * 30天 = $1350/月）。
* **约束：** **Minimize cloud spend** (降低开销) + **No reduction in security** (不降安全)。

**2. ⚡ 秒杀思路**
* **关键词匹配：**
    * "EC2 in private subnet accessing S3" + "High NAT cost" $\rightarrow$ **S3 Gateway VPC Endpoint**。
* **优势：**
    * **免费：** Gateway Endpoint 本身免费，且不产生流量处理费。
    * **安全：** 流量完全在 AWS 内网，不经过 NAT，且支持 Endpoint Policy 控制权限。
* **秒杀动作：**
    * 选项 A (NAT Instance): 虽然比 NAT Gateway 便宜点，但性能差，还是要钱，且运维麻烦。
    * 选项 B (Move to Public): 违反“不降低安全性”。
    * 选项 D (EFS): EFS 比 S3 贵多了，存 1TB 图片是天价。
    * **选项 C:** 设置 S3 Gateway Endpoint。这是教科书式的优化方案。
    * **锁定 C。**

**3. ✅ 正确选项解析 (选项 C)**
* **Gateway Endpoint:** 专用于 S3 和 DynamoDB。它是路由表层面的通过，不经过任何网关设备，零成本。

**5. 📚 核心考点:** VPC Endpoint (Gateway Type) 的成本优势。
