#### 📝 [122/529] IoT 数据解析与分析 (Fargate vs Glue)

**1. 🕵️‍♂️ 题眼与约束分析**
* **数据源：** 不同供应商的 IoT 传感器 (Vendor-proprietary format)。
* **现状：** 遗留应用解析为 JSON $→$ DB。每天一次。
* **需求：** **Faster delivery** (更快) + **Optimize costs** (优化成本)。

**2. ⚡ 秒杀思路**
* **架构重构：** 既然传感器已经发数据给 Legacy App 了，我们可以拦截这个流。
    * **选项 A (IoT Core):** 需要将传感器"连接"到 IoT Core。这涉及到修改固件/配置，可能很难（Proprietary format 可能不兼容 MQTT）。
    * **选项 B (Fargate + Redshift):** 将 Legacy App 容器化 (Fargate) 是一种优化，但仍是"每天一次"批处理？或者实时？Redshift 存 JSON 没问题，但成本不低。
    * **选项 C (Transfer for SFTP + Glue + Athena):**
        * 题目说 "Sensors send status info"。如果是文件形式，SFTP 很合适。
        * 如果是数据流，SFTP 不合适。
        * 题目说 "Legacy application... parses info into JSON"。
    * **再读题：** "Sensors send status info... in proprietary format... Application parses... stores in database".
    * 这里的痛点是：**Legacy App** 解析慢，**Relational DB** 存 JSON 分析慢。
    * 题目问的是 "Design a NEW data analytics solution"。
    * 让我们看 **A**: "Connect IoT sensors to AWS IoT Core"。这是最彻底的云原生化。通过 Rules Engine 触发 Lambda 解析，存 S3 (CSV)，然后 Glue + Athena 分析。这是最标准的 Serverless IoT 分析流。虽然可能需要适配传感器协议，但这通常是"新方案"的必经之路。
    * **C**: 也是一种路子（SFTP），但前提是传感器支持 SFTP。A (IoT Core) 支持 HTTP/MQTT 等，兼容性更广。
    * **B**: Fargate 只是换了个计算平台，Redshift 分析 JSON 不如 Athena/S3 Data Lake 灵活低成本。
    * **关键点：** "Faster delivery"。IoT Core 是实时的。Lambda 解析是实时的。S3 + Athena 是即席查询的。这比"每天一次"快多了。
    * **锁定 A。**

**3. ✅ 正确选项解析 (选项 A)**
* **IoT Core + Lambda:** 实现实时摄取和解析。
* **S3 + Athena:** 构建低成本数据湖，取代昂贵的关系型数据库。

**5. 📚 核心考点:** Serverless IoT 分析管道架构。