#### ğŸ“ [457/529] å¤§è§„æ¨¡å›¾åƒå½’æ¡£åˆ° S3 (DataSync + Glacier Deep Archive)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **æºï¼š** On-prem NFS, Millions of 1MB images, batched into 1GB files.
* **å­˜å‚¨ï¼š** No local capacity (æœ¬åœ°æ»¡äº†)ã€‚
* **éœ€æ±‚ï¼š**
    1.  Archive to AWS (å½’æ¡£)ã€‚
    2.  Retrieve within **1 week** (RTO å®½æ¾)ã€‚
    3.  **Bandwidth limit** & **Schedule** (å¸¦å®½é™åˆ¶ + å®šæ—¶)ã€‚
    4.  **Most cost-effective**ã€‚
    5.  Connection: 10Gbps DX.
    6.  Compute: Hyper-V available.

**2. âš¡ ç§’æ€æ€è·¯**
* **ä¼ è¾“å·¥å…·ï¼š**
    * **AWS DataSync (A/B/C):** æ”¯æŒ NFS æºï¼Œæ”¯æŒ **Bandwidth Throttling** (å¸¦å®½é™åˆ¶) å’Œ **Scheduling** (å®šæ—¶)ã€‚æ€§èƒ½é«˜ã€‚
    * Storage Gateway Tape (D): ç£å¸¦ç½‘å…³ä¹Ÿå¯ä»¥ï¼Œä½†ç®¡ç†è™šæ‹Ÿç£å¸¦åº“æ¯”è¾ƒéº»çƒ¦ï¼Œä¸” DataSync ç›´æ¥å­˜å¯¹è±¡æ›´çµæ´»ã€‚
* **éƒ¨ç½²æ–¹å¼ï¼š**
    * é¢˜ç›®è¯´ "Has Hyper-V environment and compute capacity available"ã€‚
    * DataSync Agent å¯ä»¥éƒ¨ç½²ä¸º **Hyper-V VM (B)**ã€‚è¿™æ ·ä¸éœ€è¦åœ¨ AWS å¼€ EC2 å®ä¾‹ï¼ˆçœé’±ï¼Œä¸” DataSync ä¼ è¾“æ˜¯æ¨æ¨¡å¼ï¼ŒAgent ç¦»æºæ•°æ®è¿‘æ›´å¥½ï¼‰ã€‚
    * A/C å»ºè®® "Deploy DataSync Agent on new EC2 instance"ã€‚è¿™æ˜¯é”™çš„ã€‚DataSync Agent å¿…é¡»éƒ¨ç½²åœ¨**æºç«¯ç½‘ç»œ**ï¼ˆæœ¬åœ°ï¼‰ï¼Œæˆ–è€…é€šè¿‡ VPC è®¿é—®ã€‚å¦‚æœéƒ¨ç½²åœ¨ EC2ï¼Œéœ€è¦æŒ‚è½½æœ¬åœ° NFSï¼ˆé€šè¿‡ DXï¼‰ï¼Œè¿™å¢åŠ äº†å»¶è¿Ÿå’Œå¤æ‚æ€§ã€‚é€šå¸¸ Agent éƒ¨ç½²åœ¨æœ¬åœ°ã€‚
* **å­˜å‚¨ç±»åˆ«ï¼š**
    * RTO < 1 week $â†’$ **Glacier Deep Archive** (12-48h å–å›)ã€‚è¿™æ˜¯æœ€ä¾¿å®œçš„å­˜å‚¨ã€‚
    * DataSync æ”¯æŒç›´æ¥å†™å…¥ S3 å¯¹åº”çš„å­˜å‚¨ç±»ï¼ˆæˆ–è€…é€šè¿‡ Lifecycleï¼‰ã€‚
    * **é€‰é¡¹ B:** DataSync Agent on Hyper-V -> **Glacier Deep Archive**ã€‚
    * **é€‰é¡¹ C:** DataSync -> S3 Standard -> Lifecycle to Deep Archiveã€‚å¤šäº†ä¸€æ­¥è½¬æ¢ï¼ŒS3 Standard å­˜ä¸€å¤©ä¹Ÿæœ‰è´¹ç”¨ï¼ˆæœ€å°å­˜å‚¨æœŸé™é—®é¢˜ï¼ŸStandard æ²¡æœ‰ï¼Œä½† Deep Archive æœ‰ã€‚ä¸è¿‡ç›´æ¥å­˜ Deep Archive æœ€çœäº‹ï¼‰ã€‚
    * **å…³é”®ï¼š** DataSync ç°åœ¨çš„ç¡®æ”¯æŒç›´æ¥å†™å…¥å„å±‚çº§ã€‚ç›´æ¥å†™å…¥ Deep Archive æœ€çœé’±ã€‚
    * ä¸” B é€‰é¡¹åˆ©ç”¨äº†æœ¬åœ° Hyper-V èµ„æºï¼Œä¸éœ€è¦å¼€ EC2ã€‚
    * **é”å®š Bã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B)**
* **DataSync on Hyper-V:** åˆ©ç”¨æœ¬åœ°èµ„æºéƒ¨ç½² Agentã€‚
* **Glacier Deep Archive:** æœ€ä½æˆæœ¬å½’æ¡£å­˜å‚¨ã€‚
* **Scheduling & Throttling:** DataSync åŸç”ŸåŠŸèƒ½æ»¡è¶³ç½‘ç»œè¦æ±‚ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** DataSync çš„éƒ¨ç½²ä½ç½®ä¸å½’æ¡£å­˜å‚¨é€‰æ‹©ã€‚