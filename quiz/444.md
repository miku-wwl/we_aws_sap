#### 📝 [444/529] Web 应用数据库性能瓶颈排查 (Read Replica + Health Check)

**1. 🕵️‍♂️ 题眼与约束分析**
* **故障：** Outage (中断)。ASG 不断替换实例。
* **原因：** **Database layer load was high** (数据库负载高) -> Query response slow。
* **Web 指标：** Normal (正常)。
* **ASG 行为：** 替换实例。因为 ALB 健康检查失败（指向产品目录页，涉及 DB 查询）。
* **目标：** Address issues, Improve availability & monitoring。
* **选择：** 2 个步骤。

**2. ⚡ 秒杀思路**
* **解决数据库负载 (A/E):**
    * 数据库读负载高导致响应慢。
    * **Read Replica (A):** 增加读副本，分担读流量。
    * ElastiCache (E): 增加缓存。
    * 两者都行。但 A 提到了 "Use single reader endpoint"。这简化了应用配置。
* **解决 ASG 误杀 (B/C):**
    * ASG 替换实例是因为 ALB 健康检查失败。
    * 检查失败是因为它查库了（Product Catalog）。
    * **解耦健康检查 (B):** 将 ALB 健康检查改为 **Simple HTML page** (Deep Health Check vs Shallow Health Check)。这样数据库慢不会导致 Web 服务器被 ASG 杀掉（Web 服务器本身是好的，只是依赖慢）。
    * **监控完整功能:** 使用 **Route 53 Health Check** 监控产品页面（Deep Check），如果挂了发报警，而不是让 ASG 瞎折腾。
* **选项对比：**
    * A: Read Replica 解决负载。
    * B: 分离健康检查，防止级联故障。
    * C: TCP Check? 不如 HTTP 检查准确。
    * D: CloudWatch Alarm for RDS? 只是报警，不解决 ASG 误杀问题。
    * E: ElastiCache 是个好主意，但 A/B 组合更针对"ASG 误杀"这个具体的故障现象。
    * **关键逻辑：** 故障是因为数据库慢 -> 健康检查超时 -> ASG 杀实例 -> 新实例冷启动 -> 数据库更慢（雪崩）。
    * 必须打断这个循环。**B** (Shallow Health Check) 是关键。
    * **A** (Read Replica) 解决根本的数据库性能问题。
    * **锁定 A, B。**

**3. ✅ 正确选项解析 (选项 A, B)**
* **Read Replica:** 扩展数据库读能力。
* **Shallow Health Check:** 防止因依赖服务（DB）故障导致 Web 层被错误回收。

**5. 📚 核心考点:** 级联故障（Cascading Failure）的预防与健康检查策略。