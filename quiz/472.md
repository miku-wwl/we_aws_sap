#### 📝 [472/529] 跨区域数据库灾备 (RPO 2h, RTO 15m)

**1. 🕵️‍♂️ 题眼与约束分析**
* **数据库：** RDS for PostgreSQL。
* **RTO:** 15 mins。
* **RPO:** 2 hours。
* **选择：** 2 个步骤。

**2. ⚡ 秒杀思路**
* **数据库恢复策略：**
    * **方案 1 (Snapshot Copy - C/E):** RPO 2小时允许丢失数据。可以每2小时复制一次快照/备份。
        * C: Lambda 每2小时复制自动备份。
        * E: Hot standby DB? 恢复到最新自动备份？
    * **方案 2 (Read Replica - A):** 跨区域只读副本。数据实时同步（RPO~0）。故障时提升副本（RTO < 15m）。
    * 题目 RPO 2小时是一个宽松指标。RR 肯定满足。Snapshot 也可以。
    * 但是 RR 需要一直开着实例（成本高）。Snapshot 便宜。
    * 题目没说 "Most cost-effective"。只说 "Produce a highly available architecture meeting requirements"。
    * **Read Replica (A)** 是实现高可用和快速 RTO 的标准方法。提升副本（Promote）通常只需几分钟。
    * **快照恢复 (B/E)** 通常比较慢（创建实例需要时间，数据预热需要时间），RTO 15 分钟可能有点紧（取决于数据量）。
    * 且 A 配合 Lambda 自动提升，是一个完整的 DR 方案。
    * **DNS 切换 (D):**
        * **Route 53 Failover Routing Policy**。
        * Primary 指向主库（或主区域的应用层）。Secondary 指向备库（或备区域应用）。
        * D 选项说 "Create failover routing policy for **database DNS record**"。通常应用连数据库是用 CNAME。如果用 Route 53 做数据库故障转移，TTL 是个问题，但可行。
    * **对比 A 和 B/C:**
        * A (Read Replica) 是最稳健的 RTO 保证。
        * D (Route 53 Failover) 是流量切换机制。
        * **A + D** 是经典组合吗？
        * 通常数据库故障转移由应用层处理（连接串变更），或者由 RDS 自身（如 Aurora Global DB）处理。Route 53 对 RDS 的 Failover 比较少见（因为 RDS Endpoint 是 DNS Name，CNAME 指向 CNAME？）。
        * **让我们看 A:** "Configure Lambda... to promote read replica"。提升后，副本变成主库，有新的 Endpoint（或者如果是 Global DB 是一样的？不，普通 RR 提升后是新实例）。应用需要更新连接串。
        * **D 选项** 建议用 Route 53 来管理这个连接串（应用连 `db.example.com`，R53 指向 RDS Endpoint）。当故障时，R53 切到备库 Endpoint。这是可行的。
        * **结论：** **A (准备数据)** + **D (切换流量)**。
    * **锁定 A, D。**

**3. ✅ 正确选项解析 (选项 A, D)**
* **Read Replica:** 满足 RTO/RPO 的数据同步。
* **Route 53 Failover:** 实现数据库端点的自动/手动切换。

**5. 📚 核心考点:** 跨区域 RDS 灾备的架构设计（副本+DNS）。