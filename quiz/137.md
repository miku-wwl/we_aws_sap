#### ğŸ“ [137/529] è·¨è´¦æˆ·åŠ å¯† S3 è®¿é—® (KMS Policy)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **åœºæ™¯ï¼š** Strategy è´¦æˆ· (IAM Role) $\\rightarrow$ Creative è´¦æˆ· (S3 + Custom KMS Key)ã€‚
* **æ•…éšœï¼š** Access Deniedã€‚
* **åŸå› ï¼š** è·¨è´¦æˆ·è®¿é—®åŠ å¯†å¯¹è±¡ï¼Œéœ€è¦ S3 æƒé™ + KMS æƒé™ã€‚
* **ç›®æ ‡ï¼š** **Least privilege**ã€‚
* **é€‰æ‹©ï¼š** 3 ä¸ªæ­¥éª¤ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **æƒé™ä¸‰è¦ç´ ï¼š**
    1.  **S3 Bucket Policy:** å…è®¸ Strategy Role è¯»å–ã€‚
        * $\\rightarrow$ **é€‰ä¸­ A** (Principal: Strategy Account ID/Role ARN)ã€‚D (Anonymous) æ˜¯å¤§å¿Œã€‚
    2.  **KMS Key Policy:** å…è®¸ Strategy Role ä½¿ç”¨å¯†é’¥è§£å¯†ã€‚
        * KMS å¯†é’¥åœ¨ Creative è´¦æˆ·ï¼Œå¿…é¡»åœ¨ Key Policy ä¸­æ˜¾å¼å…è®¸ Strategy Roleï¼ˆè·¨è´¦æˆ·å¿…é¡»ä¸¤ç«¯éƒ½å…è®¸ï¼‰ã€‚
        * $\\rightarrow$ **é€‰ä¸­ C** (Grant decrypt permission to Strategy Role)ã€‚
    3.  **IAM Role Policy (Strategy):** Role è‡ªèº«è¦æœ‰æƒé™è®¿é—® S3 å’Œ KMSã€‚
        * $\\rightarrow$ **é€‰ä¸­ F** (Update Strategy Role to allow S3 read and KMS decrypt)ã€‚
* **æ’é™¤æ³•ï¼š**
    * B (Full permissions): è¿åæœ€å°æƒé™ã€‚
    * E (Encrypt permission): Strategy åªæ˜¯è¯»å– (View objects)ï¼Œä¸éœ€è¦åŠ å¯†æƒé™ã€‚

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ A, C, F)**
* **Cross-Account Encryption Access:** ç»å…¸çš„ IAM + Bucket Policy + Key Policy ä¸‰è§’å…³ç³»ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** è·¨è´¦æˆ· KMS åŠ å¯†å¯¹è±¡è®¿é—®æ’é”™ã€‚