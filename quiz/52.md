
---

#### 📝 [52/529] CloudFront 多区域容灾 (Global Accelerator 陷阱)

**1. 🕵️‍♂️ 题眼与约束分析**
* **现状：** CloudFront $\rightarrow$ ALB (单区域) + Route 53 A记录。
* **目标：** **High Availability and Fault Tolerance** (高可用与容错)。
* **架构：** 需要引入 **Secondary Region** (备用区域)。

**2. ⚡ 秒杀思路**
* **方案 A (Route 53 Failover):** Route 53 监控主 CF 分发，挂了切备用 CF 分发。这是标准的 DNS 级故障转移。简单有效。
    * ⚠️ **注意：** CloudFront 自带 Origin Group 功能（上题刚考过），但在这种完全独立的“双栈”架构中（两个 CF 分发，两个 ALB），Route 53 Failover 也是一种经典做法。
* **方案 B (CloudFront Origin Group):** 一个 CloudFront 分发，两个 Origin (主/备)。这是最推荐的现代做法。但选项 B 描述的是 "Create a second origin... update CloudFront distribution"。如果这是指 Origin Group，那是最好的。
* **方案 D (Global Accelerator + CloudFront):** **这是典型的反模式**。
    * CloudFront 已经是全球边缘接入了，前面再加个 Global Accelerator (GA) 是多此一举（GA 的 IP 是 Anycast，CF 的 IP 也是 Anycast）。而且 GA 不能直接把 CloudFront 分发作为 Endpoint（GA 只能指 IP 或 ALB/EC2）。
* **回头看 A vs B:**
    * 选项 A: 两个 CloudFront 分发。这意味着你有两个不同的域名（或需要复杂的 CNAME 切换）。不如一个分发体验好。
    * 选项 B: **同一个 CloudFront 分发**，配置 **Primary Origin** 和 **Secondary Origin** (这就是 Origin Group 的配置方式)。当主源（主区域 ALB）挂了，CF 自动切备用源。这是最无缝的。
    * **锁定 B。**

**3. ✅ 正确选项解析 (选项 B)**
* **CloudFront Origin Failover:** 在一个分发内配置主备源，对客户端完全透明，且利用了 AWS 骨干网。

**5. 📚 核心考点:** CloudFront 源站故障转移配置 (Origin Group)。
