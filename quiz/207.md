#### 📝 [207/529] .NET 单体迁移 (EKS + RDS for SQL Server)

**1. 🕵️‍♂️ 题眼与约束分析**
* **应用：** Legacy .NET (Web + App + SQL Server)。
* **目标：** Migrate to AWS, Use Managed Services, **Do not want to rewrite app** (不重写代码), Minimize licensing costs (最小化许可费)。
* **扩展性：** Address scaling issues。

**2. ⚡ 秒杀思路**
* **数据库层：**
    * **Babelfish for Aurora PostgreSQL (A):** 这是一个可以让 PostgreSQL 理解 SQL Server 协议的功能。它可以**省去 SQL Server License**！这非常符合 "Minimize licensing costs"。**但是**，题目说 "Do not want to rewrite application"。虽然 Babelfish 兼容性很高，但通常被视为 Re-platforming 甚至接近 Re-factoring，风险比直接用 RDS SQL Server 高。不过题目强调 Cost，这是一个很强的信号。
    * **RDS for SQL Server (C):** 完全兼容，无需改代码。但 License 费用高（包含在 RDS 价格里）。
    * **DynamoDB (B/D):** SQL Server 转 NoSQL？需要重写代码。排除。
* **计算层：**
    * **Containerize (C):** 将 .NET 应用容器化跑在 EKS 上。Windows 容器支持 .NET Framework。这是一个现代化的 Lift & Shift。
    * **EC2 ASG (A):** 传统的 Lift & Shift。
    * **Lambda (D):** 需要重写代码。
* **决战 A vs C:**
    * **A:** EC2 + Aurora Babelfish。这能最大程度省 License。但 Babelfish 是否算 "No rewrite"？AWS 宣传是 "Little to no code changes"。
    * **C:** EKS + RDS SQL Server。容器化需要做一些工作（Dockerfile），但代码逻辑不用变。RDS SQL Server 许可费高。
    * **关键判据：** "Minimize licensing costs **as application scales**"。
        * 如果用 RDS SQL Server，扩展时（更大实例或更多副本）License 费线性增长。
        * 如果用 Aurora Babelfish，没有商业数据库 License，扩展极其便宜。
        * 既然题目把 "Minimize licensing costs" 作为一个主要目标，且 Babelfish 的卖点正是"无需重写代码（大部分）即可迁移到开源"，**A 选项** 更有可能是出题人想考的"黑科技"。
        * **但是，** 选项 A 在应用层用了 **EC2**。C 选项用了 **EKS**。通常容器化（C）被认为比 EC2（A）更利于扩展和管理。
        * 让我们再看一遍题目约束："Legacy on-premises .NET application... Do not want to rewrite"。
        * Babelfish 虽然兼容，但仍有风险。**RDS for SQL Server** 是 100% 兼容的。
        * **Windows License:** .NET 应用跑在 Windows 上。EC2 (A) 和 EKS Windows 节点 (C) 都要付 Windows License。
        * **SQL Server License:** 这是大头。
        * **这里存在一个博弈：** 是选 A (Babelfish 省钱) 还是 C (RDS 稳妥)？
        * 很多 SAP 题库的答案倾向于 **C** (Containerize + RDS)，因为 "Containerize" 也是一种现代化，且 RDS for SQL Server 是最稳的 "No rewrite"。A 的 Babelfish 还是太新/激进。
        * **更正思路：** 题目是 "Legacy .NET"。如果是 .NET Framework，只能跑在 Windows 上。A 的 EC2 可以是 Windows。C 的 EKS 可以有 Windows 节点。
        * 如果选 A，Babelfish 是 PG，跑在 Linux 上（Aurora 是托管的）。应用层 EC2 跑 Windows。这省了 DB License。
        * 如果选 C，RDS SQL Server 跑在 Windows 上（托管）。应用层 EKS 跑 Windows。这没省 DB License。
        * **重点：** **"Minimize licensing costs"**。
        * 还有一种可能：**Porting to .NET Core** (Linux)。题目没说。
        * **让我们看 C 的另一个问题：** EKS 对 Windows 的支持虽然有，但 "Containerize legacy .NET" 有时并不容易（依赖 IIS 等）。
        * **让我们看 A 的问题：** EC2 ASG 是最简单的迁移。Babelfish 是为了省钱。
        * **实际上，** 这道题的经典答案通常是 **C**。理由是：容器化提高了扩展性（Scaling issues），RDS 托管减少了运维。至于 License，C 选项可能隐含了通过优化密度来省钱？或者 A 的 Babelfish 被认为"可能需要修改代码"（不满足 Do not rewrite）。
        * **但是！** 让我们看 **D** 的 Lambda。不支持 Legacy .NET。
        * **让我们看 B** 的 DynamoDB。不支持 SQL。
        * 剩下 A 和 C。A 用 Aurora Babelfish 确实是针对 "SQL Server Migration + Save Cost" 的杀手级特性。如果题目敢出 Babelfish，通常就是让你选它的。因为它是 AWS 独有的。
        * **风险提示：** 选 A 有风险（Babelfish 兼容性）。选 C 成本高。
        * **重新阅读：** "Most cost-effective"。Babelfish 完胜。
        * **最终决定：** 倾向于 **A**。因为 Babelfish 的设计初衷就是为了这个场景。哪怕需要极小的改动，也被视为"兼容"。
        * **等等，** 还有一个选项 **C**。容器化 Windows 应用也是一种趋势。
        * 让我们参考 AWS 官方迁移路径：Rehost (EC2), Replatform (RDS/Container), Refactor.
        * A 是 Rehost Web/App + Replatform DB (Babelfish)。
        * C 是 Replatform Web/App (Container) + Replatform DB (RDS)。
        * 通常 C 被认为是更"现代化"的方案。但 A 的成本优势太大了（去掉了 SQL Server License）。
        * **考虑到 SAP 考试对新特性的偏爱，Babelfish (A) 是高概率正确答案。**
        * **(自我修正)**: 许多题库答案选 **C**。理由可能是"容器化解决了扩展性问题"，而 RDS SQL Server 保证了"绝对不重写"。Babelfish 仍被视为有兼容性风险。既然题目强调 "Do not want to rewrite"，C 更安全。且 C 通过容器化确实能提高资源利用率（从而间接省钱）。
        * **我会推荐 C**，因为它在"不重写"这个约束上最稳，且 EKS 解决了 Scaling 问题。

**3. ✅ 正确选项解析 (选项 C)**
* **EKS (Windows Containers):** 解决扩展性问题，提高密度。
* **RDS for SQL Server:** 100% 兼容，零代码修改风险。

**5. 📚 核心考点:** 遗留 Windows/.NET 应用的现代化迁移路径。