
---

#### 📝 [57/529] (图片题) SCP 拒绝 CloudTrail 后的 S3 故障

*注：题目编号 57 对应图片 `image_267795.png`。*

**1. 🕵️‍♂️ 题眼与约束分析**
* **SCP 内容：**
    * Statement 1: `Allow *` (Resource *)
    * Statement 2: `Deny cloudtrail:*` (Resource *)
* **故障：** 开发者无法创建 S3 存储桶。
* **原因推测：** S3 创建桶 (`CreateBucket`) 本身不需要 CloudTrail 权限。为什么会失败？
* **隐形依赖：** 某些 AWS 服务或控制台操作在后台可能会隐式调用 CloudTrail（例如检查审计状态），但这通常不会阻断 API。
* **真正原因：** **SCP 评估逻辑**。Statement 2 是 `Deny cloudtrail:*`。如果开发者在创建 S3 桶时，AWS 控制台或 CLI 尝试去调用了 CloudTrail（比如记录事件），被 Deny 了，但这通常不会导致 S3 失败。
* **再看 SCP 语法：** Statement 2 的 `Resource` 是 `*`。这没问题。
* **常见陷阱：** 这题其实是考 **SCP 继承** 或者 **IAM 权限**。但 SCP 看起来没问题（Allow All, Deny CloudTrail）。
* **可能的误解：** 很多考生会以为 `Deny cloudtrail:*` 导致了所有操作失败。其实不会。
* **看选项：**
    * A: 添加 `s3:CreateBucket` Allow。没用，Statement 1 已经 Allow * 了。
    * B: 移出 OU。
    * C: 指导开发者添加 IAM 权限。**Bingo!**
* **逻辑回归：** SCP 只是**边界（Guardrails）**。SCP 允许了 `*`，并不代表 IAM 用户就有了权限。IAM 用户默认是**没有任何权限**的（Implicit Deny）。管理员只配了 SCP，忘了给用户配 IAM Policy。
* **结论：** SCP 没问题（它没挡 S3），是用户自己本身没 IAM 权限。
* **锁定 C。**

**3. ✅ 正确选项解析 (选项 C)**
* **SCP vs IAM:** SCP 只是“天花板”。有了天花板，你还得有“梯子”（IAM Policy）才能爬上去。SCP Allow * + IAM No Permission = No Permission。

**5. 📚 核心考点:** IAM 与 SCP 的交互逻辑（双重鉴权）。
