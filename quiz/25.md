
---

#### 📝 [25/529] 混合工作负载成本优化 (SLA vs Spot)

**1. 🕵️‍♂️ 题眼与约束分析**
* **负载构成：**
    * **Scheduled (65%):** 有严格 SLA $\rightarrow$ **必须稳** $\rightarrow$ On-Demand / Reserved / Capacity Reservation。
    * **User (35%):** 无 SLA，可延迟 $\rightarrow$ **可以用 Spot**。
* **总容量：** 12 台服务器。
    * 按比例：65% $\approx$ 8 台 (稳)，35% $\approx$ 4 台 (Spot)。
* **高可用 (HA):** 必须跨 AZ 分布。即使一个 AZ 挂了，关键任务（SLA）不能受影响。
* **成本：** **Pay-for-what-you-consume**，**No long-term commitment** (不能用 RI 或 Savings Plans)。

**2. ⚡ 秒杀思路**
* **计算题：**
    * 需求：8 台稳，4 台 Spot。总共 12 台。
    * 限制：不能有长期承诺 $\rightarrow$ 排除 C (Savings Plans)。
    * 分布：分布在 3 个 AZ 通常比 2 个 AZ 容灾更好。
* **选项分析：**
    * **选项 A (2 AZs):** 每个 AZ 2 OD + 4 Spot。总共 4 OD + 8 Spot。
        * 风险：如果一个 AZ 挂了，只剩 2 台 OD。无法满足 8 台（65%）的 SLA 需求。
    * **选项 B (3 AZs):** 一个 AZ 4 OD，其余 Spot。
        * 风险：这是不平衡分布，也是单点风险。
    * **选项 D (3 AZs):** 每个 AZ 3 OD + 1 Spot。
        * 总计：3 * 3 = 9 台 OD。3 * 1 = 3 台 Spot。
        * 容灾分析：如果一个 AZ 挂了，剩余 2 个 AZ 还有 6 台 OD。虽然略少于 8 台，但比 A 的 2 台好得多。而且 Capacity Reservation (ODCR) 确保了按需实例一定能启动。
        * 比例符合：9 台 OD 覆盖了 65% (8台) 的需求，稍微多一点冗余，满足 SLA。Spot 用于补充。
    * **修正思考：** 题目问 "Most cost-effective"。
        * 需求量化：65% of 12 $\approx$ 7.8 台。也就是必须保证时刻有 8 台机器是稳的。
        * 选项 D 提供了 9 台 OD。这满足了 SLA。Spot 实例作为补充。
        * 选项 A 只有 4 台 OD。绝对不行。
        * 选项 C 用了 Savings Plan，违反 "No long-term commitment"。
    * **锁定 D。**

**3. ✅ 正确选项解析 (选项 D)**
* **ODCR (On-Demand Capacity Reservation):** 确保在特定 AZ 有容量启动按需实例，这是除 RI/SP 外保证容量的唯一方法（虽然不省钱，但题目说要 Pay-as-you-go）。
* **3 AZs 分布:** 3 OD/AZ * 3 = 9 OD。满足 65% 核心负载。

**5. 📚 核心考点:** 混合实例组合策略 (ODCR + Spot) 与 SLA 保障。
