#### ğŸ“ [464/529] é™åˆ¶ IAM æ“ä½œä»…é™ç®¡ç†å‘˜ (SCP Deny)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **éœ€æ±‚:** Only **Administrator role** allowed to use IAM actionsã€‚
* **é™åˆ¶:** Architect does NOT have access to all accounts (æ— æ³•é€ä¸ªè´¦æˆ·é…ç½®)ã€‚
* **å·¥å…·:** Organizationsã€‚
* **ç›®æ ‡:** **Least operational overhead**ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **å…¨å±€ç­–ç•¥ (SCP):**
    * åœ¨ Root OU åº”ç”¨ SCPï¼Œé™åˆ¶æ‰€æœ‰è´¦æˆ·ã€‚
    * **é€»è¾‘ï¼š** **Deny** IAM actions **Unless** the user is AdministratorRoleã€‚
    * ä½¿ç”¨ `Condition` å…ƒç´ ï¼š`ArnNotLike` (æˆ– `StringNotLike`) `aws:PrincipalArn` : `.../AdministratorRole`ã€‚
    * $â†’$ **é€‰ä¸­ C**ã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * A (Allow only Admin): SCP æ˜¯é»‘åå•é€»è¾‘ï¼ˆé»˜è®¤ Allow *ï¼ŒSCP æ·»åŠ  Denyï¼Œæˆ–è€… SCP åªå†™ Allow å¹¶ä¸èƒ½é˜»æ­¢æœ¬åœ° Admin ä¿®æ”¹ï¼‰ã€‚è¦å®ç°"é™¤äº† Admin å…¶ä»–äººéƒ½ä¸è¡Œ"ï¼Œå¿…é¡»ç”¨æ˜¾å¼çš„ **Deny + Exception (Condition)**ã€‚A çš„æè¿° "Create SCP allow only..." æ˜¯ç™½åå•é€»è¾‘ï¼Œå¦‚æœä¸é…åˆç§»é™¤ FullAWSAccess ä¼šå¾ˆå¤æ‚ï¼Œä¸”å¾ˆéš¾è¡¨è¾¾"åªæœ‰ Admin"ã€‚
    * **C æ˜¯æ ‡å‡†çš„ SCP å†™æ³•ï¼š** "Deny all users... EXCEPT those with Administrator role"ã€‚è¿™æ˜¯é€šè¿‡ `Condition` å®ç°çš„ã€‚
    * B (CloudTrail + Lambda): ååº”å¼ï¼Œéé˜»æ–­å¼ï¼Œä¸”å¤æ‚ã€‚
    * D (Permission Boundary): éœ€è¦åœ¨æ¯ä¸ªè´¦æˆ·ã€æ¯ä¸ªè§’è‰²ä¸Šé…ç½®ï¼Œå·¥ä½œé‡å·¨å¤§ã€‚
* **é”å®š Cã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ C)**
* **SCP Deny with Exception:** é€šè¿‡ `Deny` + `Condition` (NotPrincipal) å®ç°ç‰¹å®šè§’è‰²çš„è±å…ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** SCP å®ç°å…¨å±€æƒé™é™åˆ¶çš„é€»è¾‘ (Deny wins)ã€‚