è¿™ 10 é“é¢˜ç›®æ¶µç›–äº† **PrivateLink è·¨åŒºåŸŸè®¿é—® (Inter-Region Peering + NLB)**ã€**S3 ç›‘æ§ä»ªè¡¨æ¿ (Storage Lens)**ã€**CI/CD å¿«é€Ÿå›æ»š (Blue/Green)**ã€**EC2 å®ä¾‹æ ‡ç­¾å¼ºåˆ¶ (SCP)**ã€**IPv6 è¿ç§» (Egress-Only IGW)**ã€**Private API Gateway è®¿é—®**ã€**Organizations è´¦æˆ·é‚€è¯·**ã€**åº”ç”¨ç°ä»£åŒ– (EKS + MSK)**ã€**VPN å¸¦å®½å¸è½½ (Client VPN + FSx)**ã€**EBS åŠ å¯†ä¿®å¤ä¸åˆè§„ (Control Tower)**ã€‚

ç‰¹åˆ«æ˜¯ **Q361 (Inter-Region PrivateLink)** å’Œ **Q365 (IPv6 Egress)** æ˜¯ SAP è€ƒè¯•ä¸­çš„ç½‘ç»œéš¾ç‚¹ã€‚

è®©æˆ‘ä»¬å¼€å¯ **é€é¢˜ç§’æ€æ¨¡å¼**ï¼

---

#### ğŸ“ [361/529] è·¨åŒºåŸŸ PrivateLink è®¿é—® (NLB + Peering)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **Provider (SaaS):** eu-west-2 (London), NLB + EC2 (Private Subnets)ã€‚
* **Consumer (New Customer):** us-east-1 (N. Virginia)ã€‚
* **è¿æ¥ï¼š** å·²å»ºç«‹ **Inter-Region VPC Peering**ã€‚
* **éœ€æ±‚ï¼š** Provide access to new customer in us-east-1, **without deploying new EC2 resources in us-east-1 immediately** (ä¸åœ¨ us-east-1 éƒ¨ç½²æ–° EC2)ã€‚
* **å·¥å…·ï¼š** PrivateLink (Endpoint Service)ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **PrivateLink çš„é™åˆ¶ï¼š** Endpoint Service (Provider side) å’Œ Endpoint (Consumer side) å¿…é¡»åœ¨ **åŒä¸€ä¸ªåŒºåŸŸ**ã€‚PrivateLink ä¸æ”¯æŒç›´æ¥è·¨åŒºåŸŸè¿æ¥ã€‚
* **è·¨åŒºåŸŸæ¶æ„ï¼š**
    * è¦è®© us-east-1 çš„å®¢æˆ·é€šè¿‡ PrivateLink è®¿é—® eu-west-2 çš„æœåŠ¡ï¼Œå¿…é¡»åœ¨ **us-east-1** åˆ›å»ºä¸€ä¸ª **Endpoint Service**ã€‚
    * è¿™ä¸ª us-east-1 çš„ Endpoint Service åç«¯å¿…é¡»æŒ‡å‘ eu-west-2 çš„æœåŠ¡ã€‚
    * æ€ä¹ˆæŒ‡ï¼Ÿé€šè¿‡ **Inter-Region VPC Peering**ã€‚
    * åœ¨ us-east-1 åˆ›å»ºä¸€ä¸ª **NLB**ã€‚
    * å°†è¯¥ NLB çš„ç›®æ ‡ç»„æŒ‡å‘ eu-west-2 çš„ EC2 å®ä¾‹ **IP åœ°å€** (Target Type: IP)ã€‚å› ä¸º VPC Peering æ‰“é€šäº† IP è·¯ç”±ï¼Œus-east-1 çš„ NLB å¯ä»¥ç›´æ¥è½¬å‘æµé‡åˆ° eu-west-2 çš„ç§æœ‰ IPã€‚
    * ç„¶ååŸºäºè¿™ä¸ª us-east-1 çš„ NLB åˆ›å»º Endpoint Serviceã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * A: é…ç½® us-east-1 çš„ Endpoint Service ä½¿ç”¨ eu-west-2 çš„ NLBï¼Ÿä¸æ”¯æŒã€‚NLB å’Œ Endpoint Service å¿…é¡»åŒåŒºã€‚
    * **B:** åœ¨ us-east-1 å»º NLBã€‚åˆ›å»º **IP Target Group**ï¼Œå¡«å…¥ eu-west-2 EC2 çš„ IPã€‚é…ç½® Endpoint Serviceã€‚è¿™æ˜¯æ ‡å‡†ä¸”å”¯ä¸€å¯è¡Œçš„è·¨åŒº PrivateLink æ‰©å±•æ–¹æ¡ˆã€‚
    * C: ALB? PrivateLink åªèƒ½æ¥ NLBã€‚ä¸” ALB ç›®æ ‡ç»„ä¹Ÿä¸èƒ½è·¨åŒºï¼ˆé™¤éç”¨ IPï¼Œä½†å‰é¢è¿˜è¦åŠ  NLBï¼Œå¤šæ­¤ä¸€ä¸¾ï¼‰ã€‚
    * D: RAM Share EC2? RAM ä¸èƒ½å…±äº« EC2 å®ä¾‹ã€‚
* **é”å®š Bã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B)**
* **Inter-Region Peering:** æ‰“é€šç½‘ç»œã€‚
* **NLB IP Target:** è·¨åŒºåŸŸè½¬å‘æµé‡ã€‚
* **Local Endpoint Service:** æ»¡è¶³ PrivateLink åŒåŒºåŸŸé™åˆ¶ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** è·¨åŒºåŸŸæä¾› PrivateLink æœåŠ¡çš„æ¶æ„æ¨¡å¼ã€‚

---

#### ğŸ“ [362/529] S3 æ¡¶æ•°é‡ä¸åŠ å¯†ç›‘æ§ (Storage Lens)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **éœ€æ±‚ï¼š**
    1.  Monitor growing number of buckets (ç›‘æ§æ¡¶æ•°é‡)ã€‚
    2.  Track % of encrypted objects (è·Ÿè¸ªåŠ å¯†ç™¾åˆ†æ¯”)ã€‚
    3.  Dashboard for compliance (åˆè§„ä»ªè¡¨ç›˜)ã€‚
    4.  Two AWS Regionsã€‚
* **ç›®æ ‡ï¼š** **Least operational overhead**ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **S3 Storage Lens:** S3 åŸç”Ÿçš„åˆ†æä»ªè¡¨ç›˜ã€‚
    * é»˜è®¤ä»ªè¡¨ç›˜ (Default Dashboard) å·²ç»æä¾›äº†æ¡¶æ•°é‡ã€å­˜å‚¨é‡ç­‰åŸºç¡€æŒ‡æ ‡ã€‚
    * **é«˜çº§æŒ‡æ ‡ (Advanced Metrics):** åŒ…å« **% encrypted objects** ç­‰è¯¦ç»†æ•°æ®ã€‚
    * Storage Lens å¯ä»¥èšåˆæ‰€æœ‰åŒºåŸŸçš„æ•°æ®åˆ°ä¸€ä¸ªè§†å›¾ã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * A: "Create NEW dashboard... Aggregate in QuickSight"ã€‚Storage Lens æœ¬èº«å°±æ˜¯ä»ªè¡¨ç›˜ï¼Œä¸éœ€è¦ QuickSight èšåˆï¼ˆé™¤éæœ‰æç‰¹æ®Šéœ€æ±‚ï¼‰ã€‚Storage Lens å¯ä»¥ç›´æ¥çœ‹å¤šåŒºåŸŸæ•°æ®ã€‚
    * B (Lambda + Athena + QuickSight): æ‰‹åŠ¨é€ è½®å­ï¼ŒOverhead å·¨å¤§ã€‚
    * C: "Use default dashboard"ã€‚é»˜è®¤ä»ªè¡¨ç›˜åŒ…å«æ¡¶æ•°é‡ï¼Œä½†æ˜¯å¦åŒ…å« "% encrypted objects"ï¼Ÿé»˜è®¤æ˜¯ Free Metricsã€‚åŠ å¯†ç™¾åˆ†æ¯”é€šå¸¸å±äº Advanced Metrics (ä»˜è´¹)ã€‚ä½†æ˜¯ç›¸æ¯” A/B/Dï¼ŒC æ˜¯åˆ©ç”¨åŸç”ŸåŠŸèƒ½ã€‚
    * D (EventBridge + Lambda + DynamoDB): å®æ—¶è·Ÿè¸ªï¼ŸS3 å¯¹è±¡å¤ªå¤šï¼ŒLambda ä¼šè·‘æ­»ã€‚Storage Lens æ˜¯æ¯æ—¥èšåˆï¼Œæ›´é€‚åˆè¿™ç§â€œç»Ÿè®¡æŠ¥å‘Šâ€ã€‚
    * **A vs C çš„ç»†èŠ‚ï¼š** é»˜è®¤ä»ªè¡¨ç›˜å¯èƒ½ä¸åŒ…å«åŠ å¯†ç™¾åˆ†æ¯”ã€‚å¦‚æœå¿…é¡»é€‰ï¼Œåˆ›å»ºä¸€ä¸ªå¯ç”¨äº† Advanced Metrics çš„ Dashboard æ˜¯æ­£è§£ã€‚A é€‰é¡¹è¯´ "Create new... Aggregate in QuickSight"ã€‚å…¶å® Storage Lens ä»ªè¡¨ç›˜æœ¬èº«å°±å¤Ÿäº†ã€‚
    * **å†çœ‹ A:** "Aggregate in QuickSight"ã€‚å¦‚æœ Storage Lens å·²ç»æä¾›äº†è§†å›¾ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ QuickSightï¼ŸStorage Lens æ”¯æŒå¯¼å‡ºæ•°æ®åˆ° QuickSightï¼Œä½†å¦‚æœåªæ˜¯â€œå±•ç¤ºç»™åˆè§„å›¢é˜Ÿâ€ï¼Œç›´æ¥ç»™ Storage Lens è®¿é—®æƒé™å³å¯ã€‚
    * **é‡æ–°å®¡è§† C:** "Use default dashboard... give access"ã€‚å¦‚æœé»˜è®¤ä»ªè¡¨ç›˜ä¸å«åŠ å¯†ä¿¡æ¯ï¼ŒC å°±é”™äº†ã€‚Storage Lens Free Metrics **ä¸åŒ…å«** åŠ å¯†çŠ¶æ€ã€‚å¿…é¡»å¼€å¯ Advanced Metricsã€‚
    * **å†çœ‹ A:** "Create NEW dashboard" (æš—ç¤ºå¼€å¯é«˜çº§æŒ‡æ ‡) ... "Aggregate in QuickSight"ã€‚ä¹Ÿè®¸ Storage Lens è·¨åŒºåŸŸè§†å›¾éœ€è¦ QuickSightï¼Ÿä¸ï¼ŒStorage Lens æœ¬èº«å°±æ˜¯è·¨åŒºåŸŸçš„ï¼ˆOrganization level or Account levelï¼‰ã€‚
    * **ä½†æ˜¯ï¼Œ** æœ‰æ—¶å€™é¢˜ç›®ä¼šæŠŠ "Create Dashboard" æŒ‡ä»£é…ç½® Storage Lensã€‚
    * **æ¯”è¾ƒ A å’Œ C:** C ç”¨é»˜è®¤çš„ï¼Œè‚¯å®šç¼ºæŒ‡æ ‡ã€‚A è‡³å°‘åˆ›å»ºäº†æ–°çš„ï¼ˆå¯ä»¥é…é«˜çº§æŒ‡æ ‡ï¼‰ã€‚è‡³äº QuickSightï¼Œå¯èƒ½æ˜¯ä¸ºäº†æ›´å¥½çš„å¯è§†åŒ–ï¼Ÿ
    * **å®é™…ä¸Šï¼Œ** æœ€ç®€å•çš„æ–¹æ¡ˆæ˜¯ï¼šå¼€å¯ Storage Lens Advanced Metricsï¼Œç›´æ¥çœ‹ Storage Lensã€‚
    * è®©æˆ‘ä»¬çœ‹ **AWS å®˜æ–¹åšå®¢**ï¼šS3 Storage Lens + QuickSight æ˜¯å¸¸è§çš„åˆè§„æŠ¥è¡¨æ–¹æ¡ˆã€‚
    * **ä¿®æ­£ï¼š** é€‰é¡¹ A çš„æè¿° "Create new S3 Storage Lens dashboard... Aggregate in QuickSight"ã€‚è¿™ä¸ªæµç¨‹æ˜¯åˆç†çš„ï¼ˆæ•°æ®å¯¼å‡ºåˆ° S3 -> QuickSightï¼‰ã€‚
    * **é€‰é¡¹ C é”™åœ¨â€œDefault dashboardâ€**ã€‚
    * **é”å®š Aã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ A)**
* **S3 Storage Lens:** S3 åŸç”Ÿçš„é«˜çº§åˆ†æå·¥å…·ã€‚
* **QuickSight:** çµæ´»çš„ BI å±•ç¤ºï¼ˆé…åˆ Storage Lens æ•°æ®å¯¼å‡ºï¼‰ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** S3 Storage Lens çš„æŒ‡æ ‡èŒƒå›´ï¼ˆFree vs Advancedï¼‰ä¸å¯è§†åŒ–ã€‚

---

#### ğŸ“ [363/529] CI/CD å¿«é€Ÿå›æ»šä¸æœ€å°åœæœº (CodeDeploy Blue/Green)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **åœºæ™¯ï¼š** Web App on EC2 (ALB)ã€‚
* **å·¥å…·ï¼š** CodeBuild, CodePipelineã€‚
* **éœ€æ±‚ï¼š**
    1.  Patch quickly (å¿«)ã€‚
    2.  **Roll back quickly if fails** (å¿«é€Ÿå›æ»š)ã€‚
    3.  **Minimize downtime** (æœ€å°åœæœº)ã€‚
* **å½“å‰ï¼š** CodeBuild å·²æœ‰ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **éƒ¨ç½²ç­–ç•¥ï¼š**
    * **In-place (åŸåœ°éƒ¨ç½²):** ä¹Ÿä¼šæœ‰åœæœºï¼ˆæœåŠ¡é‡å¯æœŸé—´ï¼‰ï¼Œå›æ»šæ…¢ï¼ˆéœ€è¦é‡æ–°éƒ¨ç½²æ—§ç‰ˆï¼‰ã€‚æ’é™¤ A/Dã€‚
    * **Blue/Green (è“ç»¿éƒ¨ç½²):**
        * éƒ¨ç½²æ–°ç‰ˆåˆ°æ–°å®ä¾‹ã€‚
        * éªŒè¯é€šè¿‡ååˆ‡æ¢æµé‡ï¼ˆALBï¼‰ã€‚
        * **å›æ»šæå¿«ï¼š** å¦‚æœæ–°ç‰ˆæœ‰é—®é¢˜ï¼Œåªè¦åˆ‡å›æ—§ç‰ˆï¼ˆBlue ç¯å¢ƒè¿˜åœ¨ï¼‰å³å¯ï¼Œç§’çº§å›æ»šï¼Œé›¶åœæœºã€‚
* **å·¥å…·é€‰å‹ï¼š**
    * **CodeDeploy (B):** åŸç”Ÿæ”¯æŒ EC2/ECS çš„è“ç»¿éƒ¨ç½²ã€‚
    * CloudFormation (C): è™½ç„¶ä¹Ÿèƒ½åšï¼Œä½† CodeDeploy æ˜¯ä¸“é—¨çš„åº”ç”¨éƒ¨ç½²å·¥å…·ï¼Œæ›´è½»é‡ã€æ›´ä¸“æ³¨äºåº”ç”¨å±‚å›æ»šã€‚
* **é”å®š Bã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B)**
* **CodeDeploy Blue/Green:** æ»¡è¶³å¿«é€Ÿå›æ»šå’Œæœ€å°åœæœºéœ€æ±‚çš„æœ€ä½³éƒ¨ç½²ç­–ç•¥ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** CodeDeploy è“ç»¿éƒ¨ç½²åœ¨ CI/CD ä¸­çš„åº”ç”¨ã€‚

---

#### ğŸ“ [364/529] (ç¼ºå¤±ï¼Œè·³è¿‡)

*(æ³¨ï¼šåŸæ–‡æœ¬ç›´æ¥è·³åˆ°äº† 365)*

---

#### ğŸ“ [365/529] IPv6 è¿ç§»ä¸ç§æœ‰å­ç½‘å‡ºç«™ (Egress-Only IGW)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **åœºæ™¯ï¼š** Thousands of EC2 in Public/Private Subnetsã€‚
* **è¿ç§»ï¼š** Migrate to **IPv6**ã€‚
* **å®‰å…¨ï¼š** Private subnet instances **MUST NOT be accessible from public internet** (ç§æœ‰å­ç½‘ä¸å¯ä»å…¬ç½‘è®¿é—®)ã€‚
* **éœ€æ±‚ï¼š** ä½†ç§æœ‰å­ç½‘é€šå¸¸éœ€è¦è®¿é—®äº’è”ç½‘ï¼ˆå¦‚ä¸‹è½½è¡¥ä¸ï¼Œé¢˜ç›®è™½æœªæ˜è¯´ï¼Œä½†é€šå¸¸ IPv6 è¿ç§»éœ€è¦è§£å†³å‡ºç«™é—®é¢˜ï¼Œä¸”é¢˜ç›®æåˆ°äº† NAT Gatewayï¼Œæš—ç¤ºåŸæ¶æ„æœ‰å‡ºç«™éœ€æ±‚ï¼‰ã€‚å¦‚æœæ˜¯çº¯éš”ç¦»ï¼Œå°±ä¸éœ€è¦ç½‘å…³äº†ã€‚
* **IPv6 ç‰¹æ€§ï¼š** IPv6 åœ°å€éƒ½æ˜¯å…¨çƒå”¯ä¸€çš„ï¼ˆæ²¡æœ‰ç§æœ‰ IP æ¦‚å¿µï¼‰ï¼Œæ‰€ä»¥éƒ½æœ‰â€œå…¬ç½‘â€è·¯ç”±èƒ½åŠ›ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **IPv6 çš„ NAT:** IPv6 è®¾è®¡ä¸Šä¸æ¨è NATã€‚
    * **NAT Gateway (B/D):** è™½ç„¶ AWS ç°åœ¨æ”¯æŒ NAT64 (IPv6 -> IPv4)ï¼Œä½†æ ‡å‡†çš„ IPv6 å‡ºç«™ä¸èµ° NATã€‚è€Œä¸” D é€‰é¡¹è¯´ "Enable IPv6 support on NAT Gateway"ï¼ŒNAT Gateway ä¸»è¦ç”¨äº IPv4ã€‚
* **IPv6 çš„ç§æœ‰å­ç½‘å‡ºç«™ï¼š**
    * ä¸ºäº†è®©æœ‰å…¬ç½‘ IPv6 åœ°å€çš„å®ä¾‹èƒ½ä¸»åŠ¨è®¿é—®äº’è”ç½‘ï¼Œä½†**ä¸è¢«**äº’è”ç½‘ä¸»åŠ¨è®¿é—®ã€‚
    * AWS æä¾›äº† **Egress-Only Internet Gateway (EIGW)**ã€‚
    * å®ƒç±»ä¼¼äº IPv4 çš„ NAT Gateway çš„å®‰å…¨æ•ˆæœï¼ˆåªå‡ºä¸è¿›ï¼‰ï¼Œä½†å®ƒæ˜¯ IPv6 ä¸“ç”¨çš„ï¼Œä¸”æ— çŠ¶æ€ï¼ˆä¸éœ€è¦åƒ NAT é‚£æ ·ç»´æŠ¤è¿æ¥è¡¨ï¼Œä½†åœ¨ AWS å®ç°é‡Œæ˜¯æ‰˜ç®¡çš„ï¼‰ã€‚
* **é…ç½®ï¼š**
    * å…³è” IPv6 CIDRã€‚
    * åˆ›å»º Egress-Only IGWã€‚
    * æ›´æ–°ç§æœ‰å­ç½‘è·¯ç”±è¡¨ï¼š`::/0` -> `eigw-xxxx`ã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * A: `::/0` -> IGWã€‚è¿™ä¼šè®©ç§æœ‰å­ç½‘å˜æˆå…¬ç½‘å­ç½‘ï¼ˆå› ä¸º IPv6 æ˜¯å…¬ç½‘ IPï¼Œåªè¦æœ‰è·¯ç”±å°±èƒ½è¢«è®¿é—®ï¼Œé™¤é SG æ‹¦ä½ï¼Œä½†æ¶æ„ä¸Šä¸å®‰å…¨ï¼‰ã€‚
    * B: `::/0` -> NAT Gatewayã€‚NAT Gateway ä¸æ”¯æŒ IPv6-to-IPv6 æµé‡ï¼ˆå®ƒæ˜¯ IPv4 çš„ï¼‰ã€‚
    * **C:** Egress-Only Internet Gatewayã€‚æ ‡å‡†ç­”æ¡ˆã€‚
* **é”å®š Cã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ C)**
* **Egress-Only Internet Gateway:** IPv6 ä¸“ç”¨çš„â€œåªå‡ºä¸è¿›â€ç½‘å…³ï¼Œæ›¿ä»£ IPv4 NAT Gateway çš„è§’è‰²ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** IPv6 ç½‘ç»œæ¶æ„ä¸ Egress-Only IGWã€‚

---

#### ğŸ“ [366/529] ç§æœ‰ API Gateway è®¿é—® (Interface Endpoint)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **API ç±»å‹ï¼š** **Private REST API**ã€‚
* **é™åˆ¶ï¼š** Only accessible from apps in VPCã€‚
* **æ•…éšœï¼š** EC2 in VPC cannot access APIã€‚
* **åŸå› ï¼š** Private API å¿…é¡»é€šè¿‡ **Interface VPC Endpoint** è®¿é—®ã€‚å¦‚æœæ²¡é… Endpoint æˆ–é…ç½®ä¸å¯¹ï¼Œå°±é€šä¸äº†ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **é…ç½®æ­¥éª¤ï¼š**
    1.  åˆ›å»º **Interface VPC Endpoint** (for `execute-api`)ã€‚
    2.  **Private DNS:**
        * å¦‚æœå¯ç”¨ Private DNS (Enable Private DNS Name)ï¼Œå¯ä»¥ä½¿ç”¨é»˜è®¤çš„ API åŸŸåï¼ˆ`xxx.execute-api...`ï¼‰ç›´æ¥è®¿é—®ã€‚DNS ä¼šè‡ªåŠ¨è§£æåˆ° Endpoint IPã€‚ $\rightarrow$ **é€‰ä¸­ B**ã€‚
        * å¦‚æœç¦ç”¨ Private DNSï¼Œå¿…é¡»ä½¿ç”¨ Endpoint çš„ç‰¹å®š DNS åç§°ï¼Œæˆ–è€…åœ¨ Header ä¸­é€šè¿‡ Host ä¼ é€’ API IDã€‚A é€‰é¡¹è¯´ç¦ç”¨ï¼Œç„¶åç”¨ VPC Endpoint DNSï¼Œè¿™æ¯”è¾ƒéº»çƒ¦ï¼ˆURL ä¼šå˜ï¼‰ã€‚
    3.  **Resource Policy:** å¿…é¡»å…è®¸ VPC Endpoint è®¿é—®ã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * A: Disable Private DNS? ä¸æ¨èï¼Œé™¤éæœ‰ç‰¹æ®Š DNS å†²çªã€‚B å¯ç”¨ Private DNS å¯¹åº”ç”¨æœ€é€æ˜ï¼ˆä¸ç”¨æ”¹ URLï¼‰ã€‚ä¸” B çš„ Endpoint Policy `execute-api:Invoke` æ˜¯æ­£ç¡®çš„æƒé™ã€‚
    * C/D (NLB/ALB + VPC Link): VPC Link æ˜¯ç”¨äº API Gateway **è®¿é—®åç«¯** VPC èµ„æºçš„ï¼Œä¸æ˜¯ç”¨äº**å®¢æˆ·ç«¯è®¿é—®** API Gateway çš„ã€‚æ–¹å‘åäº†ã€‚
* **é”å®š Bã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B)**
* **Interface VPC Endpoint:** è®¿é—® Private API çš„å…¥å£ã€‚
* **Private DNS:** ç®€åŒ–è°ƒç”¨ï¼Œä¿æŒ URL ä¸å˜ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** Private API Gateway çš„è®¿é—®é…ç½®ï¼ˆEndpoint + DNSï¼‰ã€‚

---

#### ğŸ“ [367/529] Organizations è·¨è´¦æˆ·è§’è‰² (OrganizationAccountAccessRole)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **åœºæ™¯ï¼š** åˆå¹¶å…¬å¸ï¼Œä½¿ç”¨ **Invite** æ–¹å¼åŠ å…¥ Organizationsã€‚
* **éœ€æ±‚ï¼š** Centrally manage access policies (é›†ä¸­ç®¡ç†è®¿é—®)ã€‚
* **é—®é¢˜ï¼š** Invite æ–¹å¼åŠ å…¥çš„è´¦æˆ·ï¼Œ**ä¸ä¼š** è‡ªåŠ¨åˆ›å»º `OrganizationAccountAccessRole`ã€‚åªæœ‰é€šè¿‡ Org **CreateAccount** åˆ›å»ºçš„è´¦æˆ·æ‰ä¼šè‡ªåŠ¨æœ‰è¿™ä¸ªè§’è‰²ã€‚
* **ä»»åŠ¡ï¼š** Next step to meet requirements (è¡¥å…¨è¿™ä¸ªè§’è‰²)ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **æ‰‹åŠ¨åˆ›å»ºè§’è‰²ï¼š**
    * å¯¹äºé‚€è¯·åŠ å…¥çš„è´¦æˆ·ï¼Œå¿…é¡»**æ‰‹åŠ¨**åœ¨æˆå‘˜è´¦æˆ·ä¸­åˆ›å»º **`OrganizationAccountAccessRole`**ï¼ˆæˆ–å…¶ä»–åå­—ï¼Œä½†è¿™æ˜¯æƒ¯ä¾‹ï¼‰ã€‚
    * ä¿¡ä»»ç­–ç•¥ï¼šTrust **Management Account**ã€‚
    * æƒé™ç­–ç•¥ï¼šAdministratorAccess (é€šå¸¸)ã€‚
    * $\rightarrow$ **é€‰ä¸­ C** (Create Role in member account, grant permission to assume to Mgmt account)ã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * A: IAM Group? ç»„ä¸èƒ½è·¨è´¦æˆ·ã€‚
    * B: Policy? éœ€è¦ Roleã€‚
    * D: åœ¨ç®¡ç†è´¦æˆ·å»º Roleï¼Ÿåäº†ã€‚Role è¦å»ºåœ¨**ç›®æ ‡**ï¼ˆæˆå‘˜ï¼‰è´¦æˆ·ï¼Œç®¡ç†è´¦æˆ·å» Assume å®ƒã€‚
* **é”å®š Cã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ C)**
* **Manual Role Creation:** é‚€è¯·åŠ å…¥çš„è´¦æˆ·å¿…é¡»æ‰‹åŠ¨å»ºç«‹è·¨è´¦æˆ·ä¿¡ä»»è§’è‰²ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** Organizations é‚€è¯·æ¨¡å¼ä¸‹çš„ `OrganizationAccountAccessRole` ç¼ºå¤±é—®é¢˜ã€‚

---

#### ğŸ“ [368/529] åº”ç”¨ç°ä»£åŒ–æ”¹é€  (EKS + MSK)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **ç°çŠ¶ï¼š**
    * App: Containerized on EC2 (Public IP)ã€‚
    * Kafka: on EC2ã€‚
    * DB: RDS PostgreSQLã€‚
* **é¢„æµ‹ï¼š** è®¢å•é‡å¤§å¢ã€‚
* **ç›®æ ‡ï¼š** **Reduce operational overhead** (å‡å°‘è¿ç»´), Support scaleã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **åº”ç”¨å±‚ï¼š**
    * æ—¢ç„¶å·²ç»å®¹å™¨åŒ–äº†ï¼Œä¸å…¶è‡ªå·±åœ¨ EC2 ä¸Šè·‘ Dockerï¼ˆA/Bï¼‰ï¼Œä¸å¦‚ç”¨ **EKS (D)** æˆ– ECSã€‚EKS Fargate å¯ä»¥è¿›ä¸€æ­¥å‡å°‘èŠ‚ç‚¹è¿ç»´ã€‚
* **Kafka å±‚ï¼š**
    * è‡ªå»º Kafka on EC2 è¿ç»´æé‡ï¼ˆZookeeper, Broker, æ‰©å®¹ï¼‰ã€‚
    * è¿ç§»åˆ° **Amazon MSK (Managed Streaming for Kafka)**ã€‚æ‰˜ç®¡æœåŠ¡ï¼Œè‡ªåŠ¨æ‰©ç¼©å®¹ã€‚
    * $\rightarrow$ **é€‰ä¸­ C æˆ– D**ã€‚
* **æ•°æ®åº“å±‚ï¼š**
    * è¯»æ‰©å±•ï¼š**Read Replicas** (A/D)ã€‚
    * Multi-AZ (B/C) æ˜¯ä¸ºäº†é«˜å¯ç”¨ï¼Œè™½ç„¶ä¹Ÿèƒ½æ‰©å®¹ï¼ˆå¤‡åº“ä¸è¯»ï¼‰ï¼Œä½† Read Replica æ˜¯è§£å†³è¯»è´Ÿè½½çš„æ ‡å‡†ã€‚
    * **D vs C:**
        * D: EKS Fargate (Less overhead) + MSK + Read Replica + CloudFront/S3ã€‚
        * C: Kubernetes on EC2 (Self-managed K8s?) + MSK + Multi-AZã€‚
        * é¢˜ç›®è¯´ "App services already containerized"ã€‚
        * **EKS (Managed Kubernetes)** è‚¯å®šæ¯”è‡ªå·±è£… K8s (C) è¿ç»´å°‘ã€‚
        * **Fargate** æ¯”ç®¡ç† EC2 èŠ‚ç‚¹æ±  (C) è¿ç»´å°‘ã€‚
        * **Read Replica** (D) å¯¹åº”è®¢å•é‡å¢åŠ å¸¦æ¥çš„è¯»å‹åŠ›ï¼ˆå‡è®¾è¯»å¤šï¼‰ã€‚å¦‚æœå†™å¤šï¼Œå¯èƒ½éœ€è¦åˆ†åº“åˆ†è¡¨æˆ–æå‡è§„æ ¼ã€‚ä½† D çš„æ¶æ„æ•´ä½“æ›´â€œç°ä»£åŒ–â€å’Œâ€œæ‰˜ç®¡åŒ–â€ã€‚
        * æ­¤å¤–ï¼ŒC é€‰é¡¹ "Create Kubernetes cluster on EC2 instances" æš—ç¤ºè‡ªå»ºã€‚D æ˜ç¡®è¯´ "Amazon EKS"ã€‚
    * **é”å®š Dã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ D)**
* **EKS Fargate:** Serverless å®¹å™¨ç¼–æ’ã€‚
* **MSK:** æ‰˜ç®¡ Kafkaã€‚
* **CloudFront/S3:** é™æ€èµ„æºå¸è½½ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** å…¨æ ˆæ¶æ„çš„æ‰˜ç®¡åŒ–æ”¹é€  (EKS, MSK)ã€‚

---

#### ğŸ“ [369/529] VPN å¸¦å®½å¸è½½ä¸è¿œç¨‹åŠå…¬ (Client VPN + FSx)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **ç°çŠ¶ï¼š** è¿œç¨‹å‘˜å·¥è¿ VPN è®¿é—®æœ¬åœ° Windows Home Directoryã€‚
* **ç—›ç‚¹ï¼š** å¸¦å®½çˆ†æ»¡ (100%)ã€‚
* **éœ€æ±‚ï¼š** Support growth, **Reduce bandwidth usage to data center**, Reduce overheadã€‚
* **é€‰æ‹©ï¼š** 2 ä¸ªæ­¥éª¤ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **æ–‡ä»¶å­˜å‚¨è¿ç§»ï¼š**
    * å°† Windows Home Directory è¿ç§»åˆ° AWS ä¸Šçš„ **FSx for Windows File Server**ã€‚è¿™æ ·æ–‡ä»¶æµé‡å°±ä¸èµ°æœ¬åœ°æ•°æ®ä¸­å¿ƒäº†ï¼Œè€Œæ˜¯èµ° AWSã€‚ $\rightarrow$ **é€‰ä¸­ B**ã€‚
* **è®¿é—®æ–¹å¼ï¼š**
    * è¿œç¨‹å‘˜å·¥å¦‚ä½•è®¿é—® AWS ä¸Šçš„ FSxï¼Ÿ
    * **AWS Client VPN (D):** å‘˜å·¥è¿æ¥ AWS Client VPNï¼Œç›´æ¥è®¿é—® VPC å†…çš„ FSxã€‚æµé‡å®Œå…¨åœ¨ AWS ä¾§ï¼Œä¸ç»è¿‡æœ¬åœ°æ•°æ®ä¸­å¿ƒã€‚
    * æœ¬åœ° VPN (ç°çŠ¶) æ˜¯ç“¶é¢ˆï¼Œå¿…é¡»ç»•è¿‡ã€‚
* **é€‰é¡¹å¯¹æ¯”ï¼š**
    * A (Storage Gateway): æŠŠäº‘å­˜å‚¨æŒ‚å›æœ¬åœ°ï¼Ÿé‚£æµé‡è¿˜æ˜¯è¦ç»è¿‡æ•°æ®ä¸­å¿ƒï¼ˆè™½ç„¶ç¼“å­˜èƒ½çœä¸€ç‚¹ï¼Œä½†åˆæ¬¡è¯»å–å’Œå†™å…¥è¿˜æ˜¯èµ°ä¸“çº¿/VPNï¼‰ã€‚ä¸å¦‚ç›´æ¥è¿ç§»ä¸Šäº‘å½»åº•ã€‚
    * C (FSx for Lustre): Lustre æ˜¯ HPC ç”¨çš„ï¼Œä¸æ”¯æŒ Windows ACL/SMBã€‚
    * E (Direct Connect): å¢åŠ å¸¦å®½ï¼Ÿé¢˜ç›®è¯´è¦ "Reduce bandwidth usage"ï¼Œä¸æ˜¯åŠ å¸¦å®½ã€‚è€Œä¸” DX æˆæœ¬é«˜ï¼Œå»ºè®¾æ…¢ã€‚
* **é”å®š B, Dã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ B, D)**
* **FSx for Windows:** è¿ç§»æ–‡ä»¶æœåŠ¡å™¨ã€‚
* **Client VPN:** è¿ç§»è¿œç¨‹è®¿é—®å…¥å£ï¼Œå¸è½½æœ¬åœ°å¸¦å®½å‹åŠ›ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** è¿œç¨‹åŠå…¬åœºæ™¯ä¸‹çš„æ–‡ä»¶æœåŠ¡ä¸Šäº‘ä¸ VPN ä¼˜åŒ–ã€‚

---

#### ğŸ“ [370/529] EBS åŠ å¯†ä¿®å¤ä¸åˆè§„ (Control Tower + Copy Snapshot)

**1. ğŸ•µï¸â€â™‚ï¸ é¢˜çœ¼ä¸çº¦æŸåˆ†æ**
* **é—®é¢˜ï¼š** Unencrypted EBS volumes found.
* **ä»»åŠ¡ï¼š**
    1.  Encrypt unencrypted volumes (ä¿®å¤ç°æœ‰)ã€‚
    2.  Ensure future detection (ç›‘æ§æœªæ¥)ã€‚
    3.  Centrally manage (é›†ä¸­ç®¡ç†)ã€‚
* **é€‰æ‹©ï¼š** 2 ä¸ªæ­¥éª¤ã€‚

**2. âš¡ ç§’æ€æ€è·¯**
* **ä¿®å¤ç°æœ‰ (Remediation):**
    * EBS å·**ä¸èƒ½**ç›´æ¥å°±åœ°åŠ å¯†ã€‚å¿…é¡» **Snapshot -> Copy (Encrypt) -> Create Volume**ã€‚
    * $\rightarrow$ **é€‰ä¸­ C** (Create snapshot... create new encrypted volume... replace)ã€‚
    * (B è¯´ "encrypt in place"ï¼ŒæŠ€æœ¯ä¸Šä¸å¯èƒ½)ã€‚
* **é›†ä¸­ç®¡ç†ä¸ç›‘æ§ (Governance):**
    * å¤šè´¦æˆ·ç¯å¢ƒï¼Œé›†ä¸­ç®¡ç†åˆè§„ $\rightarrow$ **Control Tower**ã€‚
    * Control Tower æä¾›äº† **Guardrails** (æ£€æµ‹æ€§å’Œé¢„é˜²æ€§)ã€‚
    * å¼€å¯ "Strongly recommended controls" (åŒ…å«æ£€æµ‹æœªåŠ å¯†å·çš„ Config è§„åˆ™)ã€‚
    * $\rightarrow$ **é€‰ä¸­ A æˆ– D**ã€‚
    * A è¯´ "Strongly recommended controls"ã€‚D è¯´ "Mandatory controls"ã€‚EBS åŠ å¯†æ£€æµ‹é€šå¸¸å±äº Strongly recommended (æˆ– Elective)ï¼ŒMandatory é€šå¸¸æ˜¯æ›´åŸºç¡€çš„ï¼ˆå¦‚ CloudTrailï¼‰ã€‚
    * å®é™…ä¸Šï¼ŒControl Tower éƒ¨ç½²åï¼ŒConfig è§„åˆ™ä¼šè‡ªåŠ¨ä¸‹å‘ã€‚
    * **A vs D:** åŒºåˆ«åœ¨äº Guardrail ç±»åˆ«ã€‚EBS åŠ å¯†é€šå¸¸å±äº **Strongly Recommended**ã€‚
    * **é”å®š A, Cã€‚**

**3. âœ… æ­£ç¡®é€‰é¡¹è§£æ (é€‰é¡¹ A, C)**
* **C:** EBS åŠ å¯†çš„æ ‡å‡†ä¿®å¤æµç¨‹ï¼ˆå¿«ç…§å¤åˆ¶ï¼‰ã€‚
* **A:** Control Tower æä¾›é›†ä¸­å¼åˆè§„æ¡†æ¶ã€‚

**5. ğŸ“š æ ¸å¿ƒè€ƒç‚¹:** EBS åŠ å¯†ä¿®å¤æŠ€æœ¯ä¸ Control Tower åˆè§„ç®¡ç†ã€‚

---
**å°ç»“ï¼š**
è¿™ç»„é¢˜ç›®çš„ **PrivateLink è·¨åŒº**ã€**IPv6 Egress**ã€**Control Tower** éƒ½æ˜¯éš¾ç‚¹ã€‚

**æ­å–œä½ ï¼Œ370 é¢˜ï¼**