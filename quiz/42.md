
---

#### 📝 [42/529] 媒体处理迁移 (长耗时任务)

**1. 🕵️‍♂️ 题眼与约束分析**
* **任务：** 媒体文件处理。
* **耗时：** **Up to 1 hour** (长达1小时)。
* **负载：** 工作时间激增 (Spike)，下班后下降。
* **目标：** **Most cost-effective** (最具成本效益)。

**2. ⚡ 秒杀思路**
* **计算层选型：**
    * 看到 "1 hour processing" $\rightarrow$ **绝对不能选 Lambda** (Lambda 上限 15 分钟)。排除 A 和 C。
    * 剩下 B 和 D。都是用 EC2。
* **队列选型：**
    * **SQS** vs **Amazon MQ**。
    * SQS 是 AWS 原生、Serverless、按量付费（极便宜）。Amazon MQ 也是托管的，但需要为 Broker 实例付费（按小时计费），且扩展性不如 SQS。对于“成本优先”的云原生迁移，SQS 完胜。
* **存储选型：**
    * S3 vs EFS。S3 是对象存储，最适合存媒体文件，且比 EFS 便宜。
* **扩展策略：**
    * 选项 B 说 "Create a new EC2 instance... when messages in queue" (每条消息启动一个实例)。这是反模式，启动慢且管理开销大。
    * 选项 D 使用 **Auto Scaling Group** 根据 SQS 队列深度扩展。这是标准架构。
    * **锁定 D。**

**3. ✅ 正确选项解析 (选项 D)**
* **SQS + ASG + EC2:** 经典的解耦架构。ASG 可以利用 Spot 实例进一步降低成本。S3 存储结果最便宜。

**5. 📚 核心考点:** 异步解耦架构与计算服务限制 (Lambda Timeout)。
