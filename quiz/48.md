
---

#### 📝 [48/529] Lambda 连接耗尽 (RDS Proxy)

**1. 🕵️‍♂️ 题眼与约束分析**
* **架构：** API Gateway + Lambda $\rightarrow$ Aurora MySQL (3 Read Replicas)。
* **故障：** High load $\rightarrow$ **Large number of database connections** (大量数据库连接)。
* **目标：** Improve performance (解决连接问题)。
* **选择：** 2 个步骤。

**2. ⚡ 秒杀思路**
* **问题根源：** Lambda 是无状态的，高并发时会启动数千个容器，每个容器都去连数据库，瞬间把 DB 连接池打爆。
* **解决方案 1 (架构层):** 引入 **RDS Proxy**。它可以复用数据库连接（Connection Pooling），让数千个 Lambda 请求共享少量的 DB 连接。
    * $\rightarrow$ **选中 B**。
* **解决方案 2 (代码层):** 优化连接建立逻辑。不要在 `handler()` 内部建立连接（每次调用都连一次），而要放在 `handler()` **外部**（全局作用域）。这样当 Lambda 容器被复用（Warm Start）时，连接也可以复用。
    * $\rightarrow$ **选中 D**。
* **排除法：**
    * A (Cluster Endpoint): 这是写节点，Lambda 读写分离应该连 Reader Endpoint。
    * C (Provisioned Concurrency): 解决的是冷启动延迟，解决不了连接数过多的问题（甚至可能因为预热更多容器而加剧连接消耗）。
    * E (Edge-optimized): 解决网络延迟，无关数据库连接。

**3. ✅ 正确选项解析 (选项 B, D)**
* **RDS Proxy:** 专门治 Lambda 连接耗尽的药。
* **Reuse Connections:** 这里的考点是 Lambda 执行上下文的复用机制。

**5. 📚 核心考点:** Serverless 与关系型数据库集成的最佳实践。
